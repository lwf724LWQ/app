import{am as t,V as e,W as s,o as a,c as i,b as l,ac as o,n,K as c,u,G as r,Y as d,e as f,g as m,N as h,r as p,R as k,l as v,h as g,i as y,k as _,s as C,f as b,z as w,H as x,x as A,y as $,F as T,aa as z,p as X,j as D,t as L,an as S,I as B,A as P,v as I}from"./index-BgH6xnyV.js";import{_ as E}from"./uni-icons.C97tYrvo.js";import{r as j}from"./uni-app.es.wmAOsoD-.js";import{_ as M}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{B as Y,C as H,g as O,D as W}from"./apis.BPdXt_sA.js";class N{constructor(e,s){this.options=e,this.animation=t({...e}),this.currentStepAnimates={},this.next=0,this.$=s}_nvuePushAnimates(t,e){let s=this.currentStepAnimates[this.next],a={};if(a=s||{styles:{},config:{}},R.includes(t)){a.styles.transform||(a.styles.transform="");let s="";"rotate"===t&&(s="deg"),a.styles.transform+=`${t}(${e+s}) `}else a.styles[t]=`${e}`;this.currentStepAnimates[this.next]=a}_animateRun(t={},e={}){let s=this.$.$refs.ani.ref;if(s)return new Promise(((a,i)=>{nvueAnimation.transition(s,{styles:t,...e},(t=>{a()}))}))}_nvueNextAnimate(t,e=0,s){let a=t[e];if(a){let{styles:i,config:l}=a;this._animateRun(i,l).then((()=>{e+=1,this._nvueNextAnimate(t,e,s)}))}else this.currentStepAnimates={},"function"==typeof s&&s(),this.isEnd=!0}step(t={}){return this.animation.step(t),this}run(t){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof t&&t()}),this.$.durationTime)}}const R=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function V(t,e){if(e)return clearTimeout(e.timer),new N(t,e)}R.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((t=>{N.prototype[t]=function(...e){return this.animation[t](...e),this}}));const F=M({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(t){t?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let t={...this.styles,"transition-duration":this.duration/1e3+"s"},e="";for(let s in t){e+=this.toLine(s)+":"+t[s]+";"}return e},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(t={}){t.duration&&(this.durationTime=t.duration),this.animation=V(Object.assign(this.config,t),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(t,e={}){if(this.animation){for(let e in t)try{"object"==typeof t[e]?this.animation[e](...t[e]):this.animation[e](t[e])}catch(s){console.error(`方法 ${e} 不存在`)}return this.animation.step(e),this}},run(t){this.animation&&this.animation.run(t)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:t,transform:e}=this.styleInit(!1);void 0!==t&&(this.opacity=t),this.transform=e,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=V(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})}),20)}))},close(t){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:t,transform:e}=this.styleInit(!1);this.opacity=t||1,this.transform=e,this.$emit("change",{detail:this.isShow})}))},styleInit(t){let e={transform:""},s=(t,s)=>{"fade"===s?e.opacity=this.animationType(t)[s]:e.transform+=this.animationType(t)[s]+" "};return"string"==typeof this.modeClass?s(t,this.modeClass):this.modeClass.forEach((e=>{s(t,e)})),e},tranfromInit(t){let e=(t,e)=>{let s=null;"fade"===e?s=t?0:1:(s=t?"-100%":"0","zoom-in"===e&&(s=t?.8:1),"zoom-out"===e&&(s=t?1.2:1),"slide-right"===e&&(s=t?"100%":"0"),"slide-bottom"===e&&(s=t?"100%":"0")),this.animation[this.animationMode()[e]](s)};return"string"==typeof this.modeClass?e(t,this.modeClass):this.modeClass.forEach((s=>{e(t,s)})),this.animation},animationType:t=>({fade:t?1:0,"slide-top":`translateY(${t?"0":"-100%"})`,"slide-right":`translateX(${t?"0":"100%"})`,"slide-bottom":`translateY(${t?"0":"100%"})`,"slide-left":`translateX(${t?"0":"-100%"})`,"zoom-in":`scaleX(${t?1:.8}) scaleY(${t?1:.8})`,"zoom-out":`scaleX(${t?1:1.2}) scaleY(${t?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:t=>t.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(t,r,d,f,m,h){const p=u;return e((a(),i(p,{ref:"ani",animation:m.animationData,class:n(d.customClass),style:c(h.transformStyles),onClick:h.onClick},{default:l((()=>[o(t.$slots,"default")])),_:3},8,["animation","class","style","onClick"])),[[s,m.isShow]])}]]);const Z=M({name:"uniPopup",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted(){const t={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(e=>{if(this.disable)return;const s=Object.keys(t).find((s=>{const a=e.key,i=t[s];return i===a||Array.isArray(i)&&i.includes(a)}));s&&setTimeout((()=>{this.$emit(s,{})}),0)}))},render:()=>{}}},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(t){this.config[t]&&this[this.config[t]](!0)},immediate:!0},isDesktop:{handler:function(t){this.config[t]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(t){this.mkclick=t},immediate:!0},isMaskClick:{handler:function(t){this.mkclick=t},immediate:!0},showPopup(t){document.getElementsByTagName("body")[0].style.overflow=t?"hidden":"visible"}},data:()=>({duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}),computed:{isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:t,windowHeight:e,windowTop:s,safeArea:a,screenHeight:i,safeAreaInsets:l}=h();this.popupWidth=t,this.popupHeight=e+(s||0),a&&this.safeArea?this.safeAreaInsets=l.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(){document.getElementsByTagName("body")[0].style.overflow="visible"},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(t){t.stopPropagation(),this.clearPropagation=!0},open(t){if(this.showPopup)return;t&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(t)||(t=this.type),this.config[t]?(this[this.config[t]](),this.$emit("change",{show:!0,type:t})):console.error("缺少类型：",t)},close(t){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(t){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},t||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(t){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,backgroundColor:this.bg},t||(this.showPopup=!0,this.showTrans=!0)},center(t){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},t||(this.showPopup=!0,this.showTrans=!0)},left(t){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},t||(this.showPopup=!0,this.showTrans=!0)},right(t){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},t||(this.showPopup=!0,this.showTrans=!0)}}},[["render",function(t,e,s,h,p,k){const v=j(r("uni-transition"),F),g=u,y=d("keypress");return p.showPopup?(a(),i(g,{key:0,class:n(["uni-popup",[p.popupstyle,k.isDesktop?"fixforpc-z-index":""]])},{default:l((()=>[f(g,{onTouchstart:k.touchstart},{default:l((()=>[p.maskShow?(a(),i(v,{key:"1",name:"mask","mode-class":"fade",styles:p.maskClass,duration:p.duration,show:p.showTrans,onClick:k.onTap},null,8,["styles","duration","show","onClick"])):m("",!0),f(v,{key:"2","mode-class":p.ani,name:"content",styles:p.transClass,duration:p.duration,show:p.showTrans,onClick:k.onTap},{default:l((()=>[f(g,{class:n(["uni-popup__wrapper",[p.popupstyle]]),style:c({backgroundColor:k.bg}),onClick:k.clear},{default:l((()=>[o(t.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","onClick"])])),_:3},8,["mode-class","styles","duration","show","onClick"])])),_:3},8,["onTouchstart"]),p.maskShow?(a(),i(y,{key:0,onEsc:k.onTap},null,8,["onEsc"])):m("",!0)])),_:3},8,["class"])):m("",!0)}],["__scopeId","data-v-9c54b1f3"]]),U=M({__name:"forum",setup(t){const e=p("predict"),s=p(0),o=p(!1),c=p(null),d=p(!1),h=p(""),M=p(!1),N=p(""),R=p(""),V=p(""),F=p(!1),U=p([]),q=p([]),K=p(!1),G=p(["头尾","芝麻","定头","定百","定十","定尾","杀头","杀百","杀十","杀尾","稳码","中肚","头尾合","中肚合","千百合","千十合","百个合","十个合","ABXD","ABCX","AXCD","XBCD","ABXX","AXCX","XXCD","XBXD","死数","二字现","三字现","过滤王二定","过滤王三定","过滤王四定","头尾不合","中肚不合","千百不合","千十不合","百个不合","十个不合"]),J=p(["大师帖子","靓规贴子","点赞最多","讨论最热"]),Q=p(["#全部","#大师","#靓规贴","#过滤王","#点赞最多"]),tt=p([{id:16,name:"排列三",code:"pl3",status:"待开奖",time:"今天 21:30"},{id:17,name:"排列五",code:"pl5",status:"待开奖",time:"今天 21:30"},{id:15,name:"七星彩",code:"qxc",status:"待开奖",time:"今天 21:30"},{id:12,name:"福彩3D",code:"fc3d",status:"待开奖",time:"今天 21:30"}]),et=p(tt.value[0]),st=p([{id:1,title:"2024年彩票行业最新政策解读",content:"国家彩票管理中心发布最新政策，对彩票销售和兑奖流程进行了优化调整...",time:"2小时前",views:1256,likes:89},{id:2,title:"数字彩票中奖概率分析报告",content:"专业机构发布最新中奖概率分析，帮助彩民理性购彩...",time:"5小时前",views:892,likes:67},{id:3,title:"彩票公益金使用情况公示",content:"本年度彩票公益金主要用于教育、医疗、体育等公益事业...",time:"1天前",views:2156,likes:156}]),at=p([{id:1,username:"彩友小王",avatar:"/static/images/defaultAvatar.png",time:"刚刚",content:"今天分享一个实用的选号技巧，希望对大家有帮助！"},{id:2,username:"幸运星",avatar:"/static/images/defaultAvatar.png",time:"30分钟前",content:"最近在研究号码走势，发现了一些有趣的规律"},{id:3,username:"数字达人",avatar:"/static/images/defaultAvatar.png",time:"1小时前",content:"新一期预测已发布，欢迎大家参考讨论"}]),it=p([]),lt=p({id:null,number:null,status:"待开奖",time:"今天 21:30"}),ot=p([{id:1,username:"心灵导师",avatar:"/static/images/defaultAvatar.png",time:"1小时前",content:"生活就像彩票，不买永远没有中奖的机会，但买了也不一定中奖。重要的是保持一颗平常心，享受过程，期待美好。",likes:45,comments:12},{id:2,username:"正能量小王",avatar:"/static/images/defaultAvatar.png",time:"3小时前",content:"每一次失败都是成功的垫脚石，每一次尝试都是成长的机会。相信自己，坚持下去，好运总会降临。",likes:67,comments:23},{id:3,username:"励志达人",avatar:"/static/images/defaultAvatar.png",time:"6小时前",content:"人生就像选号，没有标准答案，但有无数种可能。勇敢尝试，坚持梦想，你就是自己的幸运星。",likes:89,comments:34}]);k((()=>{try{const t=v("currentLotteryType");t&&(et.value=t)}catch(t){}Pt(),It(),rt(et.value.code)}));const nt=t=>{e.value=t},ct=()=>{o.value=!o.value},ut=()=>{o.value=!1},rt=async t=>{try{const s=tt.value.find((e=>e.code===t));if(!s)return;g({title:"加载中..."});const a=await Y({cpid:s.id});if(y(),200===a.code&&null!==a.data&&void 0!==a.data){let i=null,l="待开奖",o="今天 21:30";"number"==typeof a.data||"string"==typeof a.data?i=a.data.toString():"object"==typeof a.data&&(i=a.data.issueno||a.data.number||a.data.id,l=a.data.status||"待开奖",o=a.data.time||"今天 21:30"),s.status=l,s.time=o,et.value.code===t&&(et.value.status=s.status,et.value.time=s.time),lt.value={id:i,number:i,status:l,time:o};try{_("currentIssueInfo",lt.value)}catch(e){}Tt(),C({title:"数据加载成功",icon:"success"})}else C({title:a.msg||"数据加载失败",icon:"none"})}catch(e){y(),C({title:"网络错误，请重试",icon:"none"})}},dt=t=>t?t.split(",").map((t=>t.trim())).filter((t=>t)):[],ft=(t,e)=>{z({current:t,urls:e})},mt=()=>{c.value.open()},ht=()=>{c.value.close()},pt=()=>{d.value=!d.value},kt=t=>{if(d.value){switch(h.value=t,t){case"predict":X({url:"/pages/predict-scheme/predict-scheme",success:()=>{ht()},fail:t=>{C({title:"跳转失败",icon:"none"})}});break;case"pattern":X({url:"/pages/pattern-predict/pattern-predict",success:()=>{ht()},fail:t=>{C({title:"跳转失败",icon:"none"})}});break;case"filter":C({title:"跳转到过滤王帖发布",icon:"none"});break;case"soup":C({title:"跳转到老母鸡汤发布",icon:"none"})}ht()}else C({title:"请先同意管理规范",icon:"none"})},vt=()=>{M.value=!0},gt=()=>{M.value=!1},yt=()=>{V.value.trim()?(_t(),bt()):wt()},_t=()=>{const t=V.value.trim().toLowerCase(),e=[];G.value.forEach((s=>{s.toLowerCase().includes(t)&&e.push(s)})),J.value.forEach((s=>{s.toLowerCase().includes(t)&&e.push(s)})),U.value=e.slice(0,5)},Ct=()=>{V.value="",F.value=!1,s.value=-1,wt()},bt=()=>{const t=V.value.trim().toLowerCase();t?(K.value=!0,q.value=it.value.filter((e=>!(!e.username||!e.username.toLowerCase().includes(t))||(!(!e.content||!e.content.toLowerCase().includes(t))||(!(!e.period||!e.period.toString().includes(t))||("全部"===t||("大师"===t||"大师帖子"===t?e.content&&e.content.toLowerCase().includes("大师"):"靓规贴"===t||"靓规贴子"===t?e.content&&e.content.toLowerCase().includes("靓规"):"过滤王"===t?e.content&&e.content.toLowerCase().includes("过滤王"):"点赞最多"===t&&e.likes>0)))))),"点赞最多"===t&&q.value.sort(((t,e)=>e.likes-t.likes)),C({title:`找到${q.value.length}条结果`,icon:"success"})):wt()},wt=()=>{q.value=[],K.value=!1},xt=()=>{const t=[];N.value&&t.push(N.value),R.value&&t.push(R.value),0!==t.length?(V.value=t.join("+"),At(),gt(),s.value=-1,C({title:`搜索${t.join("+")}`,icon:"success"})):C({title:"请选择筛选条件",icon:"none"})},At=t=>{K.value=!0,q.value=it.value.filter((t=>{let e=!1;if(N.value){const s=N.value.toLowerCase();t.content&&t.content.toLowerCase().includes(s)&&(e=!0),"头尾"===s&&t.content&&(t.content.includes("头")||t.content.includes("尾"))&&(e=!0),"芝麻"===s&&t.content&&t.content.includes("芝麻")&&(e=!0),"中肚"===s&&t.content&&t.content.includes("中肚")&&(e=!0),s.includes("定")&&t.content&&t.content.includes("定")&&(e=!0),s.includes("杀")&&t.content&&t.content.includes("杀")&&(e=!0),s.includes("合")&&t.content&&t.content.includes("合")&&(e=!0),s.includes("过滤王")&&t.content&&t.content.includes("过滤王")&&(e=!0)}if(R.value){const s=R.value.toLowerCase();"大师帖子"===s&&t.content&&t.content.includes("大师")&&(e=!0),"靓规贴子"===s&&t.content&&t.content.includes("靓规")&&(e=!0),"点赞最多"===s&&t.likes>0&&(e=!0),"讨论最热"===s&&t.comments>0&&(e=!0)}return e})),"点赞最多"===R.value?q.value.sort(((t,e)=>e.likes-t.likes)):"讨论最热"===R.value&&q.value.sort(((t,e)=>e.comments-t.comments))},$t=()=>{const t=[];return N.value&&t.push(N.value),R.value&&t.push(R.value),0===t.length?"搜索":t.join("+")},Tt=async()=>{try{const t={tname:et.value.name,issueno:lt.value.number||lt.value.id||"--",page:"1",limit:"20"},e=await H(t);let s=[];200===e.code&&e.data&&e.data.records&&Array.isArray(e.data.records)&&(s=[...e.data.records]);const a={tname:`${et.value.name}-规律预测`,issueno:lt.value.number||lt.value.id||"--",page:"1",limit:"20"},i=await H(a);200===i.code&&i.data&&i.data.records&&Array.isArray(i.data.records)&&(s=[...s,...i.data.records]),s.length>0?it.value=s.map((t=>{const e=t.id;if(!e)return null;const s=O(),a=zt(`${e}_${s}`),i=t.likeCount||0;let l="http://video.caimizm.com/himg/user.png";return l=Xt(t.account),{id:e,username:t.account||"匿名用户",avatar:l,time:Dt(t.createTime),status:"预测中",period:t.issueno||lt.value.number,content:t.content||"",image:t.pimg||"",likes:i,comments:t.comment||0,shares:0,isLiked:a,isLiking:!1}})).filter((t=>null!==t)):it.value=[]}catch(t){it.value=[]}},zt=t=>{try{return(v("likedPosts")||{})[t]||!1}catch(e){return!1}},Xt=t=>{try{if(t===O()){const t=v("loginData")||{};if(t.himg)return t.himg}const e=v("userAvatars")||{};return e[t]?e[t]:"http://video.caimizm.com/himg/user.png"}catch(e){return"http://video.caimizm.com/himg/user.png"}},Dt=t=>{if(!t)return"刚刚";try{const e=new Date(t),s=new Date-e;return s<6e4?"刚刚":s<36e5?`${Math.floor(s/6e4)}分钟前`:s<864e5?`${Math.floor(s/36e5)}小时前`:`${Math.floor(s/864e5)}天前`}catch(e){return"刚刚"}},Lt=()=>{N.value="",R.value="",C({title:"已清空筛选条件",icon:"success"})},St=async t=>{try{if(t.isLiking)return;const e=O(),s=`${t.id}_${e}`;if(zt(s))return void C({title:"你已经点赞过了",icon:"none"});if(!t.id)return void C({title:"帖子数据异常，无法点赞",icon:"none"});t.isLiking=!0;const a={postId:t.id,account:e},i=await W(a);200===i.code?(t.isLiked=!0,t.likes+=1,((t,e)=>{try{const s=v("likedPosts")||{};s[t]=e,_("likedPosts",s)}catch(s){}})(s,!0),C({title:i.msg||"点赞成功",icon:"success"}),Bt(t)):C({title:i.msg||"点赞失败",icon:"none"})}catch(e){C({title:"网络错误，请重试",icon:"none"})}finally{t.isLiking=!1}},Bt=t=>{const e=it.value.findIndex((e=>e.id===t.id));-1!==e&&(it.value[e]={...t});const s=q.value.findIndex((e=>e.id===t.id));-1!==s&&(q.value[s]={...t})},Pt=()=>{try{const t=v("loginData")||{},e=O();if(t.himg&&e){const s=v("userAvatars")||{};s[e]||(s[e]=t.himg,_("userAvatars",s))}}catch(t){}},It=()=>{try{if("undefined"!=typeof window&&window.addEventListener){const t=(t,e,s)=>{t.addEventListener(e,s,{passive:!0})};document.querySelectorAll(".predict-list, .modal-content, .dropdown-list, .filter-dialog").forEach((e=>{t(e,"touchstart",(()=>{})),t(e,"touchmove",(()=>{})),t(e,"touchend",(()=>{}))}))}}catch(t){}},Et=t=>{try{const e=jt(t.content),s={postId:t.id,schemeIds:e,postContent:t.content,period:t.period,timestamp:Date.now()};_("appendPostData",s),X({url:"/pages/predict-scheme/predict-scheme",success:()=>{C({title:"请选择要追加的方案",icon:"success"})},fail:t=>{C({title:"跳转失败",icon:"none"})}})}catch(e){C({title:"跳转失败",icon:"none"})}},jt=t=>{try{if(!t)return[];const e=[];return["头尾","中肚","ABXX","AXCX","XBXD","XXCD","ABCX","ABXD","AXCD","XBCD","芝麻","二字现","三字现","定头","定百","定十","定尾","杀头","杀百","杀十","杀尾","稳码","头尾合","中肚合","千百合","千十合","百个合","十个合","死数","头尾不合","中肚不合","千百不合","千十不合","百个不合","十个不合","过滤王二定","过滤王三定","过滤王四定"].forEach((s=>{t.includes(s)&&e.push(s)})),e}catch(e){return[]}};return(t,h)=>{const p=j(r("uni-icons"),E),k=L,v=u,g=S,y=B,z=P,X=I,Y=j(r("uni-popup"),Z);return a(),i(v,{class:"forum-container"},{default:l((()=>[f(v,{class:"main-navbar"},{default:l((()=>[f(v,{class:"nav-left"},{default:l((()=>[f(p,{type:"list",size:"20",color:"#fff"}),f(k,{class:"nav-text"},{default:l((()=>[b("说明")])),_:1})])),_:1}),f(v,{class:"nav-center"},{default:l((()=>[f(v,{class:"period-selector",onClick:ct},{default:l((()=>[f(k,{class:"period-text"},{default:l((()=>[b(w(et.value.name)+" "+w(et.value.status),1)])),_:1}),f(p,{type:"arrowdown",size:"16",color:"#fff",class:n({rotate:o.value})},null,8,["class"])])),_:1})])),_:1}),o.value?(a(),i(v,{key:0,class:"dropdown-mask",onClick:ut})):m("",!0),o.value?(a(),i(v,{key:1,class:"period-dropdown",onClick:h[0]||(h[0]=x((()=>{}),["stop"]))},{default:l((()=>[f(v,{class:"dropdown-header"},{default:l((()=>[f(k,{class:"dropdown-title"},{default:l((()=>[b("选择彩票类型")])),_:1}),f(v,{class:"close-btn",onClick:ut},{default:l((()=>[f(p,{type:"close",size:"16",color:"#999"})])),_:1})])),_:1}),f(g,{"scroll-y":"",class:"dropdown-list"},{default:l((()=>[(a(!0),A(T,null,$(tt.value,(t=>(a(),i(v,{class:n(["dropdown-item",{active:t.id===et.value.id}]),key:t.id,onClick:e=>(t=>{et.value=t,o.value=!1;try{_("currentLotteryType",t)}catch(e){}rt(t.code)})(t)},{default:l((()=>[f(k,{class:"period-item-text"},{default:l((()=>[b(w(t.name)+" "+w(t.status),1)])),_:2},1024),f(k,{class:"period-item-time"},{default:l((()=>[b(w(t.time),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})):m("",!0),f(v,{class:"nav-right",onClick:mt},{default:l((()=>[f(v,{class:"post-icon"},{default:l((()=>[f(p,{type:"plus",size:"20",color:"#fff"})])),_:1}),f(k,{class:"nav-text"},{default:l((()=>[b("发帖")])),_:1})])),_:1})])),_:1}),f(v,{class:"switch-tabs"},{default:l((()=>[f(v,{class:n(["tab-item",{active:"headlines"===e.value}]),onClick:h[1]||(h[1]=t=>nt("headlines"))},{default:l((()=>[f(k,{class:"tab-text"},{default:l((()=>[b("头条")])),_:1})])),_:1},8,["class"]),f(v,{class:n(["tab-item",{active:"follow"===e.value}]),onClick:h[2]||(h[2]=t=>nt("follow"))},{default:l((()=>[f(k,{class:"tab-text"},{default:l((()=>[b("关注")])),_:1})])),_:1},8,["class"]),f(v,{class:n(["tab-item",{active:"predict"===e.value}]),onClick:h[3]||(h[3]=t=>nt("predict"))},{default:l((()=>[f(k,{class:"tab-text"},{default:l((()=>[b("预测")])),_:1})])),_:1},8,["class"]),f(v,{class:n(["tab-item",{active:"soup"===e.value}]),onClick:h[4]||(h[4]=t=>nt("soup"))},{default:l((()=>[f(k,{class:"tab-text"},{default:l((()=>[b("鸡汤")])),_:1})])),_:1},8,["class"])])),_:1}),f(v,{class:"search-header"},{default:l((()=>[f(k,{class:"search-label"},{default:l((()=>[b("搜索帖子")])),_:1}),f(v,{class:"search-input-wrapper"},{default:l((()=>[f(p,{type:"search",size:"16",color:"#999"}),f(y,{type:"text",placeholder:"搜索头尾、芝麻、靓规等帖",class:"search-input",modelValue:V.value,"onUpdate:modelValue":h[5]||(h[5]=t=>V.value=t),onInput:yt,onFocus:h[6]||(h[6]=t=>F.value=!0)},null,8,["modelValue"]),V.value?(a(),i(v,{key:0,class:"clear-search",onClick:Ct},{default:l((()=>[f(p,{type:"clear",size:"16",color:"#999"})])),_:1})):m("",!0),f(v,{class:"filter-btn",onClick:vt},{default:l((()=>[f(p,{type:"tune",size:"16",color:"#999"})])),_:1})])),_:1})])),_:1}),F.value&&U.value.length>0?(a(),i(v,{key:0,class:"search-suggestions"},{default:l((()=>[(a(!0),A(T,null,$(U.value,((t,e)=>(a(),i(v,{class:"suggestion-item",key:e,onClick:e=>(t=>{V.value=t,F.value=!1,bt()})(t)},{default:l((()=>[f(p,{type:"search",size:"14",color:"#999"}),f(k,{class:"suggestion-text"},{default:l((()=>[b(w(t),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):m("",!0),f(v,{class:"category-tags"},{default:l((()=>[f(g,{"scroll-x":"",class:"category-scroll"},{default:l((()=>[f(v,{class:"tag-list"},{default:l((()=>[(a(!0),A(T,null,$(Q.value,((t,e)=>(a(),i(v,{class:n(["tag-item",{active:s.value===e}]),key:e,onClick:t=>(t=>{s.value=t;const e=Q.value[t].replace("#","");V.value=e,bt(),F.value=!1})(e)},{default:l((()=>[b(w(t),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1}),f(v,{class:"forum-content"},{default:l((()=>["headlines"===e.value?(a(),i(v,{key:0,class:"tab-content"},{default:l((()=>[f(v,{class:"headlines-list"},{default:l((()=>[(a(!0),A(T,null,$(st.value,((t,e)=>(a(),i(v,{class:"headline-item",key:e},{default:l((()=>[f(v,{class:"headline-header"},{default:l((()=>[f(k,{class:"headline-title"},{default:l((()=>[b(w(t.title),1)])),_:2},1024),f(k,{class:"headline-time"},{default:l((()=>[b(w(t.time),1)])),_:2},1024)])),_:2},1024),f(k,{class:"headline-content"},{default:l((()=>[b(w(t.content),1)])),_:2},1024),f(v,{class:"headline-stats"},{default:l((()=>[f(k,{class:"stat-text"},{default:l((()=>[b("阅读 "+w(t.views),1)])),_:2},1024),f(k,{class:"stat-text"},{default:l((()=>[b("点赞 "+w(t.likes),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):m("",!0),"follow"===e.value?(a(),i(v,{key:1,class:"tab-content"},{default:l((()=>[f(v,{class:"follow-list"},{default:l((()=>[(a(!0),A(T,null,$(at.value,((t,e)=>(a(),i(v,{class:"follow-item",key:e},{default:l((()=>[f(v,{class:"follow-header"},{default:l((()=>[f(z,{src:t.avatar,class:"user-avatar"},null,8,["src"]),f(v,{class:"user-info"},{default:l((()=>[f(k,{class:"username"},{default:l((()=>[b(w(t.username),1)])),_:2},1024),f(k,{class:"follow-time"},{default:l((()=>[b(w(t.time),1)])),_:2},1024)])),_:2},1024),f(v,{class:"follow-btn"},{default:l((()=>[f(k,{class:"btn-text"},{default:l((()=>[b("已关注")])),_:1})])),_:1})])),_:2},1024),f(k,{class:"follow-content"},{default:l((()=>[b(w(t.content),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):m("",!0),"predict"===e.value?(a(),i(v,{key:2,class:"tab-content"},{default:l((()=>[K.value&&V.value?(a(),i(v,{key:0,class:"search-status"},{default:l((()=>[f(k,{class:"search-status-text"},{default:l((()=>[b('搜索"'+w(V.value)+'"的结果',1)])),_:1}),f(k,{class:"search-count"},{default:l((()=>[b("共"+w(q.value.length)+"条",1)])),_:1})])),_:1})):m("",!0),f(v,{class:"predict-list"},{default:l((()=>[(a(!0),A(T,null,$(K.value&&V.value?q.value:it.value,((t,e)=>(a(),i(v,{class:"predict-item",key:e},{default:l((()=>[f(v,{class:"post-header"},{default:l((()=>[f(v,{class:"user-info"},{default:l((()=>[f(z,{src:t.avatar,class:"avatar"},null,8,["src"]),f(v,{class:"username-and-url"},{default:l((()=>[f(k,{class:"username"},{default:l((()=>[b(w(t.username),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(v,{class:"more-options"},{default:l((()=>[f(p,{type:"more-filled",size:"20",color:"#999"})])),_:1})])),_:2},1024),f(v,{class:"issue-time"},{default:l((()=>[f(k,{class:"issue-no"},{default:l((()=>[b("第"+w(t.period)+"期",1)])),_:2},1024),f(k,{class:"post-time"},{default:l((()=>[b(w(t.time),1)])),_:2},1024)])),_:2},1024),f(v,{class:"post-content"},{default:l((()=>[f(k,{class:"content-text"},{default:l((()=>[b(w(t.content),1)])),_:2},1024),t.image?(a(),i(v,{key:0,class:"post-image-container"},{default:l((()=>{return[(e=t.image,e&&e.includes(",")?(a(),i(v,{key:1,class:"multiple-images"},{default:l((()=>[(a(!0),A(T,null,$(dt(t.image),((e,s)=>(a(),i(v,{key:s,class:"image-item"},{default:l((()=>[f(z,{src:e.startsWith("http")?e:`http://video.caimizm.com/himg/${e}`,class:"post-image-small",mode:"aspectFit",onClick:s=>ft(e,dt(t.image))},null,8,["src","onClick"])])),_:2},1024)))),128))])),_:2},1024)):(a(),i(z,{key:0,src:t.image.startsWith("http")?t.image:`http://video.caimizm.com/himg/${t.image}`,class:"post-image",mode:"aspectFit",onClick:e=>ft(t.image,[t.image])},null,8,["src","onClick"])))];var e})),_:2},1024)):m("",!0)])),_:2},1024),f(v,{class:"post-footer"},{default:l((()=>[f(v,{class:n(["action-item",{"liked-disabled":t.isLiked}]),onClick:e=>St(t)},{default:l((()=>[f(p,{type:"hand-up",size:"18",color:t.isLiked?"#ff4757":"#999"},null,8,["color"]),f(k,{class:n(["count",{liked:t.isLiked}])},{default:l((()=>[b(w(t.likes),1)])),_:2},1032,["class"])])),_:2},1032,["class","onClick"]),f(v,{class:"action-item"},{default:l((()=>[f(p,{type:"redo",size:"18",color:"#999"}),f(k,{class:"count"},{default:l((()=>[b(w(t.shares),1)])),_:2},1024)])),_:2},1024),f(v,{class:"action-item"},{default:l((()=>[f(p,{type:"chatbubble",size:"18",color:"#999"}),f(k,{class:"count"},{default:l((()=>[b(w(t.comments),1)])),_:2},1024)])),_:2},1024),f(v,{class:"action-item append-btn",onClick:e=>(t=>{try{if(!t.id)return void C({title:"帖子数据异常，无法追帖",icon:"none"});const e=O();t.username===e?D({title:"追帖确认",content:`确定要对帖子"第${t.period}期"进行追帖吗？`,confirmText:"确定追帖",cancelText:"取消",success:e=>{e.confirm&&Et(t)}}):C({title:"只能追帖自己的帖子",icon:"none"})}catch(e){C({title:"操作失败，请重试",icon:"none"})}})(t)},{default:l((()=>[f(p,{type:"plus",size:"18",color:"#28B389"}),f(k,{class:"count"},{default:l((()=>[b("追帖")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),0===it.value.length?(a(),i(v,{key:0,class:"no-posts-tip"},{default:l((()=>[f(k,null,{default:l((()=>[b("暂无预测帖子")])),_:1})])),_:1})):m("",!0)])),_:1})])),_:1})):m("",!0),"soup"===e.value?(a(),i(v,{key:3,class:"tab-content"},{default:l((()=>[f(v,{class:"soup-list"},{default:l((()=>[(a(!0),A(T,null,$(ot.value,((t,e)=>(a(),i(v,{class:"soup-item",key:e},{default:l((()=>[f(v,{class:"soup-header"},{default:l((()=>[f(z,{src:t.avatar,class:"user-avatar"},null,8,["src"]),f(v,{class:"user-info"},{default:l((()=>[f(k,{class:"username"},{default:l((()=>[b(w(t.username),1)])),_:2},1024),f(k,{class:"soup-time"},{default:l((()=>[b(w(t.time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(k,{class:"soup-content"},{default:l((()=>[b(w(t.content),1)])),_:2},1024),f(v,{class:"soup-footer"},{default:l((()=>[f(v,{class:"post-stats"},{default:l((()=>[f(v,{class:"stat-item"},{default:l((()=>[f(p,{type:"heart",size:"14",color:"#999"}),f(k,{class:"stat-text"},{default:l((()=>[b(w(t.likes),1)])),_:2},1024)])),_:2},1024),f(v,{class:"stat-item"},{default:l((()=>[f(p,{type:"chat",size:"14",color:"#999"}),f(k,{class:"stat-text"},{default:l((()=>[b(w(t.comments),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):m("",!0)])),_:1}),f(v,{class:"publish-btn",onClick:mt},{default:l((()=>[f(p,{type:"plus",size:"20",color:"#fff"})])),_:1}),f(Y,{ref_key:"publishPopup",ref:c,type:"bottom","safe-area":!1,"mask-click":!1,animation:!0,"mask-background-color":"rgba(0,0,0,0.5)",duration:300},{default:l((()=>[f(v,{class:"publish-modal"},{default:l((()=>[f(v,{class:"modal-header"},{default:l((()=>[f(k,{class:"modal-title"},{default:l((()=>[b("发布帖子")])),_:1}),f(v,{class:"close-btn",onClick:ht},{default:l((()=>[f(p,{type:"close",size:"20",color:"#999"})])),_:1})])),_:1}),f(v,{class:"modal-content"},{default:l((()=>[f(v,{class:"period-title"},{default:l((()=>[f(k,{class:"period-text"},{default:l((()=>[b("彩迷")])),_:1})])),_:1}),f(v,{class:"agreement-section"},{default:l((()=>[f(v,{class:"checkbox-wrapper",onClick:pt},{default:l((()=>[f(v,{class:n(["custom-checkbox",{checked:d.value}])},{default:l((()=>[d.value?(a(),i(v,{key:0,class:"checkmark"},{default:l((()=>[b("✓")])),_:1})):m("",!0)])),_:1},8,["class"]),f(k,{class:"agreement-text"},{default:l((()=>[b("同意并遵守《彩友圈管理规范》")])),_:1})])),_:1})])),_:1}),f(v,{class:"function-buttons"},{default:l((()=>[f(v,{class:"button-row"},{default:l((()=>[f(v,{class:"function-btn",onClick:h[7]||(h[7]=t=>kt("predict"))},{default:l((()=>[f(v,{class:"btn-icon predict-icon"},{default:l((()=>[b("免")])),_:1}),f(k,{class:"btn-text"},{default:l((()=>[b("预测帖(免审)")])),_:1})])),_:1}),f(v,{class:"function-btn",onClick:h[8]||(h[8]=t=>kt("pattern"))},{default:l((()=>[f(v,{class:"btn-icon pattern-icon"},{default:l((()=>[f(p,{type:"redo",size:"24",color:"#fff"})])),_:1}),f(k,{class:"btn-text"},{default:l((()=>[b("规律帖(上传规律)")])),_:1})])),_:1}),f(v,{class:"function-btn",onClick:h[9]||(h[9]=t=>kt("filter"))},{default:l((()=>[f(v,{class:"btn-icon filter-icon"},{default:l((()=>[f(p,{type:"gear",size:"24",color:"#fff"})])),_:1}),f(k,{class:"btn-text"},{default:l((()=>[b("过滤王帖(免审)")])),_:1})])),_:1})])),_:1}),f(v,{class:"button-row"},{default:l((()=>[f(v,{class:"function-btn",onClick:h[10]||(h[10]=t=>kt("soup"))},{default:l((()=>[f(v,{class:"btn-icon soup-icon"},{default:l((()=>[f(p,{type:"coffee",size:"24",color:"#fff"})])),_:1}),f(k,{class:"btn-text"},{default:l((()=>[b("老母鸡汤")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),f(v,{class:"modal-footer"},{default:l((()=>[f(X,{class:"close-btn-modal",onClick:ht},{default:l((()=>[b("关闭")])),_:1})])),_:1})])),_:1})])),_:1},8,["mask-background-color"]),F.value?(a(),i(v,{key:1,class:"search-suggestions-mask",onClick:h[11]||(h[11]=t=>F.value=!1)})):m("",!0),M.value?(a(),i(v,{key:2,class:"filter-dialog-mask",onClick:gt},{default:l((()=>[f(v,{class:"filter-dialog",onClick:h[12]||(h[12]=x((()=>{}),["stop"]))},{default:l((()=>[f(v,{class:"filter-header"},{default:l((()=>[f(k,{class:"filter-title"},{default:l((()=>[b("心水预测")])),_:1}),f(k,{class:"filter-period"},{default:l((()=>[b("第"+w(et.value.name)+"期 "+w(et.value.status),1)])),_:1})])),_:1}),f(v,{class:"filter-section"},{default:l((()=>[f(v,{class:"filter-grid"},{default:l((()=>[(a(!0),A(T,null,$(G.value,(t=>(a(),i(v,{class:n(["filter-item",{active:N.value===t}]),key:t,onClick:e=>(t=>{N.value===t?N.value="":N.value=t})(t)},{default:l((()=>[b(w(t),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),f(v,{class:"filter-section"},{default:l((()=>[f(k,{class:"section-title"},{default:l((()=>[b("其他筛选")])),_:1}),f(k,{class:"section-subtitle"},{default:l((()=>[b("(可结合上面选项选择一个)")])),_:1}),f(v,{class:"filter-grid"},{default:l((()=>[(a(!0),A(T,null,$(J.value,(t=>(a(),i(v,{class:n(["filter-item",{active:R.value===t}]),key:t,onClick:e=>(t=>{R.value===t?R.value="":R.value=t})(t)},{default:l((()=>[b(w(t),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),f(v,{class:"filter-footer"},{default:l((()=>[f(v,{class:"filter-buttons"},{default:l((()=>[f(X,{class:"clear-filter-btn",onClick:Lt},{default:l((()=>[b(" 清空 ")])),_:1}),f(X,{class:"search-btn",onClick:xt},{default:l((()=>[b(w($t()),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):m("",!0)])),_:1})}}},[["__scopeId","data-v-43f0a683"]]);export{U as default};
