import{d as e,r as a,a as l,w as t,o as s,c,b as n,e as o,f as i,n as u,g as d,s as r,h as p,i as f,j as m,k as v,l as h,m as g,p as _,q as k,t as w,u as y,I as C,v as b}from"./index-D0AdlXYI.js";import{a as x,s as V,b as I}from"./apis.BsLnrVmb.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const A=j(e({__name:"login",setup(e){const j=a("0"),A=a(""),z=a(""),D=a("");a("");const P=a(!0),T=a(!1),U=l({type:"",account:"",password:""});t([j,A,z,D],(([e,a,l])=>{U.type=e,U.account=a,U.password=l}),{immediate:!0});const q=async()=>{var e;if(P.value)if(A.value&&z.value){p({title:"ç™»å½•ä¸­..."});try{const l=await x(U);if(f(),l){if(console.log("ç™»å½•APIè¿”å›çš„å®Œæ•´æ•°æ®:",l),!(null==(e=l.data)?void 0:e.token))return void m({title:"ç™»å½•å¤±è´¥",content:"æœªè·å–åˆ°tokenï¼Œè¯·é‡è¯•",showCancel:!1});if(V(l.data.token),!A.value)return void m({title:"ç™»å½•å¤±è´¥",content:"è´¦å·ä¿¡æ¯å¼‚å¸¸ï¼Œè¯·é‡è¯•",showCancel:!1});I(A.value);try{const e=l.data||{};let t="http://video.caimizm.com/himg/user.png";e.himg&&(t=e.himg.startsWith("http")?e.himg:`http://video.caimizm.com/himg/${e.himg}`);const s={nickname:e.uname||"ç”¨æˆ·",avatar:t,phone:A.value};v("userInfo",s),v("loginData",{uname:e.uname,himg:t,account:A.value}),console.log("ç™»å½•æˆåŠŸï¼Œç”¨æˆ·ä¿¡æ¯å·²ä¿å­˜:",s),console.log("ç™»å½•æ•°æ®å·²ä¿å­˜:",{uname:e.uname,himg:t,account:A.value});try{const e=h("userAvatars")||{};e[A.value]=t,v("userAvatars",e),console.log("ç™»å½•æ—¶è‡ªåŠ¨ä¿å­˜ç”¨æˆ·å¤´åƒ:",A.value,t)}catch(a){console.error("ä¿å­˜ç”¨æˆ·å¤´åƒåˆ°userAvatarså¤±è´¥:",a)}}catch(a){console.error("ä¿å­˜ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",a);const e="http://video.caimizm.com/himg/user.png",l={nickname:"ç”¨æˆ·",avatar:e,phone:A.value};v("userInfo",l),v("loginData",{uname:"ç”¨æˆ·",himg:e,account:A.value})}r({title:"ç™»å½•æˆåŠŸ",icon:"success",duration:1500}),setTimeout((()=>{g({url:"/pages/index/index"})}),1500)}else m({title:"ç™»å½•å¤±è´¥",content:"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•",showCancel:!1})}catch(a){f(),m({title:"ç™»å½•å¤±è´¥",content:"ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•",showCancel:!1})}}else r({title:"è¯·è¾“å…¥æ‰‹æœºå·å’Œå¯†ç ",icon:"none",duration:2e3});else r({title:"è¯·å…ˆåŒæ„ç”¨æˆ·åè®®",icon:"none",duration:2e3})},W=()=>{_({url:"/pages/reg/reg"})},$=()=>{_({url:"/pages/code-login/code-login?type=forgetPwd"})},B=()=>{k()},E=()=>{T.value=!T.value,console.log("å¯†ç æ˜¾ç¤ºçŠ¶æ€:",T.value?"æ˜¾ç¤º":"éšè—")},F=()=>{P.value=!P.value},G=()=>{m({title:"ç”¨æˆ·åè®®",content:"è¿™é‡Œæ˜¯ç”¨æˆ·åè®®çš„å†…å®¹...",showCancel:!1})},H=()=>{m({title:"éšç§æˆæƒ",content:"è¿™é‡Œæ˜¯éšç§æ”¿ç­–çš„å†…å®¹...",showCancel:!1})},J=()=>{P.value?m({title:"å¾®ä¿¡ç™»å½•",content:"å¾®ä¿¡ç™»å½•åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…",showCancel:!1,confirmText:"çŸ¥é“äº†"}):r({title:"è¯·å…ˆåŒæ„ç”¨æˆ·åè®®",icon:"none",duration:2e3})};return(e,a)=>{const l=w,t=y,r=C,p=b;return s(),c(t,{class:"login-wrapper"},{default:n((()=>[o(t,{class:"header"},{default:n((()=>[o(t,{class:"back-btn",onClick:B},{default:n((()=>[o(l,{class:"back-icon"},{default:n((()=>[i("â†")])),_:1})])),_:1}),o(t,{class:"header-wave"},{default:n((()=>[o(l,{class:"wave-icon"},{default:n((()=>[i("ğŸŒŠ")])),_:1})])),_:1})])),_:1}),o(t,{class:"title-section"},{default:n((()=>[o(l,{class:"main-title"},{default:n((()=>[i("æ¬¢è¿ç™»é™†")])),_:1})])),_:1}),o(t,{class:"login-form"},{default:n((()=>[o(t,{class:"input-group"},{default:n((()=>[o(t,{class:"input-container"},{default:n((()=>[o(t,{class:"input-icon phone-icon"},{default:n((()=>[o(t,{class:"phone-icon-svg"})])),_:1}),o(l,{class:"country-code"},{default:n((()=>[i("+86")])),_:1}),o(t,{class:"separator"}),o(r,{type:"text",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·","placeholder-class":"input-placeholder",modelValue:A.value,"onUpdate:modelValue":a[0]||(a[0]=e=>A.value=e),class:"phone-input"},null,8,["modelValue"])])),_:1})])),_:1}),o(t,{class:"input-group"},{default:n((()=>[o(t,{class:"input-container"},{default:n((()=>[o(t,{class:"input-icon lock-icon"},{default:n((()=>[o(t,{class:"lock-icon-svg"})])),_:1}),o(r,{type:T.value?"text":"password",placeholder:"è¯·è¾“å…¥å¯†ç ","placeholder-class":"input-placeholder",modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=e=>z.value=e),class:"password-input"},null,8,["type","modelValue"]),o(t,{class:"eye-icon",onClick:E},{default:n((()=>[o(t,{class:u(["eye-icon-svg",{"eye-open":T.value}])},{default:n((()=>[o(t,{class:"eye-ball"})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),o(t,{class:"links-section"},{default:n((()=>[o(l,{class:"register-link",onClick:W},{default:n((()=>[i("è¿˜æ²¡è´¦æˆ·?å»æ³¨å†Œ")])),_:1}),o(l,{class:"forgot-link",onClick:$},{default:n((()=>[i("å¿˜è®°å¯†ç ")])),_:1})])),_:1}),o(t,{class:"login-btn-container"},{default:n((()=>[o(p,{class:"login-btn",onClick:q},{default:n((()=>[i("ç™»å½•")])),_:1})])),_:1}),o(t,{class:"agreement-section"},{default:n((()=>[o(t,{class:"checkbox-container"},{default:n((()=>[o(t,{class:u(["checkbox",{checked:P.value}]),onClick:F},{default:n((()=>[P.value?(s(),c(l,{key:0,class:"checkmark"},{default:n((()=>[i("âœ“")])),_:1})):d("",!0)])),_:1},8,["class"]),o(l,{class:"agreement-text"},{default:n((()=>[i(" æˆ‘å·²é˜…è¯»å¹¶åŒæ„ "),o(l,{class:"link-text",onClick:G},{default:n((()=>[i("ã€Šç”¨æˆ·åè®®ã€‹")])),_:1}),i(" å’Œ "),o(l,{class:"link-text",onClick:H},{default:n((()=>[i("ã€Šéšç§æˆæƒã€‹")])),_:1})])),_:1})])),_:1})])),_:1}),o(t,{class:"divider"},{default:n((()=>[o(t,{class:"divider-line"}),o(l,{class:"divider-text"},{default:n((()=>[i("ç¬¬ä¸‰æ–¹è´¦å·ç™»å½•")])),_:1}),o(t,{class:"divider-line"})])),_:1}),o(t,{class:"third-party-login"},{default:n((()=>[o(p,{class:"wechat-btn",onClick:J},{default:n((()=>[o(t,{class:"btn-icon wechat-icon"},{default:n((()=>[o(t,{class:"wechat-icon-svg"})])),_:1}),o(l,{class:"btn-text"},{default:n((()=>[i("å¾®ä¿¡è´¦å·ç™»å½•")])),_:1})])),_:1})])),_:1})])),_:1}),o(t,{class:"bottom-indicator"})])),_:1})}}}),[["__scopeId","data-v-979ab7aa"]]);export{A as default};
