import{d as e,r as a,a as l,w as s,o as t,c as n,b as c,e as o,f as u,n as i,H as d,q as r,s as p,h as f,i as _,ai as m,j as v,u as g,t as h,I as y,v as k,ak as w}from"./index-D0AdlXYI.js";import{V as b}from"./VerificationCode.THAnE3RC.js";import{z as V,A as C}from"./apis.BsLnrVmb.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=x(e({__name:"reg",setup(e){const x=()=>{r()},j=()=>{G.value=!G.value},I=a(""),U=a(""),q=a(null),z=a(""),A=a(""),G=a(!1),H=l({account:"",code:"",uname:"",password:""}),M=e=>{U.value=e},R=async()=>{if(I.value)try{const e=await V({phone:I.value});200===e.code?q.value.startCountdown():p({title:e.errMsg,icon:"none"})}catch(e){p({title:"发送验证码失败",icon:"none"})}else p({title:"请输入手机号",icon:"none"})};s([I,U,z,A],(([e,a,l,s])=>{H.account=e,H.code=a,H.uname=l,H.password=s}),{immediate:!0});const S=async()=>{if(I.value)if(U.value)if(z.value)if(A.value){f({title:"注册中..."});try{const e=await C(H);_(),e?(p({title:"注册成功",icon:"success"}),setTimeout((()=>{m({url:"/pages/login/login"})}),1500)):v({title:"注册失败",content:"注册失败，请重试",showCancel:!1})}catch(e){_(),v({title:"注册失败",content:"网络错误，请检查网络连接后重试",showCancel:!1})}}else p({title:"请输入密码",icon:"none"});else p({title:"请输入用户名",icon:"none"});else p({title:"请输入验证码",icon:"none"});else p({title:"请输入手机号",icon:"none"})};return(e,a)=>{const l=g,s=h,r=y,p=k,f=w;return t(),n(l,{class:"reg-container"},{default:c((()=>[o(l,{class:"status-bar"}),o(l,{class:"header"},{default:c((()=>[o(l,{class:"back-btn",onClick:x},{default:c((()=>[o(l,{class:"back-icon"},{default:c((()=>[o(s,{class:"back-arrow"},{default:c((()=>[u("←")])),_:1}),o(l,{class:"logo-lines"},{default:c((()=>[o(l,{class:"line line-1"}),o(l,{class:"line line-2"})])),_:1})])),_:1})])),_:1})])),_:1}),o(l,{class:"title-section"},{default:c((()=>[o(s,{class:"main-title"},{default:c((()=>[u("欢迎注册")])),_:1})])),_:1}),o(f,{class:"reg-form",onSubmit:d(S,["prevent"])},{default:c((()=>[o(l,{class:"input-group"},{default:c((()=>[o(l,{class:"input-container"},{default:c((()=>[o(l,{class:"input-icon phone-icon"},{default:c((()=>[o(l,{class:"phone-icon-svg"})])),_:1}),o(s,{class:"country-code"},{default:c((()=>[u("+86")])),_:1}),o(l,{class:"separator"}),o(r,{type:"text",name:"account",placeholder:"请输入手机号","placeholder-class":"input-placeholder",modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),class:"phone-input"},null,8,["modelValue"])])),_:1})])),_:1}),o(l,{class:"input-group"},{default:c((()=>[o(l,{class:"input-container"},{default:c((()=>[o(l,{class:"input-icon code-icon"},{default:c((()=>[o(l,{class:"code-icon-svg"})])),_:1}),o(l,{class:"code-container"},{default:c((()=>[o(b,{ref_key:"codeRef",ref:q,placeholder:"请输入验证码",onGetCode:R,onInput:M},null,512)])),_:1})])),_:1})])),_:1}),o(l,{class:"input-group"},{default:c((()=>[o(l,{class:"input-container"},{default:c((()=>[o(l,{class:"input-icon user-icon"},{default:c((()=>[o(l,{class:"user-icon-svg"})])),_:1}),o(r,{type:"text",name:"username",placeholder:"请输入用户名","placeholder-class":"input-placeholder",modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=e=>z.value=e),class:"username-input"},null,8,["modelValue"])])),_:1})])),_:1}),o(l,{class:"input-group"},{default:c((()=>[o(l,{class:"input-container"},{default:c((()=>[o(l,{class:"input-icon lock-icon"},{default:c((()=>[o(l,{class:"lock-icon-svg"})])),_:1}),o(r,{type:G.value?"text":"password",name:"password",placeholder:"请输入密码","placeholder-class":"input-placeholder",modelValue:A.value,"onUpdate:modelValue":a[2]||(a[2]=e=>A.value=e),class:"password-input"},null,8,["type","modelValue"]),o(l,{class:"eye-icon",onClick:j},{default:c((()=>[o(l,{class:i(["eye-icon-svg",{"eye-open":G.value}])},{default:c((()=>[o(l,{class:"eye-ball"})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),o(l,{class:"links-section"},{default:c((()=>[o(s,{class:"login-link",onClick:x},{default:c((()=>[u("已有账号？去登录")])),_:1})])),_:1}),o(l,{class:"reg-btn-container"},{default:c((()=>[o(p,{type:"submit",class:"reg-btn",onClick:S},{default:c((()=>[u("注册")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-cac66f54"]]);export{j as default};
