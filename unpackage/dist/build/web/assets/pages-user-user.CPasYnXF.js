import{N as e,a,r as s,R as l,$ as t,s as c,G as i,c as r,b as u,l as o,u as d,o as f,e as n,f as _,x as p,g as m,j as v,p as g,A as h,t as y,Z as k}from"./index-D0AdlXYI.js";import{_ as b}from"./uni-icons.E5IxVglq.js";import{f as x,r as z}from"./uni-app.es.DeTReHEE.js";import{g as C,f as w,h as A,r as j}from"./apis.BsLnrVmb.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";e();const I=T({__name:"user",setup(e){const T=a({profile:null}),I=s(!1),G=s(0),F=s(!1),P=s(!1),D=e=>{T.profile&&(T.profile.avatar="http://video.caimizm.com/himg/user.png")},E=async()=>{if(F.value)console.log("æ­£åœ¨åŠ è½½ä½™é¢ï¼Œè·³è¿‡é‡å¤è¯·æ±‚");else try{F.value=!0;const e=w();if(!e)return void(G.value=0);const a=await A({account:e});200===a.code?G.value=a.data||0:G.value=0}catch(e){console.error("èŽ·å–ä½™é¢å¤±è´¥:",e),G.value=0}finally{F.value=!1}},J=async()=>{if(P.value)console.log("æ­£åœ¨æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼Œè·³è¿‡é‡å¤è¯·æ±‚");else try{P.value=!0;if(C()){try{const e=o("userInfo")||{},a=o("loginData")||{};a.uname||a.account?T.profile={avatar:a.himg||e.avatar||"http://video.caimizm.com/himg/user.png",nickname:a.uname||e.nickname||"æ¬¢è¿Žæ‚¨"}:T.profile={avatar:e.avatar||"http://video.caimizm.com/himg/user.png",nickname:e.nickname||"æ¬¢è¿Žæ‚¨"}}catch(e){const a=o("userInfo")||{};T.profile={avatar:a.avatar||"http://video.caimizm.com/himg/user.png",nickname:a.nickname||"æ¬¢è¿Žæ‚¨"}}E()}else T.profile=null,G.value=0}finally{P.value=!1}},L=()=>{v({title:"ç¡®è®¤é€€å‡º",content:"ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ",success:e=>{e.confirm&&(j(),J(),c({title:"å·²é€€å‡ºç™»å½•",icon:"success"}))}})};s([{icon:"contact",title:"è”ç³»å®¢æœ",subTitle:"",hasArrow:!0},{icon:"paperplane-filled",title:"è½¯ä»¶åˆ†äº«",subTitle:"åˆ†äº«ç»™æœ‹å‹",hasArrow:!0},{icon:"email-filled",title:"å»ºè®®åé¦ˆ",subTitle:"",hasArrow:!0},{icon:"upload-filled",title:"ç‰ˆæœ¬",subTitle:"å·²æ˜¯æœ€æ–°ç‰ˆV3.4.0.2",hasArrow:!0},{icon:"settings",title:"è®¾ç½®",subTitle:"",hasArrow:!0}]);const N=()=>{T.profile&&E(),g({url:"/pages/recharge/recharge"})},R=()=>{g({url:"/pages/transaction/transaction"})},U=()=>{g({url:"/pages/orders/orders"})},V=()=>{g({url:"/pages/login/login"})},Z=()=>{T.profile?g({url:"/pages/user/edit-profile"}):c({title:"è¯·å…ˆç™»å½•",icon:"none"})},$=e=>{e.stopPropagation(),I.value=!I.value,I.value&&T.profile&&E()};return l((()=>{J(),t("userProfileUpdated",(e=>{T.profile&&(T.profile.nickname=e.nickname,T.profile.avatar=e.avatar,c({title:"ç”¨æˆ·ä¿¡æ¯å·²æ›´æ–°",icon:"success"}))}))})),x((()=>{J()})),(e,a)=>{const s=h,l=d,t=y,c=k,o=z(i("uni-icons"),b);return f(),r(l,{class:"userLayout"},{default:u((()=>[T.profile?(f(),r(l,{key:0,class:"userInfo"},{default:u((()=>[n(l,{class:"user-header"},{default:u((()=>[n(l,{class:"avatar-section"},{default:u((()=>[n(l,{class:"avatar"},{default:u((()=>{var e;return[n(s,{src:(null==(e=T.profile)?void 0:e.avatar)||"http://video.caimizm.com/himg/user.png",mode:"aspectFill",onError:D},null,8,["src"])]})),_:1}),n(l,{class:"user-details"},{default:u((()=>[n(t,{class:"username"},{default:u((()=>{var e;return[_(p((null==(e=T.profile)?void 0:e.nickname)||"æ¬¢è¿Žæ‚¨"),1)]})),_:1})])),_:1})])),_:1}),n(l,{class:"edit-btn",onClick:Z},{default:u((()=>[n(t,{class:"edit-text"},{default:u((()=>[_("ç‚¹å‡»ç¼–è¾‘èµ„æ–™")])),_:1})])),_:1})])),_:1}),n(l,{class:"user-stats"},{default:u((()=>[n(l,{class:"stat-item"},{default:u((()=>[n(t,{class:"stat-label"},{default:u((()=>[_("å…³æ³¨")])),_:1}),n(t,{class:"stat-value"},{default:u((()=>[_("128")])),_:1})])),_:1}),n(l,{class:"stat-item"},{default:u((()=>[n(t,{class:"stat-label"},{default:u((()=>[_("ç²‰ä¸")])),_:1}),n(t,{class:"stat-value"},{default:u((()=>[_("256")])),_:1})])),_:1}),n(l,{class:"stat-item"},{default:u((()=>[n(t,{class:"stat-label"},{default:u((()=>[_("å¸–å­")])),_:1}),n(t,{class:"stat-value"},{default:u((()=>[_("89")])),_:1})])),_:1})])),_:1})])),_:1})):m("",!0),T.profile?m("",!0):(f(),r(l,{key:1,class:"userInfo"},{default:u((()=>[n(l,{class:"user-header"},{default:u((()=>[n(l,{class:"avatar-section"},{default:u((()=>[n(l,{class:"avatar gray"},{default:u((()=>[n(s,{src:"/assets/defaultAvatar-6GJoTdG3.png",mode:"aspectFill"})])),_:1}),n(l,{class:"user-details"},{default:u((()=>[n(t,{class:"username"},{default:u((()=>[_("æœªç™»å½•")])),_:1}),n(l,{class:"login-btn"},{default:u((()=>[n(c,{url:"/pages/login/login","hover-class":"none"},{default:u((()=>[n(t,{class:"login-text"},{default:u((()=>[_("ç‚¹å‡»ç™»å½•")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),n(l,{class:"edit-btn",onClick:V},{default:u((()=>[n(t,{class:"edit-text"},{default:u((()=>[_("ç‚¹å‡»ç™»å½•")])),_:1})])),_:1})])),_:1}),n(l,{class:"user-stats"},{default:u((()=>[n(l,{class:"stat-item"},{default:u((()=>[n(t,{class:"stat-label"},{default:u((()=>[_("å…³æ³¨")])),_:1}),n(t,{class:"stat-value"},{default:u((()=>[_("0")])),_:1})])),_:1}),n(l,{class:"stat-item"},{default:u((()=>[n(t,{class:"stat-label"},{default:u((()=>[_("ç²‰ä¸")])),_:1}),n(t,{class:"stat-value"},{default:u((()=>[_("0")])),_:1})])),_:1}),n(l,{class:"stat-item"},{default:u((()=>[n(t,{class:"stat-label"},{default:u((()=>[_("å¸–å­")])),_:1}),n(t,{class:"stat-value"},{default:u((()=>[_("0")])),_:1})])),_:1})])),_:1})])),_:1})),n(l,{class:"data-section"},{default:u((()=>[n(l,{class:"data-card",onClick:$},{default:u((()=>[n(t,{class:"data-number"},{default:u((()=>[_(p(I.value?"0.00":"****"),1)])),_:1}),n(t,{class:"data-label"},{default:u((()=>[_("æˆ‘çš„æ”¶ç›Š")])),_:1}),n(l,{class:"eye-icon",onClick:$},{default:u((()=>[n(o,{type:I.value?"eye-filled":"eye-slash-filled",size:"16",color:"#999"},null,8,["type"])])),_:1})])),_:1}),n(l,{class:"data-card",onClick:N},{default:u((()=>[n(t,{class:"data-number"},{default:u((()=>[I.value?(f(),r(t,{key:0},{default:u((()=>[_(p(G.value),1)])),_:1})):(f(),r(t,{key:1},{default:u((()=>[_("****")])),_:1}))])),_:1}),n(t,{class:"data-label"},{default:u((()=>[_("æˆ‘çš„é‡‘å¸")])),_:1}),n(l,{class:"eye-icon",onClick:$},{default:u((()=>[n(o,{type:I.value?"eye-filled":"eye-slash-filled",size:"16",color:"#999"},null,8,["type"])])),_:1})])),_:1})])),_:1}),n(l,{class:"recharge-section"},{default:u((()=>[n(t,{class:"section-title"}),n(l,{class:"recharge-items"},{default:u((()=>[n(l,{class:"recharge-item"},{default:u((()=>[n(l,{class:"recharge-icon purple"},{default:u((()=>[_("ðŸ’³")])),_:1}),n(t,{class:"recharge-text"},{default:u((()=>[_("å¤§å¸ˆåŒ…æœˆ")])),_:1})])),_:1}),n(l,{class:"recharge-item",onClick:U},{default:u((()=>[n(l,{class:"recharge-icon blue"},{default:u((()=>[_("ðŸ“‹")])),_:1}),n(t,{class:"recharge-text"},{default:u((()=>[_("æˆ‘çš„è®¢å•")])),_:1})])),_:1}),n(l,{class:"recharge-item",onClick:R},{default:u((()=>[n(l,{class:"recharge-icon yellow"},{default:u((()=>[_("Â¥")])),_:1}),n(t,{class:"recharge-text"},{default:u((()=>[_("æ¶ˆè´¹æ˜Žç»†")])),_:1})])),_:1}),n(l,{class:"recharge-item"},{default:u((()=>[n(l,{class:"recharge-icon red"},{default:u((()=>[_("ðŸŽ")])),_:1}),n(t,{class:"recharge-text"},{default:u((()=>[_("æ”¶è—")])),_:1})])),_:1})])),_:1})])),_:1}),n(l,{class:"services-section"},{default:u((()=>[n(t,{class:"section-title"},{default:u((()=>[_("å…¶å®ƒæœåŠ¡")])),_:1}),n(l,{class:"services-grid"},{default:u((()=>[n(l,{class:"service-item"},{default:u((()=>[n(o,{type:"headphones",size:"24",color:"#222"}),n(t,{class:"service-text"},{default:u((()=>[_("è”ç³»å®¢æœ")])),_:1})])),_:1}),n(l,{class:"service-item"},{default:u((()=>[n(o,{type:"compose",size:"24",color:"#222"}),n(t,{class:"service-text"},{default:u((()=>[_("æ„è§åé¦ˆ")])),_:1})])),_:1}),n(l,{class:"service-item",onClick:L},{default:u((()=>[n(o,{type:"settings",size:"24",color:"#222"}),n(t,{class:"service-text"},{default:u((()=>[_("è®¾ç½®")])),_:1})])),_:1}),n(l,{class:"service-item"},{default:u((()=>[n(o,{type:"locked",size:"24",color:"#222"}),n(t,{class:"service-text"},{default:u((()=>[_("éšç§æ”¿ç­–")])),_:1})])),_:1}),n(l,{class:"service-item"},{default:u((()=>[n(o,{type:"gift",size:"24",color:"#222"}),n(t,{class:"service-text"},{default:u((()=>[_("æ¯æ—¥ç¦åˆ©")])),_:1})])),_:1}),n(l,{class:"service-item"},{default:u((()=>[n(o,{type:"help",size:"24",color:"#222"}),n(t,{class:"service-text"},{default:u((()=>[_("å¸¸è§é—®é¢˜")])),_:1})])),_:1}),n(l,{class:"service-item"},{default:u((()=>[n(o,{type:"link",size:"24",color:"#222"}),n(t,{class:"service-text"},{default:u((()=>[_("å…³äºŽæˆ‘ä»¬")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-6210bc76"]]);export{I as default};
