import{r as a,a5 as s,k as l,a6 as e,G as t,c as u,b as i,u as o,o as n,e as r,g as d,y as c,z as p,F as m,A as g,Z as v}from"./index-D0AdlXYI.js";import{_}from"./uni-load-more.BpuYSIct.js";import{o as f,c as y,d as h,e as j,b as w,r as k}from"./uni-app.es.DeTReHEE.js";import{p as L,q as b}from"./apis.BsLnrVmb.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const z=x({__name:"classlist",setup(x){const z=a([]),q=a(!1),A={pageNum:1,pageSize:12};let C;f((a=>{let{id:l=null,name:e=null,type:t=null}=a;t&&(A.type=t),l&&(A.classid=l),C=e,s({title:e}),F()})),y((()=>{q.value||(A.pageNum++,F())}));const F=async()=>{let a;A.classid&&(a=await L()),A.type&&(a=await b(A)),z.value=[...z.value,...a.data],A.pageSize>a.data.length&&(q.value=!0),l("storgClassList",z.value),console.log(z.value)};return h((a=>({title:"咸虾米壁纸-"+C,path:"/pages/classlist/classlist?id="+A.classid+"&name="+C}))),j((()=>({title:"咸虾米壁纸-"+C,query:"id="+A.classid+"&name="+C}))),w((()=>{e("storgClassList")})),(a,s)=>{const l=k(t("uni-load-more"),_),e=o,f=g,y=v;return n(),u(e,{class:"classlist"},{default:i((()=>[z.value.length||q.value?d("",!0):(n(),u(e,{key:0,class:"loadingLayout"},{default:i((()=>[r(l,{status:"loading"})])),_:1})),r(e,{class:"content"},{default:i((()=>[(n(!0),c(m,null,p(z.value,(a=>(n(),u(y,{url:"/pages/preview/preview?id="+a._id,class:"item",key:a._id},{default:i((()=>[r(f,{src:a.smallPicurl,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["url"])))),128))])),_:1}),z.value.length||q.value?(n(),u(e,{key:1,class:"loadingLayout"},{default:i((()=>[r(l,{status:q.value?"noMore":"loading"},null,8,["status"])])),_:1})):d("",!0),r(e,{class:"safe-area-inset-bottom"})])),_:1})}}},[["__scopeId","data-v-f940e651"]]);export{z as default};
