"use strict";const e=require("../common/vendor.js"),r=require("../api/apis.js"),a=e.defineStore("twocounter",(()=>{const a=e.ref([]),l=e.ref({page:1,limit:20,tname:"排列五"}),u=e.ref(!1),t=e.ref(!0),o=e.ref(null),s=async(e=!1)=>{if(!u.value){u.value=!0,o.value=null;try{const o=await r.apiTicketQuery(l.value);console.log("原始数据:",o.data.records);let s=n(o.data.records);s=s.reverse(),i(s),a.value=e?[...a.value,...s]:s,t.value=o.data.records.length>=l.value.limit,console.log("转换后数据（包含4行空数据）:",a.value)}catch(s){o.value=s,console.error("获取数据失败:",s)}finally{u.value=!1}}},n=e=>e.map((e=>{const r=parseInt(e.issueno),a=e.number.split(" ").map(Number);return{qishu:r,numbers:[a.slice(0,4).reduce(((e,r)=>e+r),0),...a]}})),i=e=>{if(0===e.length)return;const r=e[e.length-1].qishu;for(let a=1;a<=4;a++){const l=Array(6).fill("");e.push({qishu:r+a,numbers:l})}};return{List:a,isLoading:u,hasMore:t,error:o,getCounterInfo:s,loadMoreData:async()=>{t.value&&!u.value&&await s(!0)},reset:()=>{a.value=[],l.value.page=1,t.value=!0,u.value=!1,o.value=null}}}));exports.usetwoCounterStore=a;
