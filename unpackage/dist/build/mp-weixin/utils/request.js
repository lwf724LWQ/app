"use strict";const t=require("../common/vendor.js");let e="";function o(){const o=t.index.getStorageSync("token");return e||o}let n="";exports.getAccount=function(){const e=t.index.getStorageSync("account");return n||e},exports.getToken=o,exports.removeToken=function(){e="",t.index.removeStorageSync("token")},exports.request=function(e={}){let{url:n,data:r={},method:a="GET",header:c={}}=e;n="http://caimi.s7.tunnelfrp.com"+n;const s=o();return s&&(c.Authorization=`${s}`),new Promise(((e,o)=>{t.index.request({url:n,data:r,method:a,header:c,success:t=>{200===t.statusCode?t.data&&200===t.data.code?e(t.data):o(t.data):o({code:t.statusCode,msg:`HTTP错误: ${t.statusCode}`,data:t.data})},fail:t=>{o(t)}})}))},exports.setAccount=function(e){n=e,t.index.setStorageSync("account",e)},exports.setToken=function(o){e=o,t.index.setStorageSync("token",o)};
