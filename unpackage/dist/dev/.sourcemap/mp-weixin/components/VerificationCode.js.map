{"version":3,"file":"VerificationCode.js","sources":["components/VerificationCode.vue","D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL2NhaW1peGN4L2NvbXBvbmVudHMvVmVyaWZpY2F0aW9uQ29kZS52dWU"],"sourcesContent":["<template>\r\n  <view class=\"code-container\">\r\n    <input \r\n      type=\"number\"\r\n      :placeholder=\"placeholder\" \r\n      placeholder-class=\"holder-class\" \r\n      class=\"code-input\"\r\n      v-model=\"codeValue\"  \r\n      @input=\"handleInput\"  \r\n    />\r\n    <button \r\n\ttype=\"default\"\r\n      class=\"code-btn\" \r\n      :disabled=\"isCounting || disabled\"\r\n      @click=\"handleGetCode\"\r\n    >\r\n      {{ isCounting ? `${countdown}s后重新获取` : buttonText }}\r\n    </button>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineProps, defineEmits, onUnmounted } from 'vue';\r\n\r\n// 接收父组件传递的参数\r\nconst props = defineProps({\r\n  // 按钮文字（默认\"获取验证码\"，可自定义）\r\n  buttonText: {\r\n    type: String,\r\n    default: '获取验证码'\r\n  },\r\n  // 输入框占位符（默认\"验证码\"）\r\n  placeholder: {\r\n    type: String,\r\n    default: '验证码'\r\n  },\r\n  // 是否禁用整个组件（用于表单验证等场景）\r\n  disabled: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  // 倒计时时长（秒）\r\n  countdownTime: {\r\n    type: Number,\r\n    default: 60\r\n  }\r\n});\r\n\r\n// 向父组件传递事件\r\nconst emit = defineEmits([\r\n  'getCode',  // 点击获取验证码时触发\r\n  'input'     // 输入验证码时触发（用于双向绑定）\r\n]);\r\n\r\n// 组件内部状态\r\nconst codeValue = ref('');       // 验证码输入值\r\nconst isCounting = ref(false);   // 是否正在倒计时\r\nconst countdown = ref(props.countdownTime);  // 倒计时秒数\r\nlet timer = null;                // 定时器\r\n\r\n// 点击获取验证码\r\nconst handleGetCode = () => {\r\n  // 触发父组件的getCode事件（父组件在这里处理发送验证码的逻辑）\r\n  emit('getCode');\r\n};\r\n\r\n// 开始倒计时（由父组件调用，通常在验证码发送成功后）\r\nconst startCountdown = () => {\r\n  if (isCounting.value) return;\r\n  \r\n  isCounting.value = true;\r\n  countdown.value = props.countdownTime;\r\n  \r\n  clearInterval(timer);\r\n  timer = setInterval(() => {\r\n    countdown.value--;\r\n    if (countdown.value <= 0) {\r\n      clearInterval(timer);\r\n      isCounting.value = false;\r\n    }\r\n  }, 1000);\r\n};\r\n\r\n// 输入事件处理\r\nconst handleInput = (e) => {\r\n  codeValue.value = e.detail.value;\r\n  emit('input', codeValue.value);  // 向父组件传递输入值\r\n};\r\n\r\n// 清除定时器（防止内存泄漏）\r\nonUnmounted(() => {\r\n  if (timer) clearInterval(timer);\r\n});\r\n\r\n// 暴露方法给父组件（如手动触发倒计时）\r\ndefineExpose({\r\n  startCountdown\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.code-container {\r\n  display: flex;\r\n  gap: 12rpx;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.code-input {\r\n  flex: 1;\r\n  height: 80rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.holder-class {\r\n  color: #999;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.code-btn {\r\n  width: 220rpx;\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  text-align: center;\r\n  background-color: transparent;\r\n  color: #000;\r\n  border: none;\r\n  font-size: 28rpx;\r\n  border-radius: 8rpx;\r\n  padding: 0;\r\n  &:after{\r\n\t  border: none;\r\n  }\r\n}\r\nuni-button[disabled][type='default'], uni-button[disabled]:not([type]) {\r\n    color: rgba(0, 0, 0, 0.3);\r\n    background-color: transparent;\r\n}\r\n</style>\r\n","import Component from 'C:/Users/Administrator/Desktop/caimixcx/components/VerificationCode.vue'\nwx.createComponent(Component)"],"names":["ref","onUnmounted"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,UAAM,QAAQ;AAwBd,UAAM,OAAO;AAMb,UAAM,YAAYA,cAAAA,IAAI,EAAE;AACxB,UAAM,aAAaA,cAAAA,IAAI,KAAK;AAC5B,UAAM,YAAYA,cAAG,IAAC,MAAM,aAAa;AACzC,QAAI,QAAQ;AAGZ,UAAM,gBAAgB,MAAM;AAE1B,WAAK,SAAS;AAAA,IAChB;AAGA,UAAM,iBAAiB,MAAM;AAC3B,UAAI,WAAW;AAAO;AAEtB,iBAAW,QAAQ;AACnB,gBAAU,QAAQ,MAAM;AAExB,oBAAc,KAAK;AACnB,cAAQ,YAAY,MAAM;AACxB,kBAAU;AACV,YAAI,UAAU,SAAS,GAAG;AACxB,wBAAc,KAAK;AACnB,qBAAW,QAAQ;AAAA,QACpB;AAAA,MACF,GAAE,GAAI;AAAA,IACT;AAGA,UAAM,cAAc,CAAC,MAAM;AACzB,gBAAU,QAAQ,EAAE,OAAO;AAC3B,WAAK,SAAS,UAAU,KAAK;AAAA,IAC/B;AAGAC,kBAAAA,YAAY,MAAM;AAChB,UAAI;AAAO,sBAAc,KAAK;AAAA,IAChC,CAAC;AAGD,aAAa;AAAA,MACX;AAAA,IACF,CAAC;;;;;;;;;;;;;;AChGD,GAAG,gBAAgB,SAAS;"}