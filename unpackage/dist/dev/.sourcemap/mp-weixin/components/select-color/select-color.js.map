{"version":3,"file":"select-color.js","sources":["components/select-color/select-color.vue","D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvQWRtaW5pc3RyYXRvci9EZXNrdG9wL2NhaW1peGN4L2NvbXBvbmVudHMvc2VsZWN0LWNvbG9yL3NlbGVjdC1jb2xvci52dWU"],"sourcesContent":["<template>\r\n  <div class=\"control-wrapper\">\r\n    <!-- 颜色触发按钮 -->\r\n    <button\r\n        class=\"color-trigger\"\r\n        :style=\"{ backgroundColor: selectedColor }\"\r\n        @click=\"toggleOptions\"\r\n    ></button>\r\n\r\n    <!-- 颜色面板 -->\r\n    <div\r\n        class=\"color-panel\"\r\n        v-if=\"isOptionsOpen\"\r\n        @click.stop\r\n    >\r\n      <div class=\"color-presets-container\">\r\n        <div class=\"color-presets\">\r\n          <div\r\n              v-for=\"color in presetColors\"\r\n              :key=\"color\"\r\n              class=\"color-preset\"\r\n              :style=\"{ backgroundColor: color }\"\r\n              @click=\"selectColor(color)\"\r\n              :title=\"color\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 右侧线条粗细选择（曲线图标，点击颜色按钮显示/隐藏） -->\r\n    <div\r\n        class=\"line-options-container\"\r\n        :class=\"{ 'visible': isOptionsOpen }\"\r\n        @click.stop\r\n    >\r\n      <div class=\"line-options\">\r\n        <button\r\n            v-for=\"width in lineWidthOptions\"\r\n            :key=\"width.value\"\r\n            :class=\"['line-option', { 'active': selectedLineWidth === width.value }]\"\r\n            @click=\"selectLineWidth(width.value)\"\r\n            :title=\"width.label\"\r\n        >\r\n          <!-- 曲线 SVG 图标 -->\r\n          <svg width=\"40\" height=\"30\" viewBox=\"0 0 40 30\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path\r\n                d=\"M5,15 Q20,5 35,15\"\r\n                fill=\"none\"\r\n                :stroke=\"selectedColor\"\r\n                :stroke-width=\"width.value\"\r\n                stroke-linecap=\"round\"\r\n            />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, defineEmits } from 'vue';\r\nconst emit = defineEmits(['select-color', 'select-line-width']);\r\n\r\n// 颜色相关\r\nconst selectedColor = ref('#3B82F6');\r\nconst isOptionsOpen = ref(false); // 控制选项显示/隐藏\r\nconst presetColors = ref([\r\n  '#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6',\r\n  '#EC4899', '#6366F1', '#14B8A6', '#F97316', '#DC2626',\r\n  '#000000', '#333333', '#666666', '#999999', '#CCCCCC', '#FFFFFF'\r\n]);\r\n\r\n// 线条粗细相关（保持原有样式）\r\nconst lineWidthOptions = [\r\n  { label: '细', value: 2 },\r\n  { label: '中', value: 4 },\r\n  { label: '粗', value: 6 }\r\n];\r\nconst selectedLineWidth = ref(4); // 默认选中\"中\"\r\n\r\n// 切换选项显示/隐藏\r\nconst toggleOptions = () => {\r\n  isOptionsOpen.value = !isOptionsOpen.value;\r\n};\r\n\r\n// 选择颜色\r\nconst selectColor = (color) => {\r\n  selectedColor.value = color;\r\n  emit('select-color', color);\r\n  // 选择颜色后保持面板打开\r\n  // isOptionsOpen.value = false;\r\n};\r\n\r\n// 选择线条粗细\r\nconst selectLineWidth = (value) => {\r\n  selectedLineWidth.value = value;\r\n  emit('select-line-width', value);\r\n  // 选择线条后保持面板打开\r\n  // isOptionsOpen.value = false;\r\n};\r\n\r\n// 颜色格式验证\r\nconst validateColor = () => {\r\n  const regex = /^#([0-9A-F]{3}){1,2}$/i;\r\n  if (!regex.test(selectedColor.value)) {\r\n    selectedColor.value = lastValidColor;\r\n  }\r\n};\r\n\r\nlet lastValidColor = selectedColor.value;\r\nwatch(selectedColor, (newVal) => {\r\n  const regex = /^#([0-9A-F]{3}){1,2}$/i;\r\n  if (regex.test(newVal)) {\r\n    lastValidColor = newVal;\r\n  }\r\n});\r\n\r\n// 点击外部关闭选项\r\nconst handleClickOutside = (e) => {\r\n  const wrapper = document.querySelector('.control-wrapper');\r\n  if (wrapper && !wrapper.contains(e.target)) {\r\n    isOptionsOpen.value = false;\r\n  }\r\n};\r\n\r\ndocument.addEventListener('click', handleClickOutside);\r\n\r\n// 组件卸载时清理\r\nconst cleanup = () => {\r\n  document.removeEventListener('click', handleClickOutside);\r\n};\r\nwindow.addEventListener('beforeunload', cleanup);\r\n</script>\r\n\r\n<style scoped>\r\n.control-wrapper {\r\n  position: fixed;\r\n  bottom: 50rpx;\r\n  left: 50rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  z-index: 999;\r\n}\r\n\r\n/* 颜色触发按钮 */\r\n.color-trigger {\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  border: none;\r\n  border-radius: 12rpx;\r\n  cursor: pointer;\r\n  box-shadow: 0 4rpx 10rpx rgba(0,0,0,0.1);\r\n  transition: transform 0.2s;\r\n  position: relative;\r\n  z-index: 999;\r\n}\r\n\r\n.color-trigger:hover {\r\n  transform: scale(1.05);\r\n}\r\n\r\n/* 颜色面板（保持原有样式） */\r\n.color-panel {\r\n  position: absolute;\r\n  bottom: 90rpx; /* 显示在触发按钮上方 */\r\n  left: 0;\r\n  background: white;\r\n  padding: 0;\r\n  border-radius: 16rpx;\r\n  box-shadow: 0 8rpx 30rpx rgba(0,0,0,0.15);\r\n  width: 100rpx;\r\n  z-index: 999;\r\n}\r\n\r\n.color-presets-container {\r\n  height: 600rpx;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  padding-right: 8rpx;\r\n}\r\n\r\n.color-presets {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n  align-items: center;\r\n  padding: 10rpx 0;\r\n}\r\n\r\n.color-preset {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  transition: transform 0.2s;\r\n  border: 1px solid #eee;\r\n}\r\n\r\n.color-preset:hover {\r\n  transform: scale(1.1);\r\n}\r\n\r\n/* 右侧线条粗细选择（保持原有样式，添加显示/隐藏控制） */\r\n.line-options-container {\r\n  margin-left: 15rpx;\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  transform: translateX(-10rpx);\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n/* 显示线条选项 */\r\n.line-options-container.visible {\r\n  opacity: 1;\r\n  visibility: visible;\r\n  transform: translateX(0);\r\n}\r\n\r\n.line-options {\r\n  display: flex;\r\n  gap: 10rpx;\r\n  background: white;\r\n  padding: 15rpx;\r\n  border-radius: 12rpx;\r\n  box-shadow: 0 4rpx 10rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.line-option {\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 8rpx;\r\n  padding: 8rpx;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.line-option:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.line-option.active {\r\n  background-color: rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n/* SVG 曲线图标样式 */\r\nsvg {\r\n  display: block;\r\n}\r\n</style>\r\n","import Component from 'C:/Users/Administrator/Desktop/caimixcx/components/select-color/select-color.vue'\nwx.createComponent(Component)"],"names":["ref","watch"],"mappings":";;;;;;;;;;;AA6DA,UAAM,OAAO;AAGb,UAAM,gBAAgBA,cAAAA,IAAI,SAAS;AACnC,UAAM,gBAAgBA,cAAAA,IAAI,KAAK;AAC/B,UAAM,eAAeA,cAAAA,IAAI;AAAA,MACvB;AAAA,MAAW;AAAA,MAAW;AAAA,MAAW;AAAA,MAAW;AAAA,MAC5C;AAAA,MAAW;AAAA,MAAW;AAAA,MAAW;AAAA,MAAW;AAAA,MAC5C;AAAA,MAAW;AAAA,MAAW;AAAA,MAAW;AAAA,MAAW;AAAA,MAAW;AAAA,IACzD,CAAC;AAGD,UAAM,mBAAmB;AAAA,MACvB,EAAE,OAAO,KAAK,OAAO,EAAG;AAAA,MACxB,EAAE,OAAO,KAAK,OAAO,EAAG;AAAA,MACxB,EAAE,OAAO,KAAK,OAAO,EAAG;AAAA,IAC1B;AACA,UAAM,oBAAoBA,cAAAA,IAAI,CAAC;AAG/B,UAAM,gBAAgB,MAAM;AAC1B,oBAAc,QAAQ,CAAC,cAAc;AAAA,IACvC;AAGA,UAAM,cAAc,CAAC,UAAU;AAC7B,oBAAc,QAAQ;AACtB,WAAK,gBAAgB,KAAK;AAAA,IAG5B;AAGA,UAAM,kBAAkB,CAAC,UAAU;AACjC,wBAAkB,QAAQ;AAC1B,WAAK,qBAAqB,KAAK;AAAA,IAGjC;AAUqB,kBAAc;AACnCC,kBAAAA,MAAM,eAAe,CAAC,WAAW;AAAA,IAKjC,CAAC;AAGD,UAAM,qBAAqB,CAAC,MAAM;AAChC,YAAM,UAAU,SAAS,cAAc,kBAAkB;AACzD,UAAI,WAAW,CAAC,QAAQ,SAAS,EAAE,MAAM,GAAG;AAC1C,sBAAc,QAAQ;AAAA,MACvB;AAAA,IACH;AAEA,aAAS,iBAAiB,SAAS,kBAAkB;AAGrD,UAAM,UAAU,MAAM;AACpB,eAAS,oBAAoB,SAAS,kBAAkB;AAAA,IAC1D;AACA,WAAO,iBAAiB,gBAAgB,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClI/C,GAAG,gBAAgB,SAAS;"}