{"version":3,"file":"edit-profile.js","sources":["pages/user/edit-profile.vue","D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9lZGl0LXByb2ZpbGUudnVl"],"sourcesContent":["<template>\r\n    <view class=\"edit-profile-container\">\r\n      <!-- 导航栏 -->\r\n      <view class=\"navbar\">\r\n        <view class=\"nav-content\">\r\n          <view class=\"nav-left\" @click=\"goBack\">\r\n            <text class=\"back-arrow\">‹</text>\r\n          </view>\r\n          <text class=\"nav-title\">编辑资料</text>\r\n          <view class=\"nav-right\" @click=\"saveProfile\">\r\n            <text class=\"save-text\">保存</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 主要内容区域 -->\r\n      <view class=\"main-content\">\r\n        <!-- 头像显示区域 -->\r\n       <view class=\"avatar-section\">\r\n          <view class=\"avatar-container\" @click=\"handleAvatarClick\">\r\n            <image \r\n              :src=\"userInfo.avatar\" \r\n              mode=\"aspectFill\" \r\n              class=\"avatar-image\"\r\n              @error=\"handleImageError\"\r\n            ></image>\r\n            <view class=\"avatar-overlay\">\r\n              <uni-icons type=\"camera\" size=\"24\" color=\"#fff\"></uni-icons>\r\n              <text class=\"avatar-text\">点击上传头像</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\t\t<!-- <view class=\"avatar-section\">\r\n\t\t   <view class=\"avatar-container\">\r\n\t\t     <image \r\n\t\t       :src=\"userInfo.avatar\" \r\n\t\t       mode=\"aspectFill\" \r\n\t\t       class=\"avatar-image\"\r\n\t\t       @error=\"handleImageError\"\r\n\t\t     ></image>\r\n\t\t     <view class=\"avatar-overlay\">\r\n\t\t       <uni-icons type=\"camera\" size=\"24\" color=\"#fff\"></uni-icons>\r\n\t\t       <text class=\"avatar-text\">点击上传头像</text>\r\n\t\t     </view>\r\n\t\t   </view>\r\n\t\t </view> -->\r\n        \r\n        <!-- 用户信息表单 -->\r\n        <view class=\"form-section\">\r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">昵称</text>\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"userInfo.nickname\" \r\n              placeholder=\"请输入昵称\"\r\n              class=\"form-input\"\r\n              maxlength=\"20\"\r\n            />\r\n          </view>\r\n          \r\n          <view class=\"form-item\">\r\n            <text class=\"form-label\">手机号</text>\r\n            <input \r\n              type=\"text\" \r\n              v-model=\"userInfo.phone\" \r\n              placeholder=\"手机号\"\r\n              class=\"form-input disabled\"\r\n              maxlength=\"11\"\r\n              disabled\r\n            />\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 保存按钮 -->\r\n        <view class=\"save-section\">\r\n          <button class=\"save-btn\" @click=\"saveProfile\" :disabled=\"isSaving\">\r\n            <uni-icons v-if=\"isSaving\" type=\"spinner-cycle\" size=\"16\" color=\"#fff\"></uni-icons>\r\n            <text v-else class=\"save-btn-text\">{{ isSaving ? '保存中...' : '保存修改' }}</text>\r\n          </button>\r\n          \r\n        </view>\r\n      </view>\r\n    </view>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, reactive, onMounted } from 'vue'\r\n  import { getToken, getAccount } from '@/utils/request.js'\r\n  import { apiUpdateUserProfile, getCOSSecretKey } from '@/api/apis.js'\r\n  \r\n  // 用户信息\r\n  const userInfo = reactive({\r\n    avatar: 'http://video.caimizm.com/himg/user.png',\r\n    nickname: '',\r\n    phone: ''\r\n  })\r\n  \r\n  // 保存状态\r\n  const isSaving = ref(false)\r\n  \r\n  // 按照图片示例实现的OSS上传函数\r\n  const uploadObject = async (file, callback) => {\r\n    try {\r\n      let fileName = file.name || ''\r\n      const origin_file_name = fileName.split(\".\").slice(0, fileName.split(\".\").length - 1).join('.') // 获取文件名\r\n      \r\n      // 获取当前时间戳\r\n      const upload_file_name = new Date().getTime() + '.' + fileName.split(\".\")[fileName.split(\".\").length - 1]\r\n      \r\n      // 请求接口得到token\r\n      let res = await getCOSSecretKey({})\r\n      \r\n      console.log('STS接口返回数据:', res)\r\n      console.log('STS接口返回的data字段:', res.data)\r\n      \r\n      if (res.code !== 200) {\r\n        throw new Error('获取上传凭证失败')\r\n      }\r\n      \r\n      // 动态导入ali-oss\r\n      const OSS = await import('ali-oss')\r\n      \r\n      // 根据STS接口实际返回的数据结构创建OSS客户端\r\n      const ossConfig = {\r\n        region: res.data.region || 'cn-guangzhou',\r\n        accessKeyId: res.data.STSaccessKeyId,\r\n        accessKeySecret: res.data.STSsecretAccessKey,\r\n        stsToken: res.data.security_token,\r\n        bucket: res.data.bucket || 'cjvd',\r\n        // 使用正确的endpoint\r\n        endpoint: 'https://oss-cn-guangzhou.aliyuncs.com',\r\n        // 添加STS token刷新机制\r\n        refreshSTSToken: async () => {\r\n          const newRes = await getCOSSecretKey({})\r\n          return {\r\n            accessKeyId: newRes.data.STSaccessKeyId,\r\n            accessKeySecret: newRes.data.STSsecretAccessKey,\r\n            stsToken: newRes.data.security_token\r\n          }\r\n        },\r\n        refreshSTSTokenInterval: 300000 // 5分钟刷新一次\r\n      }\r\n      \r\n      console.log('OSS配置:', {\r\n        region: ossConfig.region,\r\n        bucket: ossConfig.bucket,\r\n        endpoint: ossConfig.endpoint,\r\n        accessKeyId: ossConfig.accessKeyId ? '***' : 'MISSING',\r\n        accessKeySecret: ossConfig.accessKeySecret ? '***' : 'MISSING',\r\n        stsToken: ossConfig.stsToken ? '***' : 'MISSING'\r\n      })\r\n      \r\n      const client = new OSS.default(ossConfig)\r\n      \r\n      console.log('开始上传文件:', upload_file_name)\r\n      // 上传文件\r\n      const result = await client.put(`himg/${upload_file_name}`, file)\r\n      \r\n      if (result && result.url) {\r\n        // 直接使用固定的自定义域名前缀 + 唯一文件名\r\n        const customUrl = `http://video.caimizm.com/himg/${upload_file_name}`\r\n        \r\n        console.log('上传成功，生成的自定义URL:', customUrl)\r\n        callback(customUrl)\r\n      } else {\r\n        throw new Error('上传失败')\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('OSS上传失败:', error)\r\n      throw error\r\n    }\r\n  }\r\n  \r\n  // 返回上一页\r\n  const goBack = () => {\r\n    uni.navigateBack()\r\n  }\r\n  \r\n  \r\n  // 处理图片加载错误\r\n  const handleImageError = () => {\r\n    userInfo.avatar = 'http://video.caimizm.com/himg/user.png'\r\n  }\r\n  \r\n  // 处理头像点击事件\r\n  const handleAvatarClick = async () => {\r\n    try {\r\n      // 选择图片\r\n      const chooseResult = await uni.chooseImage({\r\n        count: 1,\r\n        sizeType: ['compressed'],\r\n        sourceType: ['album', 'camera']\r\n      })\r\n      \r\n      if (chooseResult.tempFilePaths && chooseResult.tempFilePaths.length > 0) {\r\n        const tempFilePath = chooseResult.tempFilePaths[0]\r\n        \r\n        // 显示上传进度\r\n        uni.showLoading({\r\n          title: '上传头像中...'\r\n        })\r\n        \r\n        // 在H5环境中，需要将临时路径转换为File对象\r\n        let fileToUpload\r\n        if (process.env.NODE_ENV === 'development' || typeof window !== 'undefined') {\r\n          // H5环境\r\n          const response = await fetch(tempFilePath)\r\n          const blob = await response.blob()\r\n          fileToUpload = new File([blob], 'avatar.jpg', { type: 'image/jpeg' })\r\n        } else {\r\n          // 小程序环境\r\n          fileToUpload = tempFilePath\r\n        }\r\n        \r\n        // 上传到OSS\r\n        await uploadObject(fileToUpload, (url) => {\r\n          // 上传成功，更新头像\r\n          userInfo.avatar = url\r\n          \r\n          uni.hideLoading()\r\n          uni.showToast({\r\n            title: '头像上传成功',\r\n            icon: 'success'\r\n          })\r\n          \r\n          // 立即保存到本地存储\r\n          uni.setStorageSync('userInfo', {\r\n            nickname: userInfo.nickname,\r\n            avatar: userInfo.avatar\r\n          })\r\n          \r\n          const loginData = uni.getStorageSync('loginData') || {}\r\n          loginData.himg = userInfo.avatar\r\n          uni.setStorageSync('loginData', loginData)\r\n        })\r\n        \r\n      }\r\n    } catch (error) {\r\n      uni.hideLoading()\r\n      console.error('头像上传失败:', error)\r\n      uni.showToast({\r\n        title: '头像上传失败',\r\n        icon: 'none'\r\n      })\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  // 验证表单\r\n  const validateForm = () => {\r\n    if (!userInfo.nickname.trim()) {\r\n      uni.showToast({\r\n        title: '请输入昵称',\r\n        icon: 'none'\r\n      })\r\n      return false\r\n    }\r\n    \r\n    return true\r\n  }\r\n  \r\n  // 保存用户信息\r\n  const saveProfile = async () => {\r\n    if (!validateForm()) {\r\n      return\r\n    }\r\n    \r\n    if (isSaving.value) {\r\n      return\r\n    }\r\n    \r\n    try {\r\n      isSaving.value = true\r\n      \r\n      uni.showLoading({\r\n        title: '保存中...'\r\n      })\r\n      \r\n      // 准备保存的数据，根据API文档要求\r\n      const saveData = {\r\n        account: userInfo.phone, // 手机号作为account字段\r\n        uname: userInfo.nickname // 昵称字段名改为 uname\r\n      }\r\n      \r\n      // 如果头像已更新，只传递文件名给后端\r\n      if (userInfo.avatar && userInfo.avatar !== 'http://video.caimizm.com/himg/user.png') {\r\n        // 从完整URL中提取文件名\r\n        const fileName = userInfo.avatar.replace('http://video.caimizm.com/himg/', '')\r\n        saveData.himg = fileName\r\n      }\r\n      \r\n      // 调用保存用户信息的API\r\n      const response = await apiUpdateUserProfile(saveData)\r\n      \r\n      uni.hideLoading()\r\n      \r\n      if (response.code !== 200) {\r\n        throw new Error(response.msg || '保存失败')\r\n      }\r\n      \r\n      uni.showToast({\r\n        title: '保存成功',\r\n        icon: 'success'\r\n      })\r\n      \r\n      // 保存到本地存储\r\n      uni.setStorageSync('userInfo', {\r\n        nickname: userInfo.nickname,\r\n        avatar: userInfo.avatar\r\n      })\r\n      \r\n      const loginData = uni.getStorageSync('loginData') || {}\r\n      loginData.uname = userInfo.nickname\r\n      loginData.himg = userInfo.avatar\r\n      uni.setStorageSync('loginData', loginData)\r\n      \r\n      // 通知其他页面更新\r\n      uni.$emit('userProfileUpdated', {\r\n        nickname: userInfo.nickname,\r\n        avatar: userInfo.avatar\r\n      })\r\n      \r\n      // 延迟返回上一页\r\n      setTimeout(() => {\r\n        uni.navigateBack()\r\n      }, 1500)\r\n      \r\n    } catch (error) {\r\n      uni.hideLoading()\r\n      console.error('保存失败:', error)\r\n      uni.showToast({\r\n        title: '保存失败，请重试',\r\n        icon: 'none'\r\n      })\r\n    } finally {\r\n      isSaving.value = false\r\n    }\r\n  }\r\n  \r\n  // 加载用户信息（从登录时保存的数据中获取）\r\n  const loadUserInfo = async () => {\r\n    const token = getToken()\r\n    const account = getAccount()\r\n    \r\n    if (!token) {\r\n      uni.showToast({\r\n        title: '请先登录',\r\n        icon: 'none'\r\n      })\r\n      setTimeout(() => {\r\n        uni.navigateBack()\r\n      }, 1500)\r\n      return\r\n    }\r\n    \r\n    try {\r\n      // 从本地存储获取登录时保存的用户信息\r\n      const savedUserInfo = uni.getStorageSync('userInfo') || {}\r\n      const loginData = uni.getStorageSync('loginData') || {}\r\n      \r\n      // 加载用户信息\r\n      if (loginData.uname || loginData.account) {\r\n        userInfo.nickname = loginData.uname || '用户'\r\n        userInfo.phone = loginData.account || account || ''\r\n        userInfo.avatar = loginData.himg || 'http://video.caimizm.com/himg/user.png'\r\n      } else {\r\n        userInfo.nickname = savedUserInfo.nickname || '用户'\r\n        userInfo.phone = account || '13637666646'\r\n        userInfo.avatar = savedUserInfo.avatar || 'http://video.caimizm.com/himg/user.png'\r\n      }\r\n      \r\n      console.log('加载的用户信息:', {\r\n        nickname: userInfo.nickname,\r\n        phone: userInfo.phone,\r\n        avatar: userInfo.avatar,\r\n        loginData: loginData\r\n      })\r\n      \r\n    } catch (error) {\r\n      console.error('加载用户信息失败:', error)\r\n      // 使用默认值\r\n      userInfo.nickname = account || '用户'\r\n      userInfo.phone = account || '13637666646'\r\n      userInfo.avatar = 'http://video.caimizm.com/himg/user.png'\r\n    }\r\n  }\r\n  \r\n  onMounted(() => {\r\n    loadUserInfo()\r\n  })\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .edit-profile-container {\r\n    min-height: 100vh;\r\n    background-color: #f5f5f5;\r\n  }\r\n  \r\n  /* 导航栏 */\r\n  .navbar {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 88rpx;\r\n    background-color: #28B389;\r\n    z-index: 999;\r\n  }\r\n  \r\n  .nav-content {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    height: 100%;\r\n    padding: 0 30rpx;\r\n  }\r\n  \r\n  .nav-left, .nav-right {\r\n    width: 80rpx;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .back-arrow {\r\n    font-size: 40rpx;\r\n    color: #fff;\r\n    font-weight: bold;\r\n    line-height: 1;\r\n  }\r\n  \r\n  .nav-title {\r\n    font-size: 36rpx;\r\n    font-weight: 600;\r\n    color: #fff;\r\n  }\r\n  \r\n  .save-text {\r\n    font-size: 28rpx;\r\n    color: #fff;\r\n    font-weight: 500;\r\n  }\r\n  \r\n  /* 主要内容区域 */\r\n  .main-content {\r\n    padding-top: 88rpx;\r\n    padding: 88rpx 30rpx 30rpx;\r\n  }\r\n  \r\n  /* 头像区域 */\r\n  .avatar-section {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-bottom: 60rpx;\r\n  }\r\n  \r\n  .avatar-container {\r\n    position: relative;\r\n    width: 200rpx;\r\n    height: 200rpx;\r\n    border-radius: 50%;\r\n    overflow: hidden;\r\n    border: 4rpx solid #fff;\r\n    box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .avatar-image {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n  }\r\n  \r\n  .avatar-overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    opacity: 0;\r\n    transition: opacity 0.3s ease;\r\n  }\r\n  \r\n  .avatar-container:active .avatar-overlay {\r\n    opacity: 1;\r\n  }\r\n  \r\n  .avatar-text {\r\n    font-size: 20rpx;\r\n    color: #fff;\r\n    margin-top: 8rpx;\r\n  }\r\n  \r\n  \r\n  /* 表单区域 */\r\n  .form-section {\r\n    background-color: #fff;\r\n    border-radius: 20rpx;\r\n    padding: 40rpx 30rpx;\r\n    margin-bottom: 40rpx;\r\n    box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .form-item {\r\n    margin-bottom: 40rpx;\r\n  }\r\n  \r\n  .form-item:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n  \r\n  .form-label {\r\n    display: block;\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    font-weight: 500;\r\n    margin-bottom: 20rpx;\r\n  }\r\n  \r\n  .form-input {\r\n    width: 100%;\r\n    height: 80rpx;\r\n    background-color: #f8f9fa;\r\n    border: 2rpx solid #e9ecef;\r\n    border-radius: 12rpx;\r\n    padding: 0 20rpx;\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    box-sizing: border-box;\r\n  }\r\n  \r\n  .form-input:focus {\r\n    border-color: #28B389;\r\n    background-color: #fff;\r\n  }\r\n  \r\n  .form-input.disabled {\r\n    background-color: #f5f5f5;\r\n    color: #999;\r\n    cursor: not-allowed;\r\n  }\r\n  \r\n  .form-input.disabled:focus {\r\n    border-color: #e9ecef;\r\n    background-color: #f5f5f5;\r\n  }\r\n  \r\n  .form-textarea {\r\n    width: 100%;\r\n    min-height: 120rpx;\r\n    background-color: #f8f9fa;\r\n    border: 2rpx solid #e9ecef;\r\n    border-radius: 12rpx;\r\n    padding: 20rpx;\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    box-sizing: border-box;\r\n    resize: none;\r\n  }\r\n  \r\n  .form-textarea:focus {\r\n    border-color: #28B389;\r\n    background-color: #fff;\r\n  }\r\n  \r\n  /* 保存按钮区域 */\r\n  .save-section {\r\n    padding: 0 30rpx;\r\n  }\r\n  \r\n  .save-btn {\r\n    width: 100%;\r\n    height: 88rpx;\r\n    background: linear-gradient(135deg, #28B389 0%, #20a085 100%);\r\n    color: #fff;\r\n    border-radius: 25rpx;\r\n    font-size: 32rpx;\r\n    font-weight: 600;\r\n    border: none;\r\n    box-shadow: 0 4rpx 15rpx rgba(40, 179, 137, 0.3);\r\n    transition: all 0.3s ease;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 10rpx;\r\n  }\r\n  \r\n  .save-btn:disabled {\r\n    background: #ccc;\r\n    box-shadow: none;\r\n    cursor: not-allowed;\r\n  }\r\n  \r\n  .save-btn:active:not(:disabled) {\r\n    transform: translateY(2rpx);\r\n    box-shadow: 0 2rpx 8rpx rgba(40, 179, 137, 0.4);\r\n  }\r\n  \r\n  .save-btn-text {\r\n    font-size: 32rpx;\r\n  }\r\n  </style>\r\n  ","import MiniProgramPage from 'C:/梓梅2.0/梓梅xcx/my-painting-rules-project/pages/user/edit-profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","getCOSSecretKey","uni","apiUpdateUserProfile","getToken","getAccount","onMounted"],"mappings":"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"}