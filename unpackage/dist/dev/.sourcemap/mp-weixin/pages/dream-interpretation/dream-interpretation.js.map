{"version":3,"file":"dream-interpretation.js","sources":["pages/dream-interpretation/dream-interpretation.vue","D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZHJlYW0taW50ZXJwcmV0YXRpb24vZHJlYW0taW50ZXJwcmV0YXRpb24udnVl"],"sourcesContent":["<template>\r\n  <view class=\"dream-container\">\r\n    <!-- 导航栏 -->\r\n    <view class=\"navbar\">\r\n      <view class=\"nav-content\">\r\n        <view class=\"nav-left\" @click=\"goBack\">\r\n          <text class=\"back-arrow\">‹</text>\r\n        </view>\r\n        <text class=\"nav-title\">解梦</text>\r\n        <view class=\"nav-right\"></view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- 主要内容区域 -->\r\n    <view class=\"main-content\">\r\n      <!-- 搜索区域 -->\r\n      <view class=\"search-section\">\r\n        <view class=\"search-input-wrapper\" @click=\"focusSearch\">\r\n          <uni-icons type=\"search\" size=\"16\" color=\"#999\"></uni-icons>\r\n          <input \r\n            type=\"text\" \r\n            placeholder=\"梦境关键词或者号码\" \r\n            class=\"search-input\"\r\n            v-model=\"searchKeyword\"\r\n            @confirm=\"searchDream\"\r\n            @focus=\"focusSearch\"\r\n          />\r\n        </view>\r\n        <button class=\"search-btn\" @click=\"searchDream\">搜索</button>\r\n      </view>\r\n      \r\n      <!-- 搜索框获得焦点时显示的内容 -->\r\n      <view class=\"search-overlay\" v-if=\"showSearchOverlay\">\r\n        <!-- 历史搜索 -->\r\n        <view class=\"history-search-section\" v-if=\"dreamHistory.length > 0\">\r\n          <view class=\"section-header\">\r\n            <text class=\"section-title\">历史搜索</text>\r\n            <view class=\"clear-btn\" @click=\"clearHistory\">\r\n              <uni-icons type=\"trash\" size=\"16\" color=\"#999\"></uni-icons>\r\n            </view>\r\n          </view>\r\n          <view class=\"history-tags\">\r\n            <view \r\n              class=\"history-tag\" \r\n              v-for=\"(item, index) in dreamHistory\" \r\n              :key=\"index\"\r\n              @click=\"selectHistoryKeyword(item.keyword)\"\r\n            >\r\n              {{ item.keyword }}\r\n            </view>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 热门梦境 -->\r\n        <view class=\"popular-dreams-section\">\r\n          <text class=\"section-title\">热门梦境</text>\r\n          <view class=\"popular-tags\">\r\n            <view \r\n              class=\"popular-tag\" \r\n              v-for=\"(dream, index) in popularDreams\" \r\n              :key=\"index\"\r\n              @click=\"selectPopularKeyword(dream)\"\r\n            >\r\n              {{ dream }}\r\n            </view>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- 温馨提示 -->\r\n        <view class=\"tip-section\">\r\n          <text class=\"tip-title\">【温馨提示】</text>\r\n          <text class=\"tip-content\">解梦仅提供参考,切勿深信!</text>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 热门分类 -->\r\n      <view class=\"category-section\" v-if=\"!showSearchOverlay\">\r\n        <text class=\"section-title\"></text>\r\n        <view class=\"category-grid\">\r\n          <view \r\n            class=\"category-card\" \r\n            v-for=\"(category, index) in popularCategories\" \r\n            :key=\"index\"\r\n            @click=\"selectPopularCategory(category)\"\r\n          >\r\n            <view class=\"card-icon\">\r\n              <text class=\"icon-text\">{{ category.icon }}</text>\r\n            </view>\r\n            <text class=\"card-title\">{{ category.name }}</text>\r\n            <view class=\"card-numbers\">\r\n              <text class=\"number-text\">{{ category.numbers[0] }}</text>\r\n              <text class=\"number-text\">{{ category.numbers[1] }}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 梦境解析结果 -->\r\n      <view class=\"result-section\" v-if=\"dreamResults.length > 0\">\r\n        <text class=\"result-count\" v-if=\"hasSearched && searchKeyword\">为您找到 {{ dreamResults.length }} 个结果</text>\r\n        <text class=\"result-count\" v-else>推荐梦境解析</text>\r\n        <view class=\"result-list\">\r\n          <view \r\n            class=\"result-card\" \r\n            v-for=\"(item, index) in dreamResults\" \r\n            :key=\"index\"\r\n          >\r\n            <!-- 左侧图片区域 -->\r\n            <view class=\"card-image-section\">\r\n              <view class=\"card-image\">\r\n                <image \r\n                  v-if=\"!item.imageError && item.img\"\r\n                  :src=\"item.currentImageUrl || getImageUrl(item.id, item.img)\" \r\n                  mode=\"aspectFill\" \r\n                  class=\"dream-image\"\r\n                  @error=\"handleImageError(item, index)\"\r\n                  @load=\"handleImageLoad(item, index)\"\r\n                ></image>\r\n                <view class=\"default-icon\" v-else>\r\n                  <text class=\"icon-text\"></text>\r\n                </view>\r\n              </view>\r\n            </view>\r\n            \r\n            <!-- 右侧内容区域 -->\r\n            <view class=\"card-content-section\">\r\n              <!-- 梦境标题 -->\r\n              <text class=\"card-title\">{{ item.content }}</text>\r\n              \r\n              <!-- 号码区域 -->\r\n              <view class=\"card-numbers-section\" v-if=\"item.numberOne || item.numberTwo\">\r\n                <text class=\"number-text\" v-if=\"item.numberOne\">{{ item.numberOne }}</text>\r\n                <text class=\"number-text\" v-if=\"item.numberTwo\">{{ item.numberTwo }}</text>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- 加载更多按钮 -->\r\n      <view class=\"load-more-section\" v-if=\"dreamResults.length > 0 && hasMoreData && !isLoading\">\r\n        <button class=\"load-more-btn\" @click=\"loadMoreData\" :disabled=\"isLoadingMore\">\r\n          <uni-icons v-if=\"isLoadingMore\" type=\"spinner-cycle\" size=\"16\" color=\"#28B389\"></uni-icons>\r\n          <text v-else class=\"load-more-text\">加载更多</text>\r\n          <text class=\"page-info\">({{ currentPage }}/{{ totalPages }})</text>\r\n        </button>\r\n      </view>\r\n      \r\n      <!-- 没有更多数据提示 -->\r\n      <view class=\"no-more-section\" v-if=\"dreamResults.length > 0 && !hasMoreData && !isLoading\">\r\n        <text class=\"no-more-text\">已显示全部 {{ totalRecords }} 条结果</text>\r\n      </view>\r\n      \r\n      <!-- 加载状态 -->\r\n      <view class=\"loading-section\" v-if=\"isLoading\">\r\n        <uni-icons type=\"spinner-cycle\" size=\"24\" color=\"#28B389\"></uni-icons>\r\n        <text class=\"loading-text\">正在解析梦境...</text>\r\n      </view>\r\n      \r\n      <!-- 空状态 -->\r\n      <view class=\"empty-section\" v-if=\"!isLoading && dreamResults.length === 0 && hasSearched && searchKeyword\">\r\n        <uni-icons type=\"info\" size=\"48\" color=\"#ccc\"></uni-icons>\r\n        <text class=\"empty-text\">暂无相关梦境解析</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { getToken } from '@/utils/request.js'\r\nimport { apiDreamQuery } from '@/api/apis.js'\r\n\r\nconst dreamResults = ref([])\r\nconst isLoading = ref(false)\r\nconst hasSearched = ref(false)\r\nconst searchKeyword = ref('')\r\nconst dreamHistory = ref([])\r\nconst showSearchOverlay = ref(false)\r\n\r\n// 分页相关数据\r\nconst currentPage = ref(1)\r\nconst pageSize = ref(10)\r\nconst totalPages = ref(0)\r\nconst totalRecords = ref(0)\r\nconst isLoadingMore = ref(false)\r\nconst hasMoreData = ref(true)\r\n\r\nconst popularDreams = ref([\r\n  '苍蝇幼虫', '走私被捕', '剪刀割手', '跳楼', '伯父死了', '失踪少女'\r\n])\r\n\r\nconst popularCategories = ref([])\r\n\r\nconst getImageUrl = (id, imgName) => {\r\n\t\r\n  if (!id || !imgName) return ''\r\n  const baseUrl = 'http://video.caimizm.com'\r\n  if (imgName.startsWith('http')) return imgName\r\n  if (imgName.startsWith('/')) return `${baseUrl}${imgName}`\r\n  // 尝试多种可能的图片路径\r\n  const possiblePaths = [\r\n    `${baseUrl}/web/image/${id}/${imgName}`,\r\n    `${baseUrl}/web/dream/image/${id}`,\r\n    `${baseUrl}/api/image/${id}`,\r\n    `${baseUrl}/images/${id}/${imgName}`,\r\n    `${baseUrl}/static/images/${imgName}`\r\n  ]\r\n  const url = possiblePaths[0] // 先尝试第一个路径\r\n  console.log('构建图片URL:', { id, imgName, url, allPaths: possiblePaths })\r\n  return url\r\n}\r\n\r\nconst handleImageError = (item, index) => {\r\n  console.log('图片加载失败:', item.img)\r\n  item.imageError = true\r\n  item.currentImageUrl = ''\r\n  \r\n  // 如果当前尝试的是第一个路径，可以尝试其他路径\r\n  if (!item.triedAlternativePaths) {\r\n    item.triedAlternativePaths = true\r\n    const baseUrl = 'http://video.caimizm.com'\r\n    const alternativePaths = [\r\n      `${baseUrl}/web/dream/image/${item.id}`,\r\n      `${baseUrl}/api/image/${item.id}`,\r\n      `${baseUrl}/images/${item.id}/${item.img}`,\r\n      `${baseUrl}/static/images/${item.img}`\r\n    ]\r\n    \r\n    // 尝试下一个路径\r\n    const nextPathIndex = item.currentPathIndex || 0\r\n    if (nextPathIndex < alternativePaths.length) {\r\n      item.currentPathIndex = nextPathIndex + 1\r\n      item.currentImageUrl = alternativePaths[nextPathIndex]\r\n      console.log('尝试备用图片路径:', alternativePaths[nextPathIndex])\r\n    }\r\n  }\r\n}\r\n\r\nconst handleImageLoad = (item, index) => {\r\n  item.imageLoaded = true\r\n}\r\n\r\nconst getAuthToken = () => {\r\n  return getToken()\r\n}\r\n\r\nconst checkLoginStatus = () => {\r\n  return !!getAuthToken()\r\n}\r\n\r\nconst analyzeAPIError = (response) => {\r\n  if (!response) return '网络请求失败'\r\n  if (response.statusCode !== 200) return `HTTP错误: ${response.statusCode}`\r\n  if (!response.data) return '响应数据为空'\r\n  if (response.data.code === 500) return `服务器内部错误: ${response.data.msg || '操作失败'}`\r\n  if (response.data.code !== 200) return `业务错误: ${response.data.msg || '未知错误'}`\r\n  return '未知错误'\r\n}\r\n\r\nconst checkNetworkStatus = () => {\r\n  return new Promise((resolve) => {\r\n    uni.getNetworkType({\r\n      success: (res) => resolve(res.networkType !== 'none'),\r\n      fail: () => resolve(true)\r\n    })\r\n  })\r\n}\r\n\r\n\r\nconst queryDreamAPI = async (content, page = '1', limit = '10', isLoadMore = false) => {\r\n  try {\r\n    if (isLoadMore) {\r\n      isLoadingMore.value = true\r\n    } else {\r\n      isLoading.value = true\r\n    }\r\n    \r\n    if (!checkLoginStatus()) {\r\n      uni.showToast({ title: '请先登录', icon: 'none' })\r\n      return\r\n    }\r\n    \r\n    const hasNetwork = await checkNetworkStatus()\r\n    if (!hasNetwork) {\r\n      uni.showToast({ title: '网络连接不可用', icon: 'none' })\r\n      return\r\n    }\r\n    \r\n    const response = await apiDreamQuery({ content, page, limit })\r\n    \r\n    const newRecords = response.data.records || []\r\n    \r\n    if (isLoadMore) {\r\n      // 加载更多时，追加到现有数据\r\n      dreamResults.value = [...dreamResults.value, ...newRecords]\r\n    } else {\r\n      // 新搜索时，替换数据\r\n      dreamResults.value = newRecords\r\n      currentPage.value = 1\r\n    }\r\n    \r\n    // 更新分页信息\r\n    totalRecords.value = response.data.total || 0\r\n    totalPages.value = Math.ceil(totalRecords.value / pageSize.value)\r\n    currentPage.value = parseInt(page)\r\n    hasMoreData.value = currentPage.value < totalPages.value\r\n    \r\n    hasSearched.value = true\r\n    \r\n    // 调试信息\r\n    console.log('API返回的数据:', response.data)\r\n    console.log('梦境解析结果:', dreamResults.value)\r\n    console.log('分页信息:', { currentPage: currentPage.value, totalPages: totalPages.value, totalRecords: totalRecords.value })\r\n    \r\n    if (!isLoadMore) {\r\n      uni.showToast({ title: '查询成功', icon: 'success' })\r\n    }\r\n    \r\n  } catch (error) {\r\n    // request.js已经处理了token过期，这里只需要处理其他错误\r\n    uni.showToast({ \r\n      title: error.errMsg || error.msg || '查询失败，请重试', \r\n      icon: 'none' \r\n    })\r\n  } finally {\r\n    if (isLoadMore) {\r\n      isLoadingMore.value = false\r\n    } else {\r\n      isLoading.value = false\r\n    }\r\n  }\r\n}\r\n\r\nconst formatTime = (timeStr) => {\r\n  if (!timeStr) return ''\r\n  const date = new Date(timeStr)\r\n  const month = date.getMonth() + 1\r\n  const day = date.getDate()\r\n  const hours = date.getHours().toString().padStart(2, '0')\r\n  const minutes = date.getMinutes().toString().padStart(2, '0')\r\n  return `${month}-${day} ${hours}:${minutes}`\r\n}\r\n\r\nconst searchDream = async () => {\r\n  if (!searchKeyword.value.trim()) {\r\n    uni.showToast({ title: '请输入梦境关键词', icon: 'none' })\r\n    return\r\n  }\r\n  \r\n  if (!checkLoginStatus()) {\r\n    uni.showToast({ title: '请先登录', icon: 'none' })\r\n    return\r\n  }\r\n  \r\n  showSearchOverlay.value = false\r\n  await queryDreamAPI(searchKeyword.value, '1', pageSize.value.toString(), false)\r\n  addToHistory(searchKeyword.value)\r\n}\r\n\r\n// 加载更多数据\r\nconst loadMoreData = async () => {\r\n  if (!hasMoreData.value || isLoadingMore.value) {\r\n    return\r\n  }\r\n  \r\n  const nextPage = currentPage.value + 1\r\n  await queryDreamAPI(searchKeyword.value, nextPage.toString(), pageSize.value.toString(), true)\r\n}\r\n\r\nconst selectPopularCategory = (category) => {\r\n  searchKeyword.value = category.keyword\r\n  searchDream()\r\n}\r\n\r\nconst focusSearch = () => {\r\n  showSearchOverlay.value = true\r\n}\r\n\r\nconst addToHistory = (keyword) => {\r\n  const now = new Date()\r\n  const timeStr = `${now.getMonth() + 1}-${now.getDate()} ${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`\r\n  \r\n  const historyItem = { keyword, time: timeStr }\r\n  \r\n  const existingIndex = dreamHistory.value.findIndex(item => item.keyword === keyword)\r\n  if (existingIndex > -1) {\r\n    dreamHistory.value.splice(existingIndex, 1)\r\n  }\r\n  \r\n  dreamHistory.value.unshift(historyItem)\r\n  \r\n  if (dreamHistory.value.length > 10) {\r\n    dreamHistory.value = dreamHistory.value.slice(0, 10)\r\n  }\r\n  \r\n  uni.setStorageSync('dream_history', dreamHistory.value)\r\n}\r\n\r\nconst selectHistoryKeyword = (keyword) => {\r\n  searchKeyword.value = keyword\r\n  showSearchOverlay.value = false\r\n  searchDream()\r\n}\r\n\r\nconst clearHistory = () => {\r\n  uni.showModal({\r\n    title: '提示',\r\n    content: '确定要清除所有历史记录吗？',\r\n    success: (res) => {\r\n      if (res.confirm) {\r\n        dreamHistory.value = []\r\n        uni.removeStorageSync('dream_history')\r\n        uni.showToast({ title: '已清除历史记录', icon: 'success' })\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst selectPopularKeyword = (keyword) => {\r\n  searchKeyword.value = keyword\r\n  showSearchOverlay.value = false\r\n  searchDream()\r\n}\r\n\r\nconst goBack = () => {\r\n  uni.navigateBack()\r\n}\r\n\r\nonMounted(async () => {\r\n  const savedHistory = uni.getStorageSync('dream_history')\r\n  if (savedHistory) {\r\n    dreamHistory.value = savedHistory\r\n  }\r\n  \r\n  // 页面加载时默认显示第一页数据\r\n  await loadDefaultData()\r\n})\r\n\r\nconst loadDefaultData = async () => {\r\n  try {\r\n    isLoading.value = true\r\n    \r\n    if (!checkLoginStatus()) {\r\n      uni.showToast({ title: '请先登录', icon: 'none' })\r\n      return\r\n    }\r\n    \r\n    const hasNetwork = await checkNetworkStatus()\r\n    if (!hasNetwork) {\r\n      uni.showToast({ title: '网络连接不可用', icon: 'none' })\r\n      return\r\n    }\r\n    \r\n    const response = await apiDreamQuery({ \r\n      content: '', // 空内容获取默认数据\r\n      page: '1', \r\n      limit: '4' // 只获取4条数据\r\n    })\r\n    \r\n    dreamResults.value = response.data.records || []\r\n    hasSearched.value = true\r\n    \r\n    console.log('默认加载的数据:', response.data)\r\n    console.log('梦境解析结果:', dreamResults.value)\r\n    \r\n  } catch (error) {\r\n    console.log('默认数据加载失败:', error)\r\n    // 不显示错误提示，静默处理\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.dream-container {\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n/* 导航栏 */\r\n.navbar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 88rpx;\r\n  background-color: #28B389;\r\n  z-index: 999;\r\n}\r\n\r\n.nav-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 100%;\r\n  padding: 0 30rpx;\r\n}\r\n\r\n.nav-left, .nav-right {\r\n  width: 60rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.back-arrow {\r\n  font-size: 40rpx;\r\n  color: #fff;\r\n  font-weight: bold;\r\n  line-height: 1;\r\n}\r\n\r\n.nav-title {\r\n  font-size: 36rpx;\r\n  font-weight: 600;\r\n  color: #fff;\r\n}\r\n\r\n/* 主要内容区域 */\r\n.main-content {\r\n  padding-top: 88rpx;\r\n  padding: 88rpx 30rpx 30rpx;\r\n}\r\n\r\n/* 搜索区域 */\r\n.search-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20rpx;\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.search-input-wrapper {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: #fff;\r\n  border-radius: 25rpx;\r\n  padding: 20rpx 30rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  margin-left: 20rpx;\r\n  font-size: 28rpx;\r\n  background: transparent;\r\n  border: none;\r\n}\r\n\r\n.search-btn {\r\n  background: linear-gradient(135deg, #28B389 0%, #20a085 100%);\r\n  color: #fff;\r\n  padding: 20rpx 30rpx;\r\n  border-radius: 25rpx;\r\n  font-size: 15rpx;\r\n  font-weight: 400;\r\n  border: none;\r\n  box-shadow: 0 4rpx 15rpx rgba(40, 179, 137, 0.3);\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.search-btn:active {\r\n  transform: translateY(2rpx);\r\n  box-shadow: 0 2rpx 8rpx rgba(40, 179, 137, 0.4);\r\n}\r\n\r\n.search-btn::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: -100%;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);\r\n  transition: left 0.5s;\r\n}\r\n\r\n.search-btn:hover::before {\r\n  left: 100%;\r\n}\r\n\r\n/* 结果区域 - 列表布局 */\r\n.result-section {\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.result-count {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  margin-bottom: 20rpx;\r\n  padding: 0 10rpx;\r\n}\r\n\r\n.result-list {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 16rpx;\r\n}\r\n\r\n.result-card {\r\n  background-color: #fff;\r\n  border-radius: 12rpx;\r\n  padding: 20rpx;\r\n  box-shadow: 0 1rpx 8rpx rgba(0, 0, 0, 0.06);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  transition: all 0.2s ease;\r\n  border: 1rpx solid #f0f0f0;\r\n  text-align: center;\r\n}\r\n\r\n.result-card:active {\r\n  transform: scale(0.99);\r\n  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* 左侧图片区域 */\r\n.card-image-section {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.card-image {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  border-radius: 8rpx;\r\n  overflow: hidden;\r\n  position: relative;\r\n  background-color: #f8f8f8;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border: 1rpx solid #e8e8e8;\r\n}\r\n\r\n.dream-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.default-icon {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #f0f8ff;\r\n}\r\n\r\n.icon-text {\r\n  font-size: 32rpx;\r\n  color: #28B389;\r\n}\r\n\r\n/* 内容区域 */\r\n.card-content-section {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8rpx;\r\n  align-items: center;\r\n}\r\n\r\n.card-title {\r\n  font-size: 26rpx;\r\n  color: #333;\r\n  line-height: 1.3;\r\n  font-weight: 500;\r\n  text-align: center;\r\n  word-break: break-all;\r\n  max-height: 80rpx;\r\n  overflow: hidden;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n}\r\n\r\n/* 号码区域 */\r\n.card-numbers-section {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 8rpx;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.number-text {\r\n  font-size: 22rpx;\r\n  color: #28B389;\r\n  font-weight: 600;\r\n  background-color: #f0f8f5;\r\n  padding: 4rpx 8rpx;\r\n  border-radius: 6rpx;\r\n  border: 1rpx solid #28B389;\r\n  min-width: 40rpx;\r\n  text-align: center;\r\n  line-height: 1;\r\n}\r\n\r\n/* 加载状态 */\r\n.loading-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 60rpx 0;\r\n  background-color: #fff;\r\n  border-radius: 15rpx;\r\n  margin-bottom: 40rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.loading-text {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  margin-top: 20rpx;\r\n}\r\n\r\n/* 加载更多区域 */\r\n.load-more-section {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 40rpx 0;\r\n}\r\n\r\n.load-more-btn {\r\n  background: linear-gradient(135deg, #28B389 0%, #20a085 100%);\r\n  color: #fff;\r\n  padding: 20rpx 40rpx;\r\n  border-radius: 25rpx;\r\n  font-size: 28rpx;\r\n  font-weight: 500;\r\n  border: none;\r\n  box-shadow: 0 4rpx 15rpx rgba(40, 179, 137, 0.3);\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10rpx;\r\n  min-width: 200rpx;\r\n  justify-content: center;\r\n}\r\n\r\n.load-more-btn:disabled {\r\n  background: #ccc;\r\n  box-shadow: none;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.load-more-btn:active:not(:disabled) {\r\n  transform: translateY(2rpx);\r\n  box-shadow: 0 2rpx 8rpx rgba(40, 179, 137, 0.4);\r\n}\r\n\r\n.load-more-text {\r\n  font-size: 28rpx;\r\n}\r\n\r\n.page-info {\r\n  font-size: 22rpx;\r\n  opacity: 0.8;\r\n  margin-left: 10rpx;\r\n}\r\n\r\n/* 没有更多数据提示 */\r\n.no-more-section {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 40rpx 0;\r\n  padding: 20rpx;\r\n}\r\n\r\n.no-more-text {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  background-color: #f8f8f8;\r\n  padding: 15rpx 30rpx;\r\n  border-radius: 20rpx;\r\n  border: 1rpx solid #e8e8e8;\r\n}\r\n\r\n/* 空状态 */\r\n.empty-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 80rpx 0;\r\n  background-color: #fff;\r\n  border-radius: 15rpx;\r\n  margin-bottom: 40rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.empty-text {\r\n  font-size: 28rpx;\r\n  color: #999;\r\n  margin-top: 20rpx;\r\n}\r\n\r\n/* 分类区域 */\r\n.category-section {\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.section-title {\r\n  display: block;\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.category-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 20rpx;\r\n}\r\n\r\n.category-card {\r\n  background-color: #fff;\r\n  padding: 30rpx;\r\n  border-radius: 15rpx;\r\n  text-align: center;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 15rpx;\r\n}\r\n\r\n.category-card:active {\r\n  transform: scale(0.95);\r\n  background-color: #f0f8ff;\r\n}\r\n\r\n.card-icon {\r\n  width: 60rpx;\r\n  height: 60rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  background-color: #f8f8f8;\r\n}\r\n\r\n.icon-text {\r\n  font-size: 32rpx;\r\n}\r\n\r\n.card-title {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\n\r\n/* 搜索覆盖层样式 */\r\n.search-overlay {\r\n  background-color: #fff;\r\n  border-radius: 15rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 30rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* 历史搜索区域 */\r\n.history-search-section {\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.section-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.clear-btn {\r\n  padding: 10rpx;\r\n}\r\n\r\n.history-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 15rpx;\r\n}\r\n\r\n.history-tag {\r\n  background-color: #f5f5f5;\r\n  padding: 15rpx 25rpx;\r\n  border-radius: 20rpx;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n\r\n.history-tag:active {\r\n  background-color: #e8e8e8;\r\n}\r\n\r\n/* 热门梦境区域 */\r\n.popular-dreams-section {\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.popular-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 15rpx;\r\n}\r\n\r\n.popular-tag {\r\n  background-color: #f5f5f5;\r\n  padding: 15rpx 25rpx;\r\n  border-radius: 20rpx;\r\n  font-size: 24rpx;\r\n  color: #666;\r\n}\r\n\r\n.popular-tag:active {\r\n  background-color: #e8e8e8;\r\n}\r\n\r\n/* 温馨提示区域 */\r\n.tip-section {\r\n  background-color: #f8f8f8;\r\n  padding: 20rpx;\r\n  border-radius: 10rpx;\r\n  text-align: center;\r\n}\r\n\r\n.tip-title {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-right: 10rpx;\r\n}\r\n\r\n.tip-content {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/Administrator/Desktop/caimixcx/pages/dream-interpretation/dream-interpretation.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","getToken","apiDreamQuery","onMounted"],"mappings":"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"}