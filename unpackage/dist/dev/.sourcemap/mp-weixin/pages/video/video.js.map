{"version":3,"file":"video.js","sources":["pages/video/video.vue","D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdmlkZW8vdmlkZW8udnVl"],"sourcesContent":["<template>\r\n\t<view class=\"video-page-container\">\r\n\t\t<!-- 为了适配小程序顶部高度的盒子-->\r\n\t\t<StatusBarPlaceholder></StatusBarPlaceholder>\r\n\t\t<!-- 图片 -->\r\n\t\t<image class='photo' src=\"@/static/video/swiper.png\" mode=\"\"></image>\r\n\r\n\t\t<!-- 切换标签栏（参考 forum.vue 风格） -->\r\n\t\t<view class=\"switch-tabs\">\r\n\t\t\t<view \r\n\t\t\t\tclass=\"tab-item\" \r\n\t\t\t\t:class=\"{ active: currentTab === 'fc' }\"\r\n\t\t\t\t@click=\"switchTabByIndex(3)\"\r\n\t\t\t>\r\n\t\t\t\t<text class=\"tab-text\">福彩3D</text>\r\n\t\t\t</view>\r\n\t\t\t<view \r\n\t\t\t\tclass=\"tab-item\" \r\n\t\t\t\t:class=\"{ active: currentTab === 'plw' }\"\r\n\t\t\t\t@click=\"switchTabByIndex(0)\"\r\n\t\t\t>\r\n\t\t\t\t<text class=\"tab-text\">排列五</text>\r\n\t\t\t</view>\r\n\t\t\t<view \r\n\t\t\t\tclass=\"tab-item\" \r\n\t\t\t\t:class=\"{ active: currentTab === 'pls' }\"\r\n\t\t\t\t@click=\"switchTabByIndex(1)\"\r\n\t\t\t>\r\n\t\t\t\t<text class=\"tab-text\">排列三</text>\r\n\t\t\t</view>\r\n\t\t\t<view \r\n\t\t\t\tclass=\"tab-item\" \r\n\t\t\t\t:class=\"{ active: currentTab === 'qxc' }\"\r\n\t\t\t\t@click=\"switchTabByIndex(2)\"\r\n\t\t\t>\r\n\t\t\t\t<text class=\"tab-text\">七星彩</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 功能图标区 -->\r\n\t\t<view class=\"area\" v-if=\"currentTab !== 'review'\">\r\n\t\t\t<view class=\"title\" v-for=\"(video, index) in videoList\" :key=\"index\">\r\n\t\t\t\t<view class=\"video-title\">{{ video.title }}</view>\r\n\t\t\t\t<!-- 将 video 标签改为 img 标签 -->\r\n\t\t\t\t<img :src=\"video.imgurl\" class=\"video-image\" @click=\"playVideo(video)\"\r\n\t\t\t\t\t:class=\"{ 'paid-video': video.hasPaid, 'free-video': !video.flag }\" />\r\n\r\n\t\t\t\t<view class=\"video-info\">\r\n\t\t\t\t\t<text class=\"video-price\" v-if=\"video.flag && video.price > 0\">\r\n\t\t\t\t\t\t{{ video.hasPaid ? '已付费' : `付费视频 ${video.price}金币` }}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t\t<text class=\"video-free\" v-else>免费视频</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 精彩回顾内容 -->\r\n\t\t<view class=\"area\" v-else>\r\n\t\t\t<view class=\"title\" v-for=\"(video, index) in videoList\" :key=\"index\">\r\n\t\t\t\t<view class=\"video-title\">{{ video.title }}</view>\r\n\t\t\t\t<img :src=\"video.imgurl\" class=\"video-image\" @click=\"playVideo(video)\"\r\n\t\t\t\t\t:class=\"{ 'paid-video': video.hasPaid, 'free-video': !video.flag }\" />\r\n\r\n\t\t\t\t<view class=\"video-info\">\r\n\t\t\t\t\t<text class=\"video-price\" v-if=\"video.flag && video.price > 0\">\r\n\t\t\t\t\t\t{{ video.hasPaid ? '已付费' : `付费视频 ${video.price}金币` }}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t\t<text class=\"video-free\" v-else>免费视频</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 发布按钮 -->\r\n\t\t<view class=\"publish-btn\" @click=\"gotoOss()\">\r\n\t\t\t<uni-icons type=\"plus\" size=\"20\" color=\"#fff\"></uni-icons>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tonPullDownRefresh\r\n\t} from '@dcloudio/uni-app'\r\n\timport {\r\n\t\tref,\r\n\t\treactive,\r\n\t\tonMounted\r\n\t} from 'vue';\r\n\timport {\r\n\t\tapiGetVideo,\r\n\t\tapiGetLikelist,\r\n\t\tapiGetIsLike,\r\n\t\tapiCheckVideoPayment,\r\n\t\tapiGetIssueNo\r\n\t} from '../../api/apis';\r\n\timport {\r\n\t\tsetToken,\r\n\t\tgetToken,\r\n\t\tsetAccount,\r\n\t\tgetAccount\r\n\t} from '@/utils/request.js'; // 导入setToken，账号\r\n\t// 导入 Pinia store\r\n\timport {\r\n\t\tuseVideoStore\r\n\t} from '@/stores/video.js'\r\n\r\n\t// 初始化 store\r\n\tconst videoStore = useVideoStore()\r\n\t// 选项与当前索引（用于与 forum.vue 一致的标签切换）\r\n\tconst pickerOptions = ref(['排列五', '排列三', '七星彩', '福彩3D', '精彩回顾'])\r\n\tconst pickerIndex = ref(0)\r\n\r\n\t// 响应式数据\r\n\tconst currentTab = ref('plw');\r\n\tconst upcomingTab = ref('plw');\r\n\tconst currentNav = ref('home');\r\n\tconst plwNumbers = ref(['8', '6', '8', '5', '7']);\r\n\tconst qxcNumbers = ref(['2', '0', '4', '9', '3', '8', '8']);\r\n\tconst plwUpcomingIssue = ref('25214期');\r\n\tconst qxcUpcomingIssue = ref('3225期');\r\n\tconst upcomingAction = ref('follow');\r\n\r\n\t// 视频列表数据\r\n\tconst videoList = ref([]);\r\n\t//点赞列表数据\r\n\tconst likeList = ref([]);\r\n\r\n\t// 彩票类型与期号信息（与论坛页一致的请求逻辑）\r\n\tconst lotteryTypes = ref([\r\n\t\t{ id: 17, name: '排列五', code: 'plw', status: '待开奖', time: '今天 21:30' },\r\n\t\t{ id: 16, name: '排列三', code: 'pls', status: '待开奖', time: '今天 21:30' },\r\n\t\t{ id: 15, name: '七星彩', code: 'qxc', status: '待开奖', time: '今天 21:30' },\r\n\t\t{ id: 12, name: '福彩3D', code: 'fc', status: '待开奖', time: '今天 21:30' }\r\n\t])\r\n\r\n\tconst currentLotteryType = ref(lotteryTypes.value[0])\r\n\tconst isLoadingLottery = ref(false)\r\n\tconst currentIssueInfo = ref({ id: null, number: null, status: '待开奖', time: '今天 21:30' })\r\n\r\n\t// 下拉刷新钩子\r\n\tonPullDownRefresh(async () => {\r\n\t\tawait fetchVideoList();\r\n\t\tuni.stopPullDownRefresh()\r\n\t})\r\n\r\n\t// 获取视频列表的函数(页面开始加载的数据)\r\n\tconst fetchVideoList = async () => {\r\n\t\ttry {\r\n\t\t\t// 构建请求参数\r\n\t\t\tconst videoinfo = {\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tlimit: 10,\r\n\t\t\t};\r\n\t\t\t\r\n\t\t// 添加彩票类型参数\r\n\t\tif (currentTab.value !== 'review' && currentLotteryType.value && currentLotteryType.value.name) {\r\n\t\t\tvideoinfo.tname = currentLotteryType.value.name;\r\n\t\t}\r\n\t\t\t\r\n\t\tconst Videoinfo = await apiGetVideo(videoinfo);\r\n\t\t\t\r\n\t\tif (Videoinfo.code === 200 && Videoinfo.data && Videoinfo.data.records && Array.isArray(Videoinfo.data.records)) {\r\n\t\t\tvideoList.value = Videoinfo.data.records.map(item => ({\r\n\t\t\t\ttitle: item.title,\r\n\t\t\t\tsrc: \"http://video.caimizm.com/\" + item.url,\r\n\t\t\t\tid: item.id,\r\n\t\t\t\taccount: item.account,\r\n\t\t\t\tlikeCount: item.likeCount,\r\n\t\t\t\tcreateTime: item.createTime,\r\n\t\t\t\tflag: item.price > 0 ? item.flag : false,\r\n\t\t\t\tprice: item.price,\r\n\t\t\t\tupdateTime: item.updateTime,\r\n\t\t\t\timgurl: \"http://video.caimizm.com/\" + item.vimg\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: `已加载 ${videoList.value.length} 个视频`,\r\n\t\t\t\ticon: 'success',\r\n\t\t\t\tduration: 1500\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: Videoinfo.msg || '数据格式错误',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '获取视频失败，请检查网络',\r\n\t\t\ticon: 'none'\r\n\t\t});\r\n\t}\r\n\t}\r\n\r\n\tconst loadLotteryDataByType = async (lotteryType) => {\r\n\t\tif (isLoadingLottery.value || !lotteryType || !lotteryType.name) return\r\n\t\ttry {\r\n\t\t\tisLoadingLottery.value = true\r\n\t\t\tuni.showLoading({ title: '加载中...' })\r\n\t\t\tconst response = await apiGetIssueNo({ tname: lotteryType.name })\r\n\t\t\tuni.hideLoading()\r\n\t\t\tif (response.code === 200 && response.data !== null && response.data !== undefined) {\r\n\t\t\t\tlet issueNumber = null\r\n\t\t\t\tlet issueStatus = '待开奖'\r\n\t\t\t\tlet issueTime = '今天 21:30'\r\n\t\t\t\tif (typeof response.data === 'number' || typeof response.data === 'string') {\r\n\t\t\t\t\tissueNumber = response.data.toString()\r\n\t\t\t\t} else if (typeof response.data === 'object') {\r\n\t\t\t\t\tissueNumber = response.data.issueno || response.data.number || response.data.id\r\n\t\t\t\t\tissueStatus = response.data.status || '待开奖'\r\n\t\t\t\t\tissueTime = response.data.time || '今天 21:30'\r\n\t\t\t\t}\r\n\t\t\t\tlotteryType.status = issueStatus\r\n\t\t\t\tlotteryType.time = issueTime\r\n\t\t\t\tconst idx = lotteryTypes.value.findIndex(t => t.code === lotteryType.code)\r\n\t\t\t\tif (idx !== -1) {\r\n\t\t\t\t\tlotteryTypes.value[idx].status = issueStatus\r\n\t\t\t\t\tlotteryTypes.value[idx].time = issueTime\r\n\t\t\t\t}\r\n\t\t\t\tcurrentIssueInfo.value = { id: issueNumber, number: issueNumber, status: issueStatus, time: issueTime }\r\n\t\t\t\t\r\n\t\t// 保存到本地存储，供 biaodan.vue 使用\r\n\t\ttry {\r\n\t\t\tuni.setStorageSync('currentIssueInfo', currentIssueInfo.value)\r\n\t\t\tuni.setStorageSync('currentLotteryType', lotteryType)\r\n\t\t} catch (error) {\r\n\t\t\t// 静默处理错误\r\n\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({ title: response.msg || '数据加载失败', icon: 'none' })\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.showToast({ title: error?.msg || error?.message || '网络错误，请重试', icon: 'none', duration: 3000 })\r\n\t\t} finally {\r\n\t\t\tisLoadingLottery.value = false\r\n\t\t}\r\n\t}\r\n\r\n\t// 标签切换（与 forum.vue 的交互一致）\r\n\tconst switchTabByIndex = async (index) => {\r\n\t\t\r\n\t\t\r\n\t\tpickerIndex.value = index\r\n\t\tswitch (index) {\r\n\t\t\tcase 0:\r\n\t\t\t\tcurrentTab.value = 'plw'\r\n\t\t\t\tcurrentLotteryType.value = lotteryTypes.value.find(t => t.code === 'plw') || lotteryTypes.value[0]\r\n\t\t\t\tbreak\r\n\t\t\tcase 1:\r\n\t\t\t\tcurrentTab.value = 'pls'\r\n\t\t\t\tcurrentLotteryType.value = lotteryTypes.value.find(t => t.code === 'pls') || lotteryTypes.value[0]\r\n\t\t\t\tbreak\r\n\t\t\tcase 2:\r\n\t\t\t\tcurrentTab.value = 'qxc'\r\n\t\t\t\tcurrentLotteryType.value = lotteryTypes.value.find(t => t.code === 'qxc') || lotteryTypes.value[0]\r\n\t\t\t\tbreak\r\n\t\t\tcase 3:\r\n\t\t\t\tcurrentTab.value = 'fc'\r\n\t\t\t\tcurrentLotteryType.value = lotteryTypes.value.find(t => t.code === 'fc') || lotteryTypes.value[0]\r\n\t\t\t\tbreak\r\n\t\t\tcase 4:\r\n\t\t\t\tcurrentTab.value = 'review'\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t// 与论坛相同：切换时请求期号信息\r\n\t\tif (currentTab.value !== 'review') {\r\n\t\t\tawait loadLotteryDataByType(currentLotteryType.value)\r\n\t\t}\r\n\t\t\r\n\t\t// 切换标签时重新获取对应类型的视频列表\r\n\t\tawait fetchVideoList();\r\n\t}\r\n\r\n\t// 方法\r\n\tconst switchTab = (tab) => {\r\n\t\tcurrentTab.value = tab;\r\n\t};\r\n\r\n\tconst switchUpcomingTab = (tab) => {\r\n\t\tupcomingTab.value = tab;\r\n\t};\r\n\r\n\tconst switchUpcomingAction = (action) => {\r\n\t\tupcomingAction.value = action;\r\n\t};\r\n\r\n\tconst handleSwiperChange = (e) => {\r\n\t\tcurrentTab.value = e.detail.current === 0 ? 'plw' : 'qxc';\r\n\t};\r\n\r\n\tconst switchNav = (nav) => {\r\n\t\tcurrentNav.value = nav;\r\n\t};\r\n\r\n\r\n\t// 播放视频方法 - 新增付费检查\r\n\tconst playVideo = async (video) => {\r\n\t\t// 检查是否登录\r\n\t\tconst token = getToken();\r\n\t\tif (!token) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请先登录',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t});\r\n\t\t\t}, 1500);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 将当前视频保存到 Pinia store 和本地存储\r\n\t\tvideoStore.setCurrentVideo(video)\r\n\t\tuni.setStorageSync(`video_${video.id}`, video)\r\n\r\n\t\t// 如果视频是免费的（price为0或flag为false），直接播放\r\n\t\tif (!video.flag || video.price === 0) {\r\n\t\t\t// 免费视频直接播放\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/video/play?id=${video.id}`\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 检查视频是否收费\r\n\t\ttry {\r\n\t\t\t// 查询用户是否已付费\r\n\t\t\tconst paymentCheck = await apiCheckVideoPayment({\r\n\t\t\t\tvideoId: video.id,\r\n\t\t\t\taccount: getAccount()\r\n\t\t\t});\r\n\r\n\t\t\tif (paymentCheck.data) {\r\n\t\t\t\tif (paymentCheck.data) {\r\n\t\t\t\t\t// 用户已付费，直接播放\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: `/pages/video/play?id=${video.id}`\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 用户未付费，显示付费提示\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '付费视频',\r\n\t\t\t\t\t\tcontent: `观看此视频需要支付${video.price}金币`,\r\n\t\t\t\t\t\tconfirmText: '立即支付',\r\n\t\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t// 这里调用支付接口\r\n\t\t\t\t\t\t\t\tawait payForVideo(video);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/video/play?id=${video.id}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: error.message || '查询失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 支付视频方法\r\n\tconst payForVideo = async (video) => {\r\n\t\ttry {\r\n\t\t\t// 这里调用支付接口\r\n\t\t\t// const paymentResult = await apiPayForVideo({...});\r\n\r\n\t\t\t// 支付成功后更新视频状态\r\n\t\t\tvideo.hasPaid = true;\r\n\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '支付成功，开始播放',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t});\r\n\r\n\t\t\t// 播放视频\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/video/play?id=${video.id}`\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '支付失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 检查视频付费状态\r\n\tconst checkVideoPaymentStatus = async () => {\r\n\t\ttry {\r\n\t\t\tconst account = getAccount();\r\n\t\t\tif (!account) return;\r\n\r\n\t\t\t// 批量检查视频付费状态\r\n\t\t\tconst videoIds = videoList.value.map(video => video.id).filter(id => id);\r\n\t\t\tif (videoIds.length === 0) return;\r\n\r\n\t\t\tconst paymentStatus = await apiCheckVideoPayment({\r\n\t\t\t\tvideoIds: videoIds.join(','),\r\n\t\t\t\taccount: account\r\n\t\t\t});\r\n\r\n\t\t\tif (paymentStatus.success) {\r\n\t\t\t\t// 更新视频付费状态\r\n\t\t\t\tvideoList.value.forEach(video => {\r\n\t\t\t\t\tconst paidVideo = paymentStatus.data.find(item => item.videoId === video.id);\r\n\t\t\t\t\tif (paidVideo) {\r\n\t\t\t\t\t\tvideo.hasPaid = paidVideo.hasPaid;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\t// 静默处理错误\r\n\t\t}\r\n\t};\r\n\r\n\t//是否点赞\r\n\t// 点赞功能\r\n\tconst toggleLike = async (video) => {\r\n\ttry {\r\n\t\t// 保存原始状态，以便在请求失败时恢复\r\n\t\tconst originalIsLiked = video.isLiked;\r\n\t\tconst originalLikeCount = video.likeCount;\r\n\r\n\t\t// 立即更新UI，提供更好的用户体验\r\n\t\tvideo.isLiked = !video.isLiked;\r\n\t\tvideo.likeCount = video.isLiked ? video.likeCount + 1 : video.likeCount - 1;\r\n\r\n\t\t// 调用点赞API\r\n\t\tconst response = await apiGetIsLike(video);\r\n\r\n\t\tconst a = await apiGetLikelist(getAccount());\r\n\t} catch (error) {\r\n\r\n\t\t\t// 恢复原始状态\r\n\t\t\tvideo.isLiked = originalIsLiked;\r\n\t\t\tvideo.likeCount = originalLikeCount;\r\n\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '操作失败，请重试',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tconst gotoOss = () => {\r\n\t\t// 传递当前彩票类型名称（tname）到 oss.vue\r\n\t\tlet url = `/pages/video/oss`\r\n\t\tif (currentLotteryType.value && currentLotteryType.value.name) {\r\n\t\t\turl += `?tname=${encodeURIComponent(currentLotteryType.value.name)}`\r\n\t\t}\r\n\t\tuni.navigateTo({\r\n\t\t\turl: url\r\n\t\t});\r\n\t};\r\n\r\n\r\n\r\n\t// 生命周期钩子\r\n\tonMounted(async () => {\r\n\t\t// 初次进入按默认标签请求期号和视频列表\r\n\t\tawait loadLotteryDataByType(currentLotteryType.value);\r\n\t\tawait fetchVideoList();\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.video-page-container {\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\r\n\t.current-lottery-type {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tborder-bottom: 1rpx solid #e0e0e0;\r\n\t}\r\n\r\n\t.current-lottery-type text {\r\n\t\tdisplay: block;\r\n\t\tmargin: 5rpx 0;\r\n\t}\r\n\r\n\t.video-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #333;\r\n\t\tline-height: 1.3;\r\n\t\ttext-align: center;\r\n\t\tmargin: 12rpx 0 8rpx;\r\n\t\tpadding: 0 15rpx;\r\n\t\tbackground-color: #27ae60;\r\n\t}\r\n\r\n\t.video-free {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #27ae60;\r\n\t\tfont-weight: 500;\r\n\t\tpadding: 4rpx 12rpx;\r\n\t\tbackground-color: #e8f6ef;\r\n\t\tborder-radius: 12rpx;\r\n\t}\r\n\r\n\t.video-info {\r\n\t\tmargin: 10rpx 0;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.video-price {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #e74c3c;\r\n\t\tfont-weight: 500;\r\n\t\tpadding: 4rpx 12rpx;\r\n\t\tbackground-color: #ffeaea;\r\n\t\tborder-radius: 12rpx;\r\n\t}\r\n\r\n\t\r\n\r\n\t.photo {\r\n\t\twidth: 100%;\r\n\t\theight: 80px;\r\n\t}\r\n\r\n\t/* 头部容器 - 水平排列 */\r\n\t.header-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 15rpx 30rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-bottom: 1rpx solid #e0e0e0;\r\n\t}\r\n\r\n\t/* 下拉选择器样式 */\r\n\t.picker-container {\r\n\t\tflex: 1;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.picker {\r\n\t\t/* display: flex; */\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 15rpx 20rpx;\r\n\t\tborder: 1rpx solid #3498db;\r\n\t\tborder-radius: 8rpx;\r\n\t\tbackground-color: #f8fafc;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(52, 152, 219, 0.2);\r\n\t}\r\n\r\n\t.picker-text {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #3498db;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t/* 精彩回顾文本样式 */\r\n\t.review-text {\r\n\t\twidth: 50%;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 15rpx 20rpx;\r\n\t\ttext-align: center;\r\n\t\tborder: 1rpx solid #3498db;\r\n\t\tborder-radius: 8rpx;\r\n\t\tbackground-color: #f8fafc;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(52, 152, 219, 0.2);\r\n\t}\r\n\r\n\t/* 下拉箭头样式 */\r\n\t.picker:active .uni-icons {\r\n\t\ttransform: rotate(180deg);\r\n\t}\r\n\r\n\t.area {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 1fr 1fr;\r\n\t\t/* 两列等宽 */\r\n\t\tgap: 30rpx;\r\n\t\t/* 间距 */\r\n\t}\r\n\r\n\t/* 标签切换栏（参照 forum.vue） */\r\n\t.switch-tabs {\r\n\t\tposition: sticky;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\theight: 88rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tz-index: 10;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.tab-item {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tposition: relative;\r\n\t\tborder-bottom: 4rpx solid transparent;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.tab-item.active {\r\n\t\tborder-bottom-color: #ff4757;\r\n\t}\r\n\r\n\t.tab-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.tab-item.active .tab-text {\r\n\t\tcolor: #ff4757;\r\n\t}\r\n\r\n\t.title {\r\n\t\tdisplay: block;\r\n\t\tflex: 0 0 calc(50% - 30px);\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t\tbackground: rgba(255, 255, 255, 0.95);\r\n\t\tborder: 4rpx solid rgba(85, 255, 255, 0.9);\r\n\t}\r\n\r\n\r\n\t.video-image {\r\n\t\tflex: 1 1 calc(50% - 30px);\r\n\t\twidth: 100%;\r\n\t\theight: 200px;\r\n\t\t/* 设置固定高度 */\r\n\t\tbackground: rgba(255, 255, 255, 0.95);\r\n\t\tborder-radius: 16px;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\r\n\t\ttransition: transform 0.3s ease, box-shadow 0.3s ease;\r\n\t\tobject-fit: cover;\r\n\t\t/* 确保图片填充整个容器 */\r\n\t\tcursor: pointer;\r\n\t\t/* 添加指针样式，表示可点击 */\r\n\t}\r\n\r\n\t/* 鼠标悬停效果 */\r\n\t.video-image:hover {\r\n\t\ttransform: scale(1.02);\r\n\t\tbox-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);\r\n\t}\r\n\r\n\t/* ----------------------------------------------------------------- */\r\n\t/* 点赞区域 */\r\n\t.like-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground: none;\r\n\t\tborder: none;\r\n\t\tcolor: #666;\r\n\t\tfont-size: 14px;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\r\n\t.like-section {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-end;\r\n\t\tpadding: 0 15px 15px;\r\n\t}\r\n\r\n\t.like-btn:hover {\r\n\t\tcolor: #ff4757;\r\n\t}\r\n\r\n\t.like-btn.liked {\r\n\t\tcolor: #ff4757;\r\n\t}\r\n\r\n\t.like-icon {\r\n\t\tfont-size: 18px;\r\n\t\tmargin-right: 5px;\r\n\t}\r\n\r\n\t.like-count {\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t/* 发布按钮 */\r\n\t.publish-btn {\r\n\t\tposition: fixed;\r\n\t\tright: 30rpx;\r\n\t\tbottom: 120rpx;\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tbackground-color: #28B389;\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(40, 179, 137, 0.3);\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.publish-btn:active {\r\n\t\ttransform: scale(0.95);\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/梓梅2.0/梓梅xcx/my-painting-rules-project/pages/video/video.vue'\nwx.createPage(MiniProgramPage)"],"names":["useVideoStore","ref","onPullDownRefresh","uni","apiGetVideo","apiGetIssueNo","getToken","apiCheckVideoPayment","getAccount","onMounted"],"mappings":";;;;;;;;;;;;;;;;;;;AA4GC,UAAM,aAAaA,aAAAA,cAAe;AAEZC,kBAAG,IAAC,CAAC,OAAO,OAAO,OAAO,QAAQ,MAAM,CAAC;AAC/D,UAAM,cAAcA,cAAG,IAAC,CAAC;AAGzB,UAAM,aAAaA,kBAAI,KAAK;AACRA,kBAAAA,IAAI,KAAK;AACVA,kBAAAA,IAAI,MAAM;AACVA,kBAAG,IAAC,CAAC,KAAK,KAAK,KAAK,KAAK,GAAG,CAAC;AAC7BA,sBAAI,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,GAAG,CAAC;AACjCA,kBAAAA,IAAI,QAAQ;AACZA,kBAAAA,IAAI,OAAO;AACbA,kBAAAA,IAAI,QAAQ;AAGnC,UAAM,YAAYA,kBAAI,CAAA,CAAE;AAEPA,kBAAAA,IAAI,CAAA,CAAE;AAGvB,UAAM,eAAeA,cAAAA,IAAI;AAAA,MACxB,EAAE,IAAI,IAAI,MAAM,OAAO,MAAM,OAAO,QAAQ,OAAO,MAAM,WAAY;AAAA,MACrE,EAAE,IAAI,IAAI,MAAM,OAAO,MAAM,OAAO,QAAQ,OAAO,MAAM,WAAY;AAAA,MACrE,EAAE,IAAI,IAAI,MAAM,OAAO,MAAM,OAAO,QAAQ,OAAO,MAAM,WAAY;AAAA,MACrE,EAAE,IAAI,IAAI,MAAM,QAAQ,MAAM,MAAM,QAAQ,OAAO,MAAM,WAAY;AAAA,IACvE,CAAE;AAED,UAAM,qBAAqBA,cAAG,IAAC,aAAa,MAAM,CAAC,CAAC;AACpD,UAAM,mBAAmBA,cAAG,IAAC,KAAK;AAClC,UAAM,mBAAmBA,cAAAA,IAAI,EAAE,IAAI,MAAM,QAAQ,MAAM,QAAQ,OAAO,MAAM,WAAU,CAAE;AAGxFC,kBAAAA,kBAAkB,YAAY;AAC7B,YAAM,eAAc;AACpBC,oBAAAA,MAAI,oBAAqB;AAAA,IAC3B,CAAE;AAGD,UAAM,iBAAiB,YAAY;AAClC,UAAI;AAEH,cAAM,YAAY;AAAA,UACjB,MAAM;AAAA,UACN,OAAO;AAAA,QACX;AAGE,YAAI,WAAW,UAAU,YAAY,mBAAmB,SAAS,mBAAmB,MAAM,MAAM;AAC/F,oBAAU,QAAQ,mBAAmB,MAAM;AAAA,QAC3C;AAED,cAAM,YAAY,MAAMC,qBAAY,SAAS;AAE7C,YAAI,UAAU,SAAS,OAAO,UAAU,QAAQ,UAAU,KAAK,WAAW,MAAM,QAAQ,UAAU,KAAK,OAAO,GAAG;AAChH,oBAAU,QAAQ,UAAU,KAAK,QAAQ,IAAI,WAAS;AAAA,YACrD,OAAO,KAAK;AAAA,YACZ,KAAK,8BAA8B,KAAK;AAAA,YACxC,IAAI,KAAK;AAAA,YACT,SAAS,KAAK;AAAA,YACd,WAAW,KAAK;AAAA,YAChB,YAAY,KAAK;AAAA,YACjB,MAAM,KAAK,QAAQ,IAAI,KAAK,OAAO;AAAA,YACnC,OAAO,KAAK;AAAA,YACZ,YAAY,KAAK;AAAA,YACjB,QAAQ,8BAA8B,KAAK;AAAA,UAC3C,EAAC;AAEFD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,OAAO,UAAU,MAAM,MAAM;AAAA,YACpC,MAAM;AAAA,YACN,UAAU;AAAA,UACd,CAAI;AAAA,QACJ,OAAS;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,UAAU,OAAO;AAAA,YACxB,MAAM;AAAA,UACV,CAAI;AAAA,QACD;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AAAA,MACD;AAAA,IACA;AAED,UAAM,wBAAwB,OAAO,gBAAgB;AACpD,UAAI,iBAAiB,SAAS,CAAC,eAAe,CAAC,YAAY;AAAM;AACjE,UAAI;AACH,yBAAiB,QAAQ;AACzBA,sBAAAA,MAAI,YAAY,EAAE,OAAO,SAAQ,CAAE;AACnC,cAAM,WAAW,MAAME,SAAa,cAAC,EAAE,OAAO,YAAY,MAAM;AAChEF,sBAAAA,MAAI,YAAa;AACjB,YAAI,SAAS,SAAS,OAAO,SAAS,SAAS,QAAQ,SAAS,SAAS,QAAW;AACnF,cAAI,cAAc;AAClB,cAAI,cAAc;AAClB,cAAI,YAAY;AAChB,cAAI,OAAO,SAAS,SAAS,YAAY,OAAO,SAAS,SAAS,UAAU;AAC3E,0BAAc,SAAS,KAAK,SAAU;AAAA,UACtC,WAAU,OAAO,SAAS,SAAS,UAAU;AAC7C,0BAAc,SAAS,KAAK,WAAW,SAAS,KAAK,UAAU,SAAS,KAAK;AAC7E,0BAAc,SAAS,KAAK,UAAU;AACtC,wBAAY,SAAS,KAAK,QAAQ;AAAA,UAClC;AACD,sBAAY,SAAS;AACrB,sBAAY,OAAO;AACnB,gBAAM,MAAM,aAAa,MAAM,UAAU,OAAK,EAAE,SAAS,YAAY,IAAI;AACzE,cAAI,QAAQ,IAAI;AACf,yBAAa,MAAM,GAAG,EAAE,SAAS;AACjC,yBAAa,MAAM,GAAG,EAAE,OAAO;AAAA,UAC/B;AACD,2BAAiB,QAAQ,EAAE,IAAI,aAAa,QAAQ,aAAa,QAAQ,aAAa,MAAM,UAAW;AAGzG,cAAI;AACHA,0BAAAA,MAAI,eAAe,oBAAoB,iBAAiB,KAAK;AAC7DA,gCAAI,eAAe,sBAAsB,WAAW;AAAA,UACpD,SAAQ,OAAO;AAAA,UAEf;AAAA,QACH,OAAU;AACNA,8BAAI,UAAU,EAAE,OAAO,SAAS,OAAO,UAAU,MAAM,QAAQ;AAAA,QAC/D;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAI,YAAa;AACjBA,sBAAAA,MAAI,UAAU,EAAE,QAAO,+BAAO,SAAO,+BAAO,YAAW,YAAY,MAAM,QAAQ,UAAU,IAAI,CAAE;AAAA,MACpG,UAAY;AACT,yBAAiB,QAAQ;AAAA,MACzB;AAAA,IACD;AAGD,UAAM,mBAAmB,OAAO,UAAU;AAGzC,kBAAY,QAAQ;AACpB,cAAQ,OAAK;AAAA,QACZ,KAAK;AACJ,qBAAW,QAAQ;AACnB,6BAAmB,QAAQ,aAAa,MAAM,KAAK,OAAK,EAAE,SAAS,KAAK,KAAK,aAAa,MAAM,CAAC;AACjG;AAAA,QACD,KAAK;AACJ,qBAAW,QAAQ;AACnB,6BAAmB,QAAQ,aAAa,MAAM,KAAK,OAAK,EAAE,SAAS,KAAK,KAAK,aAAa,MAAM,CAAC;AACjG;AAAA,QACD,KAAK;AACJ,qBAAW,QAAQ;AACnB,6BAAmB,QAAQ,aAAa,MAAM,KAAK,OAAK,EAAE,SAAS,KAAK,KAAK,aAAa,MAAM,CAAC;AACjG;AAAA,QACD,KAAK;AACJ,qBAAW,QAAQ;AACnB,6BAAmB,QAAQ,aAAa,MAAM,KAAK,OAAK,EAAE,SAAS,IAAI,KAAK,aAAa,MAAM,CAAC;AAChG;AAAA,QACD,KAAK;AACJ,qBAAW,QAAQ;AACnB;AAAA,MACD;AAKD,UAAI,WAAW,UAAU,UAAU;AAClC,cAAM,sBAAsB,mBAAmB,KAAK;AAAA,MACpD;AAGD,YAAM,eAAc;AAAA,IACpB;AAyBD,UAAM,YAAY,OAAO,UAAU;AAElC,YAAM,QAAQG,cAAAA;AACd,UAAI,CAAC,OAAO;AACXH,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD,mBAAW,MAAM;AAChBA,wBAAAA,MAAI,WAAW;AAAA,YACd,KAAK;AAAA,UACV,CAAK;AAAA,QACD,GAAE,IAAI;AACP;AAAA,MACA;AAGD,iBAAW,gBAAgB,KAAK;AAChCA,oBAAG,MAAC,eAAe,SAAS,MAAM,EAAE,IAAI,KAAK;AAG7C,UAAI,CAAC,MAAM,QAAQ,MAAM,UAAU,GAAG;AAErCA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK,wBAAwB,MAAM,EAAE;AAAA,QACzC,CAAI;AACD;AAAA,MACA;AAGD,UAAI;AAEH,cAAM,eAAe,MAAMI,8BAAqB;AAAA,UAC/C,SAAS,MAAM;AAAA,UACf,SAASC,cAAAA,WAAY;AAAA,QACzB,CAAI;AAED,YAAI,aAAa,MAAM;AACtB,cAAI,aAAa,MAAM;AAEtBL,0BAAAA,MAAI,WAAW;AAAA,cACd,KAAK,wBAAwB,MAAM,EAAE;AAAA,YAC3C,CAAM;AAAA,UACN,OAAW;AAENA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,SAAS,YAAY,MAAM,KAAK;AAAA,cAChC,aAAa;AAAA,cACb,YAAY;AAAA,cACZ,SAAS,OAAO,QAAQ;AACvB,oBAAI,IAAI,SAAS;AAEhB,wBAAM,YAAY,KAAK;AAAA,gBACvB;AAAA,cACD;AAAA,YACP,CAAM;AAAA,UACD;AAAA,QACL,OAAU;AACNA,wBAAAA,MAAI,WAAW;AAAA,YACd,KAAK,wBAAwB,MAAM,EAAE;AAAA,UAC1C,CAAK;AAAA,QACD;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAAA,IACH;AAGC,UAAM,cAAc,OAAO,UAAU;AACpC,UAAI;AAKH,cAAM,UAAU;AAEhBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAGDA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK,wBAAwB,MAAM,EAAE;AAAA,QACzC,CAAI;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAAA,IACH;AA6DC,UAAM,UAAU,MAAM;AAErB,UAAI,MAAM;AACV,UAAI,mBAAmB,SAAS,mBAAmB,MAAM,MAAM;AAC9D,eAAO,UAAU,mBAAmB,mBAAmB,MAAM,IAAI,CAAC;AAAA,MAClE;AACDA,oBAAAA,MAAI,WAAW;AAAA,QACd;AAAA,MACH,CAAG;AAAA,IACH;AAKCM,kBAAAA,UAAU,YAAY;AAErB,YAAM,sBAAsB,mBAAmB,KAAK;AACpD,YAAM,eAAc;AAAA,IACtB,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1dF,GAAG,WAAW,eAAe;"}