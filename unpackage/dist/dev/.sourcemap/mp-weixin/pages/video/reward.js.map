{"version":3,"file":"reward.js","sources":["pages/video/reward.vue","D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdmlkZW8vcmV3YXJkLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"reward-container\">\n    <!-- 导航栏 -->\n    <view class=\"navbar\">\n      <view class=\"nav-content\">\n        <view class=\"nav-left\" @click=\"goBack\">\n          <text class=\"back-arrow\">‹</text>\n        </view>\n        <view class=\"nav-center\">\n          <text class=\"nav-title\">打赏作者</text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 作者信息 -->\n    <view class=\"author-info\">\n      <view class=\"author-avatar\">\n        <!-- 使用从路由参数获取的头像 -->\n        <image :src=\"getAvatarUrl(authorAvatar)\" class=\"avatar\"></image>\n        <view class=\"v-badge\">V</view>\n      </view>\n      <view class=\"author-details\">\n        <!-- 使用从路由参数获取的作者名称 -->\n        <text class=\"author-name\">{{ authorName }}</text>\n        <text class=\"author-location\">{{ authorLocation }}</text>\n      </view>\n    </view>\n    \n    <!-- 打赏金额选项 -->\n    <view class=\"reward-options\">\n      <text class=\"section-title\">选择打赏金额</text>\n      <view class=\"amount-grid\">\n        <view \n          v-for=\"(amount, index) in amountOptions\" \n          :key=\"index\" \n          class=\"amount-option\"\n          :class=\"{ 'active': selectedAmount === amount }\"\n          @click=\"selectAmount(amount)\"\n        >\n          <text class=\"amount-text\">¥{{ amount }}</text>\n        </view>\n      </view>\n      \n      <!-- 添加自定义金额区域 -->\n      <view class=\"custom-amount-section\">\n        <text class=\"custom-title\">自定义金额</text>\n        <view class=\"custom-input-container\">\n          <text class=\"currency-symbol\">¥</text>\n          <input \n            type=\"number\" \n            class=\"custom-input\" \n            placeholder=\"输入金额\" \n            v-model=\"customAmount\"\n            @input=\"validateCustomAmount\"\n          />\n          <button class=\"confirm-custom-btn\" @click=\"confirmCustomAmount\">确定</button>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 支付方式选择 -->\n    <view class=\"payment-methods\">\n      <text class=\"section-title\">支付方式</text>\n      <radio-group @change=\"selectPaymentMethod\">\n        <label class=\"payment-method\">\n          <radio value=\"0\" :checked=\"paymentMethod === '0'\" /> \n          <text class=\"method-text\">微信支付</text>\n        </label>\n        <label class=\"payment-method\">\n          <radio value=\"1\" :checked=\"paymentMethod === '1'\" /> \n          <text class=\"method-text\">账户余额</text>\n        </label>\n      </radio-group>\n    </view>\n    \n    <!-- 支付按钮 -->\n    <view class=\"payment-btn-container\">\n      <button class=\"payment-btn\" @click=\"handleReward\">支付 ¥{{ selectedAmount }}元</button>\n    </view>\n    \n    <!-- 二维码支付弹出层 -->\n    <view class=\"qr-modal\" v-if=\"showQRModal\" @click=\"closeQRModal\">\n      <view class=\"qr-content\" @click.stop>\n        <view class=\"qr-header\">\n          <text class=\"qr-title\">扫码支付</text>\n          <text class=\"close-btn\" @click=\"closeQRModal\">×</text>\n        </view>\n        <view class=\"qr-body\">\n          <view class=\"qr-code-container\">\n            <image \n              v-if=\"qrCodeUrl\"\n              :src=\"qrCodeUrl\" \n              class=\"qr-image\"\n              :style=\"{ width: qrSize + 'px', height: qrSize + 'px' }\"\n              mode=\"aspectFit\"\n            ></image>\n            <view v-else class=\"qr-loading\">\n              <text class=\"loading-text\">生成二维码中...</text>\n            </view>\n          </view>\n          <text class=\"qr-tip\">请使用微信扫描二维码完成支付</text>\n          <text class=\"qr-amount\">支付金额：¥{{ selectedAmount }}元</text>\n          <text class=\"qr-status\" v-if=\"isCheckingPayment\">正在检查支付状态...</text>\n          <text class=\"qr-hint\" v-if=\"isCheckingPayment\">如已支付完成，可点击下方\"支付完成\"按钮</text>\n        </view>\n       <!-- <view class=\"qr-footer\">\n          <button class=\"cancel-qr-btn\" @click=\"closeQRModal\">取消支付</button>\n          <button class=\"refresh-qr-btn\" @click=\"refreshQRCode\">刷新二维码</button>\n          <button class=\"success-qr-btn\" @click=\"handlePaymentSuccess\">支付完成</button>\n        </view> -->\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport { apiRewardVideo, apiWxpay, apiCheckVideoPayment } from '@/api/apis';\nimport { getToken, getAccount } from '@/utils/request.js';\n\n// 打赏金额选项\nconst amountOptions = ref([1.8, 3.8, 5.8, 6.8, 8.8, 18, 38, 58, 68]);\n\n// 选中的金额\nconst selectedAmount = ref(3.8);\n\n// 自定义金额\nconst customAmount = ref('');\nconst isCustomAmountSelected = ref(false);\n\n// 支付方式 (0:微信 1:账户余额)\nconst paymentMethod = ref('0');\n\n// 作者信息\nconst authorName = ref('追梦人');\nconst authorAvatar = ref('');\nconst authorLocation = ref('海南省 - 儋州市');\n\n// 路由参数\nconst routeParams = ref({\n  videoId: '',\n  author: '',\n  title: '',\n  authorAvatar: '', // 添加作者头像参数\n  authorName: ''   // 添加作者名称参数\n});\n\n// 二维码相关数据\nconst showQRModal = ref(false);\nconst qrSize = ref(200);\nconst currentPaymentUrl = ref('');\nconst qrCodeUrl = ref('');\nconst paymentCheckTimer = ref(null);\nconst isCheckingPayment = ref(false);\n\n// 获取路由参数\nonLoad((options) => {\n  if (options.videoId) routeParams.value.videoId = options.videoId;\n  if (options.author) routeParams.value.author = decodeURIComponent(options.author);\n  if (options.title) routeParams.value.title = decodeURIComponent(options.title);\n  \n  // 获取作者头像和名称\n  if (options.authorAvatar) {\n    authorAvatar.value = decodeURIComponent(options.authorAvatar);\n  }\n  if (options.authorName) {\n    authorName.value = decodeURIComponent(options.authorName);\n  }\n});\n\n// 获取头像URL\nconst getAvatarUrl = (avatar) => {\n  if (!avatar) return '/static/default-avatar.png';\n  return `http://video.caimizm.com/himg/${avatar}`;\n};\n\n// 选择金额\nconst selectAmount = (amount) => {\n  selectedAmount.value = amount;\n  isCustomAmountSelected.value = false;\n};\n\n// 选择支付方式\nconst selectPaymentMethod = (e) => {\n  paymentMethod.value = e.detail.value;\n};\n\n// 返回上一页\nconst goBack = () => {\n  uni.navigateBack();\n};\n\n// 验证自定义金额\nconst validateCustomAmount = () => {\n  // 确保金额为正数\n  if (customAmount.value < 0) {\n    customAmount.value = '';\n  }\n};\n\n// 确认自定义金额\nconst confirmCustomAmount = () => {\n  if (!customAmount.value) {\n    uni.showToast({\n      title: '请输入金额',\n      icon: 'none'\n    });\n    return;\n  }\n  \n  const amount = parseFloat(customAmount.value);\n  if (isNaN(amount) || amount <= 0) {\n    uni.showToast({\n      title: '请输入有效金额',\n      icon: 'none'\n    });\n    return;\n  }\n  \n  selectedAmount.value = amount;\n  isCustomAmountSelected.value = true;\n  uni.showToast({\n    title: '已选择自定义金额',\n    icon: 'success'\n  });\n};\n\n// 处理打赏\nconst handleReward = async () => {\n  // 检查是否登录\n  const token = getToken();\n  if (!token) {\n    uni.showToast({\n      title: '请先登录',\n      icon: 'none'\n    });\n    setTimeout(() => {\n      uni.navigateTo({\n        url: '/pages/login/login'\n      });\n    }, 1500);\n    return;\n  }\n  \n  // 如果选择账户余额支付，直接调用打赏API\n  if (paymentMethod.value === '1') {\n    await processReward();\n    return;\n  }\n  \n  // 如果选择微信支付，显示确认支付弹窗\n  uni.showModal({\n    title: '确认支付',\n    content: `确认支付 ¥${selectedAmount.value}元 打赏作者？`,\n    success: (res) => {\n      if (res.confirm) {\n        processReward();\n      }\n    }\n  });\n};\n\n// 处理打赏流程\nconst processReward = async () => {\n  uni.showLoading({\n    title: '处理中...'\n  });\n  \n  try {\n    // 准备打赏数据\n    const rewardData = {\n      info: `打赏视频: ${routeParams.value.title}`,\n      amount: selectedAmount.value.toString(),\n      type: 2, // 2=打赏\n      account: getAccount(),\n      payType: paymentMethod.value,\n      channel: 1 // 微信小程序\n    };\n    \n    // 调用打赏API\n    const response = await apiRewardVideo(rewardData);\n    \n    if (response.code === 200 && response.data) {\n      // 如果选择微信支付，处理微信支付流程\n        // 调用微信支付API\n        const wxPayResponse = await callWxPayApi(response.data);\n        \n        if (wxPayResponse.code === 200) {\n          // 处理微信支付返回的数据\n          handleWxPayResponse(wxPayResponse.data);\n        } else {\n          uni.showToast({\n            title: wxPayResponse.msg || '微信支付请求失败',\n            icon: 'none'\n          });\n        }\n    } else {\n      uni.showToast({\n        title: response.msg || '打赏失败',\n        icon: 'none'\n      });\n    }\n    \n    uni.hideLoading();\n  } catch (error) {\n    uni.hideLoading();\n    console.error('打赏接口调用失败:', error);\n    uni.showToast({\n      title: '网络错误，请重试',\n      icon: 'none'\n    });\n  }\n};\n\n// 调用微信支付API\nconst callWxPayApi = async (orderNo) => {\n  try {\n    // 准备微信支付数据\n    const wxPayData = {\n      account: getAccount(),\n      orderNo: orderNo,\n      remark: routeParams.value.videoId\n    };\n    \n    // 调用微信支付API\n    return await apiWxpay(wxPayData);\n  } catch (error) {\n    console.error('微信支付接口调用失败:', error);\n    return {\n      code: 500,\n      msg: '微信支付接口调用失败'\n    };\n  }\n};\n\n// 处理微信支付返回的数据\nconst handleWxPayResponse = (wxPayData) => {\n  if (wxPayData && wxPayData.includes('weixin://wxpay')) {\n    // 显示二维码支付\n    currentPaymentUrl.value = wxPayData;\n    showQRModal.value = true;\n    \n    // 生成二维码\n    setTimeout(() => {\n      generateQRCode(wxPayData);\n      // 开始检查支付状态\n      startPaymentCheck();\n    }, 100);\n  }\n};\n\n// 二维码相关方法\nconst generateQRCode = (url) => {\n  try {\n    // 首先尝试使用qrcode库\n    import('qrcode').then(QRCode => {\n      // 生成二维码数据URL\n      QRCode.toDataURL(url, {\n        width: qrSize.value,\n        height: qrSize.value,\n        margin: 2,\n        color: {\n          dark: '#000000',\n          light: '#FFFFFF'\n        }\n      }, (error, dataUrl) => {\n        if (error) {\n          console.error('二维码生成失败:', error);\n          // 使用在线服务作为备选\n          generateQRCodeOnline(url);\n        } else {\n          // 直接设置二维码URL\n          qrCodeUrl.value = dataUrl;\n        }\n      });\n    }).catch(error => {\n      console.error('导入qrcode库失败:', error);\n      // 使用在线服务作为备选\n      generateQRCodeOnline(url);\n    });\n  } catch (error) {\n    console.error('生成二维码失败:', error);\n    // 使用在线服务作为备选\n    generateQRCodeOnline(url);\n  }\n};\n\n// 使用在线服务生成二维码\nconst generateQRCodeOnline = (url) => {\n  try {\n    // 使用qrcode.js在线服务\n    const encodedUrl = encodeURIComponent(url);\n    const qrApiUrl = `https://api.qrserver.com/v1/create-qr-code/?size=${qrSize.value}x${qrSize.value}&data=${encodedUrl}`;\n    qrCodeUrl.value = qrApiUrl;\n  } catch (error) {\n    console.error('在线二维码生成失败:', error);\n    uni.showToast({\n      title: '二维码生成失败',\n      icon: 'none'\n    });\n  }\n};\n\n// 开始检查支付状态\nconst startPaymentCheck = () => {\n  // 清除之前的定时器\n  if (paymentCheckTimer.value) {\n    clearInterval(paymentCheckTimer.value);\n  }\n  \n  isCheckingPayment.value = true;\n  let checkCount = 0;\n  const maxChecks = 20; // 最多检查20次（100秒）\n  \n  // 每3秒检查一次支付状态\n  paymentCheckTimer.value = setInterval(async () => {\n    try {\n      checkCount++;\n      \n      // 调用真实API检查支付状态\n      const paymentStatus = await checkRealPaymentStatus();\n      \n      if (paymentStatus === true) {\n        // 支付成功\n        await handlePaymentSuccess();\n        return;\n      } else if (paymentStatus === false) {\n        // 支付失败或仍在处理中，继续检查\n        console.log('支付状态检查中...');\n      }\n      \n      // 如果检查次数达到上限，停止检查\n      if (checkCount >= maxChecks) {\n        console.log('支付检查超时，停止检查');\n        stopPaymentCheck();\n        uni.showToast({\n          title: '支付检查超时，请手动确认',\n          icon: 'none',\n          duration: 3000\n        });\n      }\n    } catch (error) {\n      console.error('检查支付状态失败:', error);\n    }\n  }, 3000);\n};\n\n// 检查真实支付状态\nconst checkRealPaymentStatus = async () => {\n  try {\n    // 调用支付状态检查API\n    const response = await apiCheckVideoPayment({\n      videoId: routeParams.value.videoId,\n      account: getAccount()\n    });\n    \n    if (response.code === 200) {\n      // 根据API返回的data字段判断支付状态\n      return response.data; // true表示已支付，false表示未支付\n    }\n    \n    return false;\n  } catch (error) {\n    console.error('支付状态检查API调用失败:', error);\n    return false;\n  }\n};\n\n// 处理支付成功\nconst handlePaymentSuccess = async () => {\n  try {\n    // 停止检查支付状态\n    stopPaymentCheck();\n    \n    // 显示支付成功提示\n    uni.showModal({\n      title: '支付成功',\n      content: `恭喜您！成功打赏${selectedAmount.value}金币`,\n      showCancel: false,\n      success: () => {\n        // 关闭二维码弹窗\n        closeQRModal();\n        \n        // 延迟返回上一页\n        setTimeout(() => {\n          uni.navigateBack();\n        }, 500);\n      }\n    });\n  } catch (error) {\n    console.error('处理支付成功失败:', error);\n  }\n};\n\n// 关闭二维码弹窗\nconst closeQRModal = () => {\n  // 停止检查支付状态\n  stopPaymentCheck();\n  \n  showQRModal.value = false;\n  currentPaymentUrl.value = '';\n  qrCodeUrl.value = '';\n};\n\n// 刷新二维码\nconst refreshQRCode = () => {\n  if (currentPaymentUrl.value) {\n    qrCodeUrl.value = ''; // 清空当前二维码\n    generateQRCode(currentPaymentUrl.value);\n  }\n};\n\n// 停止检查支付状态\nconst stopPaymentCheck = () => {\n  if (paymentCheckTimer.value) {\n    clearInterval(paymentCheckTimer.value);\n    paymentCheckTimer.value = null;\n  }\n  isCheckingPayment.value = false;\n  console.log('停止检查支付状态');\n};\n</script>\n\n<style scoped>\n.reward-container {\n  padding: 20rpx;\n  background-color: #f5f5f5;\n  min-height: 100vh;\n}\n\n/* 导航栏 */\n.navbar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 88rpx;\n  background-color: #fff;\n  z-index: 999;\n  border-bottom: 1rpx solid #e8e8e8;\n}\n\n.nav-content {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  padding: 0 30rpx;\n}\n\n.nav-left, .nav-right {\n  width: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.back-arrow {\n  font-size: 40rpx;\n  color: #333;\n  font-weight: bold;\n}\n\n.nav-center {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.nav-title {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #333;\n  text-align: center;\n}\n\n/* 作者信息 */\n.author-info {\n  margin-top: 100rpx;\n  padding: 30rpx;\n  background-color: #fff;\n  border-radius: 16rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n  display: flex;\n  align-items: center;\n}\n\n.author-avatar {\n  position: relative;\n  margin-right: 20rpx;\n}\n\n.avatar {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 50%;\n  background-color: #f0f0f0;\n}\n\n.v-badge {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 24rpx;\n  height: 24rpx;\n  background-color: #ffd700;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16rpx;\n  font-weight: bold;\n  color: #fff;\n}\n\n.author-details {\n  display: flex;\n  flex-direction: column;\n}\n\n.author-name {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 8rpx;\n}\n\n.author-location {\n  font-size: 24rpx;\n  color: #666;\n}\n\n/* 打赏金额选项 */\n.reward-options {\n  margin-top: 30rpx;\n  padding: 20rpx;\n  background-color: #fff;\n  border-radius: 16rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n}\n\n.section-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 20rpx;\n  display: block;\n}\n\n.amount-grid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20rpx;\n  margin-bottom: 30rpx;\n}\n\n.amount-option {\n  flex: 1;\n  min-width: 150rpx;\n  padding: 20rpx;\n  border: 2rpx solid #3498db;\n  border-radius: 16rpx;\n  text-align: center;\n  background-color: #f8f8f8;\n  transition: all 0.3s ease;\n}\n\n.amount-option.active {\n  background-color: #3498db;\n  color: #fff;\n  transform: translateY(-5rpx);\n  box-shadow: 0 4rpx 12rpx rgba(52, 152, 219, 0.2);\n}\n\n.amount-text {\n  font-size: 28rpx;\n  font-weight: bold;\n}\n\n/* 自定义金额区域 */\n.custom-amount-section {\n  margin-top: 20rpx;\n}\n\n.custom-title {\n  font-size: 28rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 15rpx;\n  display: block;\n}\n\n.custom-input-container {\n  display: flex;\n  align-items: center;\n  border: 2rpx solid #3498db;\n  border-radius: 16rpx;\n  padding: 10rpx 15rpx;\n  background-color: #f8f8f8;\n}\n\n.currency-symbol {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #3498db;\n  margin-right: 10rpx;\n}\n\n.custom-input {\n  flex: 1;\n  font-size: 32rpx;\n  height: 60rpx;\n  padding: 0 15rpx;\n  background-color: transparent;\n}\n\n.confirm-custom-btn {\n  background-color: #3498db;\n  color: white;\n  border-radius: 40rpx;\n  padding: 10rpx 20rpx;\n  font-size: 28rpx;\n  font-weight: 500;\n}\n\n/* 支付方式选择 */\n.payment-methods {\n  margin-top: 30rpx;\n  padding: 20rpx;\n  background-color: #fff;\n  border-radius: 16rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n}\n\n.payment-method {\n  display: flex;\n  align-items: center;\n  margin-bottom: 15rpx;\n  font-size: 28rpx;\n  color: #333;\n}\n\n.method-text {\n  margin-left: 15rpx;\n}\n\n/* 支付按钮 */\n.payment-btn-container {\n  margin-top: 40rpx;\n  padding: 0 30rpx;\n}\n\n.payment-btn {\n  background-color: #3498db;\n  color: white;\n  border-radius: 50rpx;\n  padding: 25rpx;\n  font-size: 34rpx;\n  font-weight: 500;\n}\n\n/* 二维码弹出层样式 */\n.qr-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 40rpx;\n}\n\n.qr-content {\n  width: 100%;\n  max-width: 500rpx;\n  background-color: #fff;\n  border-radius: 20rpx;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 10rpx 40rpx rgba(0, 0, 0, 0.2);\n}\n\n.qr-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 30rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n}\n\n.qr-title {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #333;\n}\n\n.close-btn {\n  font-size: 40rpx;\n  color: #999;\n  font-weight: bold;\n  width: 60rpx;\n  text-align: center;\n}\n\n.qr-body {\n  padding: 40rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.qr-code-container {\n  margin-bottom: 30rpx;\n  padding: 20rpx;\n  background-color: #f8f9fa;\n  border-radius: 15rpx;\n}\n\n.qr-image {\n  display: block;\n  border-radius: 10rpx;\n}\n\n.qr-loading {\n  width: 200px;\n  height: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #f8f9fa;\n  border-radius: 10rpx;\n}\n\n.loading-text {\n  font-size: 28rpx;\n  color: #666;\n}\n\n.qr-tip {\n  font-size: 28rpx;\n  color: #666;\n  text-align: center;\n  margin-bottom: 15rpx;\n}\n\n.qr-amount {\n  font-size: 32rpx;\n  color: #ff4757;\n  font-weight: 600;\n  text-align: center;\n}\n\n.qr-status {\n  font-size: 24rpx;\n  color: #28B389;\n  text-align: center;\n  margin-top: 10rpx;\n  animation: pulse 1.5s infinite;\n}\n\n.qr-hint {\n  font-size: 22rpx;\n  color: #999;\n  text-align: center;\n  margin-top: 8rpx;\n  line-height: 1.4;\n}\n\n@keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n}\n\n.qr-footer {\n  display: flex;\n  gap: 20rpx;\n  padding: 30rpx;\n  border-top: 1rpx solid #f0f0f0;\n}\n\n.cancel-qr-btn, .refresh-qr-btn, .success-qr-btn {\n  flex: 1;\n  height: 80rpx;\n  border: none;\n  border-radius: 40rpx;\n  font-size: 28rpx;\n  font-weight: 500;\n}\n\n.cancel-qr-btn {\n  background-color: #f5f5f5;\n  color: #666;\n}\n\n.refresh-qr-btn {\n  background-color: #28B389;\n  color: #fff;\n}\n\n.success-qr-btn {\n  background-color: #ff4757;\n  color: #fff;\n}\n</style>","import MiniProgramPage from 'C:/Users/Administrator/Desktop/my-painting-rules-project/pages/video/reward.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","getToken","getAccount","apiRewardVideo","apiWxpay","apiCheckVideoPayment"],"mappings":";;;;;;;AA0HA,UAAM,gBAAgBA,cAAAA,IAAI,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,IAAI,IAAI,IAAI,EAAE,CAAC;AAGnE,UAAM,iBAAiBA,cAAAA,IAAI,GAAG;AAG9B,UAAM,eAAeA,cAAAA,IAAI,EAAE;AAC3B,UAAM,yBAAyBA,cAAAA,IAAI,KAAK;AAGxC,UAAM,gBAAgBA,cAAAA,IAAI,GAAG;AAG7B,UAAM,aAAaA,cAAAA,IAAI,KAAK;AAC5B,UAAM,eAAeA,cAAAA,IAAI,EAAE;AAC3B,UAAM,iBAAiBA,cAAAA,IAAI,WAAW;AAGtC,UAAM,cAAcA,cAAAA,IAAI;AAAA,MACtB,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,cAAc;AAAA;AAAA,MACd,YAAY;AAAA;AAAA,IACd,CAAC;AAGD,UAAM,cAAcA,cAAAA,IAAI,KAAK;AAC7B,UAAM,SAASA,cAAAA,IAAI,GAAG;AACtB,UAAM,oBAAoBA,cAAAA,IAAI,EAAE;AAChC,UAAM,YAAYA,cAAAA,IAAI,EAAE;AACxB,UAAM,oBAAoBA,cAAAA,IAAI,IAAI;AAClC,UAAM,oBAAoBA,cAAAA,IAAI,KAAK;AAGnCC,kBAAM,OAAC,CAAC,YAAY;AAClB,UAAI,QAAQ;AAAS,oBAAY,MAAM,UAAU,QAAQ;AACzD,UAAI,QAAQ;AAAQ,oBAAY,MAAM,SAAS,mBAAmB,QAAQ,MAAM;AAChF,UAAI,QAAQ;AAAO,oBAAY,MAAM,QAAQ,mBAAmB,QAAQ,KAAK;AAG7E,UAAI,QAAQ,cAAc;AACxB,qBAAa,QAAQ,mBAAmB,QAAQ,YAAY;AAAA,MAC7D;AACD,UAAI,QAAQ,YAAY;AACtB,mBAAW,QAAQ,mBAAmB,QAAQ,UAAU;AAAA,MACzD;AAAA,IACH,CAAC;AAGD,UAAM,eAAe,CAAC,WAAW;AAC/B,UAAI,CAAC;AAAQ,eAAO;AACpB,aAAO,iCAAiC,MAAM;AAAA,IAChD;AAGA,UAAM,eAAe,CAAC,WAAW;AAC/B,qBAAe,QAAQ;AACvB,6BAAuB,QAAQ;AAAA,IACjC;AAGA,UAAM,sBAAsB,CAAC,MAAM;AACjC,oBAAc,QAAQ,EAAE,OAAO;AAAA,IACjC;AAGA,UAAM,SAAS,MAAM;AACnBC,oBAAG,MAAC,aAAY;AAAA,IAClB;AAGA,UAAM,uBAAuB,MAAM;AAEjC,UAAI,aAAa,QAAQ,GAAG;AAC1B,qBAAa,QAAQ;AAAA,MACtB;AAAA,IACH;AAGA,UAAM,sBAAsB,MAAM;AAChC,UAAI,CAAC,aAAa,OAAO;AACvBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,YAAM,SAAS,WAAW,aAAa,KAAK;AAC5C,UAAI,MAAM,MAAM,KAAK,UAAU,GAAG;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,qBAAe,QAAQ;AACvB,6BAAuB,QAAQ;AAC/BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACV,CAAG;AAAA,IACH;AAGA,UAAM,eAAe,YAAY;AAE/B,YAAM,QAAQC,cAAAA;AACd,UAAI,CAAC,OAAO;AACVD,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD,mBAAW,MAAM;AACfA,wBAAAA,MAAI,WAAW;AAAA,YACb,KAAK;AAAA,UACb,CAAO;AAAA,QACF,GAAE,IAAI;AACP;AAAA,MACD;AAGD,UAAI,cAAc,UAAU,KAAK;AAC/B,cAAM,cAAa;AACnB;AAAA,MACD;AAGDA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS,SAAS,eAAe,KAAK;AAAA,QACtC,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf;UACD;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGA,UAAM,gBAAgB,YAAY;AAChCA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,MACX,CAAG;AAED,UAAI;AAEF,cAAM,aAAa;AAAA,UACjB,MAAM,SAAS,YAAY,MAAM,KAAK;AAAA,UACtC,QAAQ,eAAe,MAAM,SAAU;AAAA,UACvC,MAAM;AAAA;AAAA,UACN,SAASE,cAAAA,WAAY;AAAA,UACrB,SAAS,cAAc;AAAA,UACvB,SAAS;AAAA;AAAA,QACf;AAGI,cAAM,WAAW,MAAMC,wBAAe,UAAU;AAEhD,YAAI,SAAS,SAAS,OAAO,SAAS,MAAM;AAGxC,gBAAM,gBAAgB,MAAM,aAAa,SAAS,IAAI;AAEtD,cAAI,cAAc,SAAS,KAAK;AAE9B,gCAAoB,cAAc,IAAI;AAAA,UAChD,OAAe;AACLH,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO,cAAc,OAAO;AAAA,cAC5B,MAAM;AAAA,YAClB,CAAW;AAAA,UACF;AAAA,QACT,OAAW;AACLA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO,SAAS,OAAO;AAAA,YACvB,MAAM;AAAA,UACd,CAAO;AAAA,QACF;AAEDA,sBAAG,MAAC,YAAW;AAAA,MAChB,SAAQ,OAAO;AACdA,sBAAG,MAAC,YAAW;AACfA,sBAAA,MAAA,MAAA,SAAA,iCAAc,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AAAA,MACF;AAAA,IACH;AAGA,UAAM,eAAe,OAAO,YAAY;AACtC,UAAI;AAEF,cAAM,YAAY;AAAA,UAChB,SAASE,cAAAA,WAAY;AAAA,UACrB;AAAA,UACA,QAAQ,YAAY,MAAM;AAAA,QAChC;AAGI,eAAO,MAAME,SAAAA,SAAS,SAAS;AAAA,MAChC,SAAQ,OAAO;AACdJ,sBAAc,MAAA,MAAA,SAAA,iCAAA,eAAe,KAAK;AAClC,eAAO;AAAA,UACL,MAAM;AAAA,UACN,KAAK;AAAA,QACX;AAAA,MACG;AAAA,IACH;AAGA,UAAM,sBAAsB,CAAC,cAAc;AACzC,UAAI,aAAa,UAAU,SAAS,gBAAgB,GAAG;AAErD,0BAAkB,QAAQ;AAC1B,oBAAY,QAAQ;AAGpB,mBAAW,MAAM;AACf,yBAAe,SAAS;AAExB;QACD,GAAE,GAAG;AAAA,MACP;AAAA,IACH;AAGA,UAAM,iBAAiB,CAAC,QAAQ;AAC9B,UAAI;AAEF,QAAO,yBAAQ,KAAA,OAAA,EAAA,OAAA,EAAE,KAAK,YAAU;AAE9B,iBAAO,UAAU,KAAK;AAAA,YACpB,OAAO,OAAO;AAAA,YACd,QAAQ,OAAO;AAAA,YACf,QAAQ;AAAA,YACR,OAAO;AAAA,cACL,MAAM;AAAA,cACN,OAAO;AAAA,YACR;AAAA,UACT,GAAS,CAAC,OAAO,YAAY;AACrB,gBAAI,OAAO;AACTA,4BAAA,MAAA,MAAA,SAAA,iCAAc,YAAY,KAAK;AAE/B,mCAAqB,GAAG;AAAA,YAClC,OAAe;AAEL,wBAAU,QAAQ;AAAA,YACnB;AAAA,UACT,CAAO;AAAA,QACP,CAAK,EAAE,MAAM,WAAS;AAChBA,wBAAA,MAAA,MAAA,SAAA,iCAAc,gBAAgB,KAAK;AAEnC,+BAAqB,GAAG;AAAA,QAC9B,CAAK;AAAA,MACF,SAAQ,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,iCAAc,YAAY,KAAK;AAE/B,6BAAqB,GAAG;AAAA,MACzB;AAAA,IACH;AAGA,UAAM,uBAAuB,CAAC,QAAQ;AACpC,UAAI;AAEF,cAAM,aAAa,mBAAmB,GAAG;AACzC,cAAM,WAAW,oDAAoD,OAAO,KAAK,IAAI,OAAO,KAAK,SAAS,UAAU;AACpH,kBAAU,QAAQ;AAAA,MACnB,SAAQ,OAAO;AACdA,sBAAc,MAAA,MAAA,SAAA,iCAAA,cAAc,KAAK;AACjCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AAAA,MACF;AAAA,IACH;AAGA,UAAM,oBAAoB,MAAM;AAE9B,UAAI,kBAAkB,OAAO;AAC3B,sBAAc,kBAAkB,KAAK;AAAA,MACtC;AAED,wBAAkB,QAAQ;AAC1B,UAAI,aAAa;AACjB,YAAM,YAAY;AAGlB,wBAAkB,QAAQ,YAAY,YAAY;AAChD,YAAI;AACF;AAGA,gBAAM,gBAAgB,MAAM;AAE5B,cAAI,kBAAkB,MAAM;AAE1B,kBAAM,qBAAoB;AAC1B;AAAA,UACR,WAAiB,kBAAkB,OAAO;AAElCA,0BAAAA,oDAAY,YAAY;AAAA,UACzB;AAGD,cAAI,cAAc,WAAW;AAC3BA,0BAAAA,MAAY,MAAA,OAAA,iCAAA,aAAa;AACzB;AACAA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,YACpB,CAAS;AAAA,UACF;AAAA,QACF,SAAQ,OAAO;AACdA,8EAAc,aAAa,KAAK;AAAA,QACjC;AAAA,MACF,GAAE,GAAI;AAAA,IACT;AAGA,UAAM,yBAAyB,YAAY;AACzC,UAAI;AAEF,cAAM,WAAW,MAAMK,8BAAqB;AAAA,UAC1C,SAAS,YAAY,MAAM;AAAA,UAC3B,SAASH,cAAAA,WAAY;AAAA,QAC3B,CAAK;AAED,YAAI,SAAS,SAAS,KAAK;AAEzB,iBAAO,SAAS;AAAA,QACjB;AAED,eAAO;AAAA,MACR,SAAQ,OAAO;AACdF,sBAAA,MAAA,MAAA,SAAA,iCAAc,kBAAkB,KAAK;AACrC,eAAO;AAAA,MACR;AAAA,IACH;AAGA,UAAM,uBAAuB,YAAY;AACvC,UAAI;AAEF;AAGAA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,SAAS,WAAW,eAAe,KAAK;AAAA,UACxC,YAAY;AAAA,UACZ,SAAS,MAAM;AAEb;AAGA,uBAAW,MAAM;AACfA,4BAAG,MAAC,aAAY;AAAA,YACjB,GAAE,GAAG;AAAA,UACP;AAAA,QACP,CAAK;AAAA,MACF,SAAQ,OAAO;AACdA,sBAAA,MAAA,MAAA,SAAA,iCAAc,aAAa,KAAK;AAAA,MACjC;AAAA,IACH;AAGA,UAAM,eAAe,MAAM;AAEzB;AAEA,kBAAY,QAAQ;AACpB,wBAAkB,QAAQ;AAC1B,gBAAU,QAAQ;AAAA,IACpB;AAWA,UAAM,mBAAmB,MAAM;AAC7B,UAAI,kBAAkB,OAAO;AAC3B,sBAAc,kBAAkB,KAAK;AACrC,0BAAkB,QAAQ;AAAA,MAC3B;AACD,wBAAkB,QAAQ;AAC1BA,oBAAAA,MAAA,MAAA,OAAA,iCAAY,UAAU;AAAA,IACxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxgBA,GAAG,WAAW,eAAe;"}