{"version":3,"file":"oss.js","sources":["pages/video/oss.vue","D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdmlkZW8vb3NzLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<view class=\"navbar\">\n\t\t\t<!-- 返回按钮 -->\n\t\t\t<view class=\"navbar-left\" @click=\"goBack\">\n\t\t\t\t<uni-icons type=\"left\" size=\"30\"></uni-icons>\n\t\t\t</view>\n\t\t\t<!-- 标题 -->\n\t\t\t<view class=\"navbar-title\">上传视频</view>\n\t\t</view>\n\n\t\t<!-- 视频信息表单 -->\n\t\t<view class=\"form-area\">\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"form-label\">视频标题</text>\n\t\t\t\t<input class=\"form-input\" v-model=\"videoTitle\" placeholder=\"请输入视频标题\" />\n\t\t\t</view>\n\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"form-label\">是否收费</text>\n\t\t\t\t<view class=\"radio-group\">\n\t\t\t\t\t<label class=\"radio-label\">\n\t\t\t\t\t\t<radio value=\"1\" :checked=\"isCharge === 1\" @click=\"isCharge = 1\">免费</radio>\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<label class=\"radio-label\">\n\t\t\t\t\t\t<radio value=\"2\" :checked=\"isCharge === 2\" @click=\"isCharge = 2\">收费</radio>\n\t\t\t\t\t</label>\n\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"form-item\" v-if=\"isCharge === 2\">\n\t\t\t\t<text class=\"form-label\">收费价格</text>\n\t\t\t\t<input class=\"form-input\" v-model=\"chargePrice\" type=\"number\" placeholder=\"请输入价格\" />\n\t\t\t\t<text class=\"price-unit\">元</text>\n\t\t\t</view>\n\t\t</view>\n\n\t<!-- 视频上传区域 -->\n\t<view class=\"upload-area\" @click=\"chooseFile\">\n\t\t<video v-if=\"selectedVideoUrl\" :src=\"selectedVideoUrl\" class=\"video-preview\" controls></video>\n\t\t<view v-if=\"selectedVideoName\" class=\"video-info\">\n\t\t\t<text class=\"video-name\">{{ selectedVideoName }}</text>\n\t\t\t<text class=\"video-size\" v-if=\"selectedVideoSize\">{{ formatFileSize(selectedVideoSize) }}</text>\n\t\t</view>\n\t\t<view v-else class=\"upload-placeholder\">\n\t\t\t<uni-icons name=\"plus\" size=\"50\" color=\"#3498db\"></uni-icons>\n\t\t\t<view class=\"upload-text\">点击选择视频文件</view>\n\t\t\t<view class=\"upload-hint\">支持上传所有类型文件，大小不超过5MB</view>\n\t\t</view>\n\t</view>\n\n\t\t<!-- 封面选择区域 -->\n\t\t<view class=\"cover-area\" v-if=\"selectedVideoUrl\">\n\t\t\t<text class=\"section-title\">视频封面</text>\n\t\t\t<view class=\"cover-preview\" @click=\"chooseCover\">\n\t\t\t\t<image v-if=\"coverImage\" :src=\"coverImage\" class=\"cover-image\"></image>\n\t\t\t\t<view v-else class=\"cover-placeholder\">\n\t\t\t\t\t<uni-icons name=\"image\" size=\"40\" color=\"#ccc\"></uni-icons>\n\t\t\t\t\t<text>点击选择封面</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 上传进度 -->\n\t\t<view class=\"progress-area\" v-if=\"uploadProgress > 0\">\n\t\t\t<progress :percent=\"uploadProgress\" active-color=\"#3498db\" show-info />\n\t\t</view>\n\n\t\t<!-- 状态信息 -->\n\t\t<view class=\"status-message\" :class=\"statusClass\">\n\t\t\t{{ statusMessage }}\n\t\t</view>\n\n\t\t<!-- 操作按钮 -->\n\t\t<view class=\"action-buttons\">\n\t\t\t<button type=\"primary\" @click=\"startUpload\" :disabled=\"fileList.length === 0\">\n\t\t\t\t开始上传\n\t\t\t</button>\n\t\t\t<button type=\"default\" @click=\"clearFiles\" :disabled=\"fileList.length === 0\">\n\t\t\t\t清空文件\n\t\t\t</button>\n\t\t</view>\n\n\t\t<!-- 上传结果 -->\n\t\t<view class=\"result-area\" v-if=\"uploadResults.length > 0\">\n\t\t\t<view class=\"file-list\">\n\t\t\t\t<view v-for=\"(result, index) in uploadResults\" :key=\"index\" class=\"file-item\">\n\t\t\t\t\t<view class=\"file-icon\">\n\t\t\t\t\t\t<uni-icons name=\"file\" size=\"24\" color=\"#409eff\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"file-info\">\n\t\t\t\t\t\t<text class=\"file-name\">{{ result.name }}</text>\n\t\t\t\t\t\t<text class=\"file-size\">{{ formatFileSize(result.size) }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"file-url\">\n\t\t\t\t\t\t<text>{{ result.url }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\tref\n\t} from 'vue'\n\timport { onLoad } from '@dcloudio/uni-app'\n\timport tool from '@/utils/tool.js'\n\timport {\n\t\tapiSubmitVideo\n\t} from '@/api/apis';\n\timport {\n\t\tgetAccount\n\t} from '@/utils/request.js'\n\n\t// 接收从 video.vue 传递的 tname 参数\n\tconst routeParams = ref({\n\t\ttname: ''\n\t})\n\n\t// 页面加载时接收参数\n\tonLoad((options) => {\n\t\tif (options.tname) {\n\t\t\trouteParams.value.tname = decodeURIComponent(options.tname)\n\t\t}\n\t})\n\n\t//导航栏\n\tconst goBack = () => {\n\t\tuni.navigateBack({\n\t\t\tdelta: 1\n\t\t});\n\t};\n\n\t// 文件列表\n\tconst fileList = ref([])\n\t// 上传结果\n\tconst uploadResults = ref([])\n\t// 上传进度\n\tconst uploadProgress = ref(0)\n\t// 状态信息\n\tconst statusMessage = ref('请选择要上传的文件')\n\tconst statusClass = ref('')\n\n\t// 新增：视频信息表单\n\tconst videoTitle = ref('')\n\tconst isCharge = ref(1) // 1=免费，2=收费\n\tconst chargePrice = ref('')\n\n\t// 封面图片\n\tconst coverImage = ref('')\n\tconst coverFile = ref(null)\n\n\t// 视频预览信息\n\tconst selectedVideoUrl = ref('')\n\tconst selectedVideoName = ref('')\n\tconst selectedVideoSize = ref(0)\n\n\t// 选择视频文件（使用 chooseVideo API）\n\tconst chooseFile = () => {\n\t\tuni.chooseVideo({\n\t\t\tsourceType: ['album', 'camera'],\n\t\t\tmaxDuration: 60, // 最大时长60秒\n\t\t\tcamera: 'back',\n\t\t\tsuccess: (res) => {\n\t\t\t\tselectedVideoUrl.value = res.tempFilePath\n\t\t\t\t\n\t\t\t\t// 提取文件名，确保包含扩展名\n\t\t\t\tlet fileName = res.tempFilePath.split('/').pop() || 'video'\n\t\t\t\t// 如果没有扩展名，添加 .mp4\n\t\t\t\tif (!fileName.includes('.')) {\n\t\t\t\t\tfileName = fileName + '.mp4'\n\t\t\t\t}\n\t\t\t\t// 确保扩展名是视频格式，如果不是则改为 .mp4\n\t\t\t\tconst ext = fileName.split('.').pop()?.toLowerCase()\n\t\t\t\tif (!ext || !['mp4', 'mov', 'avi', 'm4v', 'webm'].includes(ext)) {\n\t\t\t\t\tfileName = fileName.split('.').slice(0, -1).join('.') + '.mp4'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tselectedVideoName.value = fileName\n\t\t\t\tselectedVideoSize.value = res.size || 0\n\t\t\t\t\n\t\t\t\t// 构建文件对象，用于后续上传\n\t\t\t\tfileList.value = [{\n\t\t\t\t\tpath: res.tempFilePath,\n\t\t\t\t\tname: fileName,\n\t\t\t\t\tsize: selectedVideoSize.value\n\t\t\t\t}]\n\t\t\t\t\n\t\t\t\tstatusMessage.value = `已选择视频，点击\"开始上传\"按钮上传`\n\t\t\t\tstatusClass.value = 'status-warning'\n\t\t\t},\n\t\t\tfail: () => {\n\t\t\t\tstatusMessage.value = '选择视频失败，请重试'\n\t\t\t\tstatusClass.value = 'status-error'\n\t\t\t}\n\t\t})\n\t}\n\n\t// 选择封面\n\tconst chooseCover = () => {\n\t\tuni.chooseImage({\n\t\t\tcount: 1,\n\t\t\tsizeType: ['original', 'compressed'],\n\t\t\tsourceType: ['album', 'camera'],\n\t\t\tsuccess: (res) => {\n\t\t\t\tconst tempFilePath = res.tempFilePaths[0]\n\t\t\t\tcoverImage.value = tempFilePath\n\t\t\t\tcoverFile.value = res.tempFiles[0]\n\t\t\t}\n\t\t})\n\t}\n\n\t// 开始上传\n\tconst startUpload = async () => {\n\t\tif (fileList.value.length === 0) {\n\t\t\tstatusMessage.value = '请先选择文件'\n\t\t\tstatusClass.value = 'status-error'\n\t\t\treturn\n\t\t}\n\n\t\t// 验证表单\n\t\tif (!videoTitle.value.trim()) {\n\t\t\tstatusMessage.value = '请输入视频标题'\n\t\t\tstatusClass.value = 'status-error'\n\t\t\treturn\n\t\t}\n\n\t\tif (isCharge.value === 2 && (!chargePrice.value || Number(chargePrice.value) <= 0)) {\n\t\t\tstatusMessage.value = '请输入有效的收费价格'\n\t\t\tstatusClass.value = 'status-error'\n\t\t\treturn\n\t\t}\n\n\t\tstatusMessage.value = '正在上传...'\n\t\tstatusClass.value = 'status-warning'\n\t\tuploadProgress.value = 0\n\n\t\tfor (let i = 0; i < fileList.value.length; i++) {\n\t\t\tconst fileItem = fileList.value[i]\n\t\t\ttry {\n\t\t\t\t// 处理文件对象：如果是路径，需要转换为文件对象（H5环境）\n\t\t\t\tlet uploadFile = fileItem\n\t\t\t\t// 确保文件名包含扩展名\n\t\t\t\tlet fileName = fileItem.name || selectedVideoName.value || 'video.mp4'\n\t\t\t\tif (!fileName.includes('.')) {\n\t\t\t\t\tfileName = fileName + '.mp4'\n\t\t\t\t}\n\t\t\t\tconst ext = fileName.split('.').pop()?.toLowerCase()\n\t\t\t\tif (!ext || !['mp4', 'mov', 'avi', 'm4v', 'webm'].includes(ext)) {\n\t\t\t\t\tfileName = fileName.split('.').slice(0, -1).join('.') + '.mp4'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (fileItem.path && typeof window !== 'undefined') {\n\t\t\t\t\t// H5环境：将临时路径转换为File对象\n\t\t\t\t\tconst response = await fetch(fileItem.path)\n\t\t\t\t\tconst blob = await response.blob()\n\t\t\t\t\tuploadFile = new File([blob], fileName, { type: blob.type || 'video/mp4' })\n\t\t\t\t} else if (fileItem.path) {\n\t\t\t\t\t// 小程序环境：直接使用路径\n\t\t\t\t\tuploadFile = fileItem.path\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 执行视频上传\n\t\t\t\tconst videoResult = await tool.oss.upload(uploadFile, {\n\t\t\t\t\tfolder: 'videos', // 视频存储文件夹\n\t\t\t\t\tprogress: (percentage) => {\n\t\t\t\t\t\tuploadProgress.value = Math.floor(percentage * 100)\n\t\t\t\t\t\tstatusMessage.value = `视频上传中: ${uploadProgress.value}%`\n\t\t\t\t\t},\n\t\t\t\t})\n\n\t\t\t\t// 上传封面图片到 vimg 文件夹\n\t\t\t\tlet coverUrl = \"\"\n\t\t\t\tif (coverFile.value) {\n\t\t\t\t\tstatusMessage.value = '正在上传封面...'\n\t\t\t\t\tconst coverResult = await tool.oss.upload(coverFile.value, {\n\t\t\t\t\t\tfolder: 'vimg',\n\t\t\t\t\t\tprogress: () => {}\n\t\t\t\t\t})\n\n\t\t\t\t\tcoverUrl = coverResult.name\n\t\t\t\t}\n\n\t\t\t\t// 获取彩票名称（tname）- 优先使用 URL 参数，否则从本地存储获取\n\t\t\t\tlet tname = routeParams.value.tname || ''\n\t\t\t\tif (!tname) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst currentLotteryType = uni.getStorageSync('currentLotteryType')\n\t\t\t\t\t\tif (currentLotteryType && currentLotteryType.name) {\n\t\t\t\t\t\t\ttname = currentLotteryType.name\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t// 静默处理错误\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 准备发送到后端的数据\n\t\t\t\tconst videoData = {\n\t\t\t\t\ttitle: videoTitle.value,\n\t\t\t\t\tflag: isCharge.value === 2,\n\t\t\t\t\tprice: isCharge.value === 2 ? Number(chargePrice.value) : 0,\n\t\t\t\t\taccount: getAccount(),\n\t\t\t\t\turl: videoResult.name,\n\t\t\t\t\tvimg: coverUrl || '', // 视频封面\n\t\t\t\t\ttname: tname || '' // 彩票名称，确保总是包含此字段\n\t\t\t}\n\n\t\t\t// 提交视频信息到后端\n\t\t\tconst submitResult = await apiSubmitVideo(videoData)\n\n\t\t\t\t// 添加到上传结果\n\t\t\t\tuploadResults.value.push({\n\t\t\t\t\tname: fileItem.name || selectedVideoName.value,\n\t\t\t\t\tsize: fileItem.size || selectedVideoSize.value,\n\t\t\t\t\turl: videoResult.url,\n\t\t\t\t\tcoverUrl: coverUrl\n\t\t\t\t})\n\n\t\t\t\tstatusMessage.value = `文件\"${fileItem.name || selectedVideoName.value}\"上传成功`\n\t\t\t\tstatusClass.value = 'status-success'\n\n\t\t\t\t// 如果是付费视频，保存数据并跳转到表单页面\n\t\t\t\tif (isCharge.value === 2 && submitResult.code === 200) {\n\t\t\t\t\t// 从 video.vue 的本地存储获取期号和彩票类型\n\t\t\t\t\tlet issueno = ''\n\t\t\t\t\tlet tname = ''\n\t\t\t\t\tlet opendate = ''\n\t\t\t\t\t\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst currentIssueInfo = uni.getStorageSync('currentIssueInfo')\n\t\t\t\t\t\tconst currentLotteryType = uni.getStorageSync('currentLotteryType')\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (currentIssueInfo && currentIssueInfo.number) {\n\t\t\t\t\t\t\tissueno = currentIssueInfo.number\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (currentLotteryType && currentLotteryType.name) {\n\t\t\t\t\t\t\ttname = currentLotteryType.name\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 开奖日期：如果没有，使用今天的日期\n\t\t\t\t\t\tconst today = new Date()\n\t\t\t\t\t\tconst year = today.getFullYear()\n\t\t\t\t\t\tconst month = String(today.getMonth() + 1).padStart(2, '0')\n\t\t\t\t\t\tconst day = String(today.getDate()).padStart(2, '0')\n\t\t\t\t\t\topendate = `${year}-${month}-${day}`\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t// 静默处理错误\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 提取 videoId（支持多种响应格式）\n\t\t\t\t\tlet videoId = null\n\t\t\t\t\tif (submitResult.data) {\n\t\t\t\t\t\t// 尝试多种可能的字段名\n\t\t\t\t\t\tvideoId = submitResult.data.id || \n\t\t\t\t\t\t          submitResult.data.videoId || \n\t\t\t\t\t\t          submitResult.data.video_id ||\n\t\t\t\t\t\t          submitResult.data.vId ||\n\t\t\t\t\t\t          submitResult.id ||\n\t\t\t\t\t\t          (typeof submitResult.data === 'number' ? submitResult.data : null) ||\n\t\t\t\t\t\t          (typeof submitResult.data === 'string' ? submitResult.data : null) ||\n\t\t\t\t\t\t          null\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 如果 videoId 为空，尝试从响应体的其他位置获取\n\t\t\t\t\tif (!videoId && submitResult.code === 200) {\n\t\t\t\t\t\t// 有些接口直接返回 ID 字符串或数字\n\t\t\t\t\t\tif (typeof submitResult.data === 'string' || typeof submitResult.data === 'number') {\n\t\t\t\t\t\t\tvideoId = submitResult.data\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 保存视频数据到本地存储，供 biaodan.vue 使用\n\t\t\t\t\tconst videoInfo = {\n\t\t\t\t\t\tvideoId: videoId,\n\t\t\t\t\t\ttitle: videoTitle.value,\n\t\t\t\t\t\tprice: Number(chargePrice.value) || 0,\n\t\t\t\t\t\taccount: getAccount(),\n\t\t\t\t\t\tvideoUrl: videoResult.url || `http://video.caimizm.com/${videoResult.name}`,\n\t\t\t\t\t\tcoverUrl: coverUrl || '',\n\t\t\t\t\t\tissueno: issueno, // 期号\n\t\t\t\t\t\ttname: tname, // 彩票名称\n\t\t\t\t\t\topendate: opendate, // 开奖日期\n\t\t\t\t\t\ttimestamp: Date.now()\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttry {\n\t\t\t\t\t\tuni.setStorageSync('paidVideoInfo', videoInfo)\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t// 静默处理错误\n\t\t\t\t\t}\n\n\t\t\t\t\t// 延迟跳转，让用户看到成功提示\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t// 通过 URL 参数传递 videoId（作为备用）\n\t\t\t\t\t\tlet url = '/pages/video/biaodan'\n\t\t\t\t\t\tif (videoId) {\n\t\t\t\t\t\t\turl += `?videoId=${videoId}`\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: url,\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t// 重置表单\n\t\t\t\t\t\t\t\tvideoTitle.value = ''\n\t\t\t\t\t\t\t\tisCharge.value = 1\n\t\t\t\t\t\t\t\tchargePrice.value = ''\n\t\t\t\t\t\t\t\tcoverImage.value = ''\n\t\t\t\t\t\t\t\tcoverFile.value = null\n\t\t\t\t\t\t\t\tselectedVideoUrl.value = ''\n\t\t\t\t\t\t\t\tselectedVideoName.value = ''\n\t\t\t\t\t\t\t\tselectedVideoSize.value = 0\n\t\t\t\t\t\t\t\tfileList.value = []\n\t\t\t\t\t\t\t\tuploadResults.value = []\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '跳转失败',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}, 1500)\n\t\t\t\t} else {\n\t\t\t\t\t// 免费视频：重置表单\n\t\t\t\t\tvideoTitle.value = ''\n\t\t\t\t\tisCharge.value = 1\n\t\t\t\t\tchargePrice.value = ''\n\t\t\t\t\tcoverImage.value = ''\n\t\t\t\t\tcoverFile.value = null\n\t\t\t\t\tselectedVideoUrl.value = ''\n\t\t\t\t\tselectedVideoName.value = ''\n\t\t\t\t\tselectedVideoSize.value = 0\n\t\t\t\t\t\n\t\t\t\t\t// 延迟返回上一页\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tgoBack()\n\t\t\t\t\t}, 1500)\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tstatusMessage.value = `文件\"${fileItem.name || selectedVideoName.value || '视频'}\"上传失败: ${error.message}`\n\t\t\t\tstatusClass.value = 'status-error'\n\t\t\t}\n\t\t}\n\t}\n\n\t// 清空文件\n\tconst clearFiles = () => {\n\t\tfileList.value = []\n\t\tuploadResults.value = []\n\t\tuploadProgress.value = 0\n\t\tcoverImage.value = ''\n\t\tcoverFile.value = null\n\t\tselectedVideoUrl.value = ''\n\t\tselectedVideoName.value = ''\n\t\tselectedVideoSize.value = 0\n\t\tstatusMessage.value = '已清空所有文件'\n\t\tstatusClass.value = 'status-warning'\n\t}\n\n\t// 格式化文件大小\n\tconst formatFileSize = (bytes) => {\n\t\tif (bytes === 0) return '0 Bytes'\n\t\tconst k = 1024\n\t\tconst sizes = ['Bytes', 'KB', 'MB', 'GB']\n\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k))\n\t\treturn parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n\t}\n</script>\n\n<style>\n\t.navbar {\n\t\theight: 44px;\n\t\tbackground-color: #1677ff;\n\t\tcolor: white;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 0 16px;\n\t\tmargin-bottom: 3rpx;\n\t\tposition: relative;\n\t\tz-index: 10;\n\t}\n\n\t.navbar-left {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\t}\n\n\t.navbar-left .uni-icons {\n\t\tcolor: #fff !important;\n\t\tfont-size: 22px !important;\n\t}\n\n\t.navbar-title {\n\t\tfont-size: 18px;\n\t\tfont-weight: 500;\n\t\ttext-align: center;\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tpointer-events: none;\n\t}\n\n\t.navbar-right {\n\t\twidth: 44px;\n\t\t/* 与左侧相同的宽度 */\n\t\theight: 44px;\n\t}\n\n\t.container {\n\t\tpadding: 20rpx;\n\t}\n\n\t/* 新增：表单样式 */\n\t.form-area {\n\t\tbackground: white;\n\t\tborder-radius: 8px;\n\t\tpadding: 20rpx;\n\t\tmargin-bottom: 20px;\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.form-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-bottom: 30rpx;\n\t}\n\n\t.form-label {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 500;\n\t\tmargin-bottom: 15rpx;\n\t\tcolor: #333;\n\t}\n\n\t.form-input {\n\t\tborder: 1px solid #e4e7ed;\n\t\tborder-radius: 8rpx;\n\t\tpadding: 20rpx;\n\t\tfont-size: 28rpx;\n\t}\n\n\t.radio-group {\n\t\tdisplay: flex;\n\t\tgap: 40rpx;\n\t\tfont-size: 30rpx;\n\t}\n\n\t.radio-label {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tfont-size: 30rpx;\n\t}\n\n\t.price-unit {\n\t\tmargin-left: 10rpx;\n\t\tcolor: #999;\n\t}\n\n\t.upload-area {\n\t\tborder: 2px dashed #3498db;\n\t\tborder-radius: 8px;\n\t\tpadding: 30px;\n\t\ttext-align: center;\n\t\tbackground: #f8fafc;\n\t\tmargin-bottom: 20px;\n\t\tposition: relative;\n\t}\n\n\t.upload-placeholder {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n\n\t.video-preview {\n\t\twidth: 100%;\n\t\tmax-height: 400px;\n\t\tborder-radius: 8px;\n\t\tmargin-bottom: 15px;\n\t}\n\n\t.video-info {\n\t\tmargin-top: 10px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n\n\t.video-name {\n\t\tfont-size: 16px;\n\t\tfont-weight: 500;\n\t\tcolor: #333;\n\t\tmargin-bottom: 5px;\n\t}\n\n\t.video-size {\n\t\tfont-size: 14px;\n\t\tcolor: #666;\n\t}\n\n\t.upload-text {\n\t\tfont-size: 18px;\n\t\tmargin: 10px 0;\n\t}\n\n\t.upload-hint {\n\t\tfont-size: 14px;\n\t\tcolor: #7f8c8d;\n\t}\n\n\t/* 新增：封面选择区域 */\n\t.cover-area {\n\t\tmargin-bottom: 20px;\n\t}\n\n\t.section-title {\n\t\tfont-size: 16px;\n\t\tfont-weight: bold;\n\t\tmargin-bottom: 10px;\n\t\tdisplay: block;\n\t}\n\n\t.cover-preview {\n\t\twidth: 100%;\n\t\theight: 200px;\n\t\tborder: 1px dashed #ccc;\n\t\tborder-radius: 8px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\toverflow: hidden;\n\t\tbackground-color: #f8f8f8;\n\t}\n\n\t.cover-image {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tobject-fit: cover;\n\t}\n\n\t.cover-placeholder {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tcolor: #999;\n\t\tfont-size: 14px;\n\t}\n\n\t.progress-area {\n\t\tmargin: 20px 0;\n\t}\n\n\t.status-message {\n\t\tpadding: 10px;\n\t\tborder-radius: 4px;\n\t\ttext-align: center;\n\t\tmargin-bottom: 20px;\n\t}\n\n\t.status-success {\n\t\tbackground-color: #e8f6ef;\n\t\tcolor: #27ae60;\n\t}\n\n\t.status-error {\n\t\tbackground-color: #fdecea;\n\t\tcolor: #e74c3c;\n\t}\n\n\t.status-warning {\n\t\tbackground-color: #e8f4fc;\n\t\tcolor: #3498db;\n\t}\n\n\t.action-buttons {\n\t\tdisplay: flex;\n\t\tgap: 10px;\n\t\tmargin-bottom: 20px;\n\t}\n\n\t.result-area {\n\t\tborder: 1px solid #e4e7ed;\n\t\tborder-radius: 8px;\n\t\tpadding: 15px;\n\t}\n\n\t.file-list {\n\t\tmargin-top: 10px;\n\t}\n\n\t.file-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 10px;\n\t\tborder-bottom: 1px solid #e4e7ed;\n\t}\n\n\t.file-icon {\n\t\tmargin-right: 10px;\n\t}\n\n\t.file-info {\n\t\tflex: 1;\n\t}\n\n\t.file-name {\n\t\tfont-weight: bold;\n\t}\n\n\t.file-size {\n\t\tfont-size: 12px;\n\t\tcolor: #909399;\n\t}\n\n\t.file-url {\n\t\tword-break: break-all;\n\t\tfont-size: 14px;\n\t\tcolor: #666;\n\t}\n</style>","import MiniProgramPage from 'C:/梓梅2.0/梓梅xcx/my-painting-rules-project/pages/video/oss.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","tool","getAccount","apiSubmitVideo","tname","MiniProgramPage"],"mappings":"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"}