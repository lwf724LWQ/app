{"version":3,"file":"play.js","sources":["pages/video/play.vue","D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdmlkZW8vcGxheS52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"wrapper\">\r\n\t\t\t<view class=\"navbar\">\r\n\t\t\t\t<!-- 返回按钮 -->\r\n\t\t\t\t<view class=\"navbar-left\" @click=\"goBack\">\r\n\t\t\t\t   <uni-icons type=\"left\" size=\"30\"></uni-icons>\r\n\t\t\t\t </view>\r\n\t\t\t\t <!-- 标题 -->\r\n\t\t\t\t <view class=\"navbar-title\">{{ videoData.title }}</view>\r\n\t\t\t</view>\r\n\t\t<!-- 视频播放器容器 -->\r\n\t\t<view class=\"video-container\">\r\n\t\t\t<video :src=\"videoData.src\" :controls=\"isPlaying\" :autoplay=\"false\" object-fit=\"cover\" class=\"video-player\"\r\n\t\t\t\tid=\"videoPlayer\" @play=\"onVideoPlay\" @pause=\"onVideoPause\"></video>\r\n\r\n\t\t\t<!-- 播放按钮遮罩层 -->\r\n\t\t\t<view class=\"play-overlay\" v-if=\"showPlayButton\" @click=\"playVideo\">\r\n\t\t\t\t<view class=\"play-button\">\r\n\t\t\t\t\t<uni-icons type=\"play-filled\" size=\"60\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 购买按钮（如果有价格） -->\r\n\t\t\t<view class=\"buy-overlay\" v-if=\"videoData.price && videoData.price > 0\" @click=\"handleBuyClick\">\r\n\t\t\t\t<view class=\"buy-button\">\r\n\t\t\t\t\t<text class=\"buy-text\">¥{{ videoData.price }}购买</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 打赏和点赞区域 -->\r\n\t\t<view class=\"interaction-bar\">\r\n\t\t\t<view class=\"reward-interaction\" @click=\"goToRewardPage\">\r\n\t\t\t\t<uni-icons type=\"gift-filled\" size=\"20\" color=\"#FF9500\"></uni-icons>\r\n\t\t\t\t<text class=\"interaction-text\">打赏 0</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"like-interaction\" :class=\"{ 'liked': videoData.isLiked }\" @click=\"toggleLike\">\r\n\t\t\t\t<uni-icons :type=\"videoData.isLiked ? 'heart-filled' : 'heart'\" size=\"20\"\r\n\t\t\t\t\t:color=\"videoData.isLiked ? '#ff4757' : '#FF9500'\"></uni-icons>\r\n\t\t\t\t<text class=\"interaction-text\">点赞 {{ videoData.likeCount }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 作者和视频信息 -->\r\n\t\t<view class=\"video-info-card\">\r\n\t\t\t<view class=\"info-header\">\r\n\t\t\t\t<image :src=\"getAvatarUrl(userInfo.himg)\" class=\"author-avatar\"></image>\r\n\t\t\t\t<view class=\"author-info\">\r\n\t\t\t\t\t<text class=\"author-name\">{{ userInfo.uname }}出品</text>\r\n\t\t\t\t\t<text class=\"video-count\">视频</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"header-actions\">\r\n\t\t\t\t\t<button class=\"teacher-btn\">讲师主页</button>\r\n\t\t\t\t\t<button class=\"follow-btn\">+ 关注</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"video-title-section\">\r\n\t\t\t\t<view class=\"price-tag\" v-if=\"videoData.price && videoData.price > 0\">\r\n\t\t\t\t\t<text>¥{{ videoData.price }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"video-title-text\">{{ videoData.title }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部按钮 -->\r\n\t\t<view class=\"bottom-bar\">\r\n\t\t\t<view class=\"bottom-left\">\r\n\t\t\t\t<view class=\"icon-item\">\r\n\t\t\t\t\t<uni-icons type=\"home\" size=\"24\" color=\"#FFD700\"></uni-icons>\r\n\t\t\t\t\t<text class=\"icon-label\">首页</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<button class=\"bottom-buy-btn\" @click=\"handleBuyClick\">\r\n\t\t\t\t{{ isFreeVideo ? '开始学习' : '点击购买' }}\r\n\t\t\t</button>\r\n\t\t</view>\r\n\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tcomputed,\r\n\t\tonMounted\r\n\t} from 'vue';\r\n\timport {\r\n\t\tonLoad\r\n\t} from '@dcloudio/uni-app';\r\n\timport {\r\n\t\tapiGetLikelist,\r\n\t\tapiGetIsLike,\r\n\t\tapiCheckVideoPayment,\r\n\t\tapiUserimg\r\n\t} from '@/api/apis';\r\n\timport {\r\n\t\tgetToken,\r\n\t\tgetAccount\r\n\t} from '@/utils/request.js';\r\n\timport {\r\n\t\tuseVideoStore\r\n\t} from '@/stores/video.js'\r\n\r\n\t// 初始化仓库\r\n\tconst videoStore = useVideoStore()\r\n\r\n\t// 视频数据\r\n\tconst videoData = ref({\r\n\t\tid: '',\r\n\t\ttitle: '',\r\n\t\tsrc: '',\r\n\t\taccount: '',\r\n\t\tlikeCount: 0,\r\n\t\tisLiked: false\r\n\t});\r\n\r\n\t// 添加响应式数据\r\n\tconst showPlayButton = ref(true) // 控制播放按钮显示\r\n\tconst isPlaying = ref(false) // 视频播放状态\r\n\tconst videoContext = ref(null) // 视频上下文\r\n\r\n\t// 计算是否为免费视频\r\n\tconst isFreeVideo = computed(() => {\r\n\t\treturn !videoData.value.flag || videoData.value.price === 0\r\n\t})\r\n\t//用户头像，名字接口数据接收\r\n\tconst userInfo = ref({\r\n\t\tuname: '',\r\n\t\thimg: ''\r\n\t});\r\n\r\n\t// 获取头像的方法\r\n\tconst getAvatarUrl = (himg) => {\r\n\t\tif (!himg) return ''; // 如果没有头像，返回空字符串\r\n\t\treturn `http://video.caimizm.com/himg/${himg}`;\r\n\t};\r\n\r\n\t// 获取路由参数\r\n\tonLoad(async (options) => {\r\n\t\tif (options.id) {\r\n\t\t\t// 从 Pinia store 获取视频数据\r\n\t\t\tconst currentVideo = videoStore.getCurrentVideo\r\n\t\t\tif (currentVideo && currentVideo.id === options.id) {\r\n\t\t\t\t// 使用 store 中的视频数据\r\n\t\t\t\tvideoData.value = {\r\n\t\t\t\t\tid: currentVideo.id,\r\n\t\t\t\t\ttitle: currentVideo.title,\r\n\t\t\t\t\tsrc: currentVideo.src,\r\n\t\t\t\t\taccount: currentVideo.account,\r\n\t\t\t\t\tlikeCount: currentVideo.likeCount || 0,\r\n\t\t\t\t\tisLiked: currentVideo.isLiked || false,\r\n\t\t\t\t\tflag: currentVideo.flag,\r\n\t\t\t\t\tprice: currentVideo.price,\r\n\t\t\t\t}\r\n\t\t\t\t// 调用apiUserimg获取用户信息\r\n\t\t\t\tawait getUserInfo(currentVideo.account);\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t// 在onMounted中初始化视频上下文\r\n\tonMounted(() => {\r\n\t\t// 创建视频上下文\r\n\t\tvideoContext.value = uni.createVideoContext('videoPlayer')\r\n\t})\r\n\r\n\t//导航栏\r\n\tconst goBack = () => {\r\n\t\tuni.navigateBack({\r\n\t\t\tdelta: 1\r\n\t\t});\r\n\t};\r\n\r\n\t// 获取用户信息\r\n\tconst getUserInfo = async (account) => {\r\n\t\ttry {\r\n\t\t\t// 准备请求参数\r\n\t\t\tconst params = {\r\n\t\t\t\taccount: account\r\n\t\t\t};\r\n\r\n\t\t\tconst headers = {};\r\n\t\t\tconst token = getToken();\r\n\t\t\tif (token) {\r\n\t\t\t\theaders['Authorization'] = token;\r\n\t\t\t}\r\n\r\n\t\t\t// 调用apiUserimg接口\r\n\t\t\tconst response = await apiUserimg(params, headers);\r\n\r\n\t\t\tif (response.code === 200) {\r\n\t\t\t\t// 更新用户信息\r\n\t\t\t\tuserInfo.value = {\r\n\t\t\t\t\tuname: response.data.uname,\r\n\t\t\t\t\thimg: response.data.himg\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error('获取用户信息失败:', response.message);\r\n\t\t\t\t// 使用默认信息\r\n\t\t\t\tuserInfo.value = {\r\n\t\t\t\t\tuname: account,\r\n\t\t\t\t\thimg: ''\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('获取用户信息异常:', error);\r\n\t\t\t// 使用默认信息\r\n\t\t\tuserInfo.value = {\r\n\t\t\t\tuname: account,\r\n\t\t\t\thimg: ''\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t// 播放视频方法\r\n\tconst playVideo = async () => {\r\n\t\t// 检查是否登录\r\n\t\tconst token = getToken();\r\n\t\tif (!token) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请先登录',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t});\r\n\t\t\t}, 1500);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 判断是否为免费视频\r\n\t\tif (!videoData.value.flag || videoData.value.price === 0) {\r\n\t\t\t// 免费视频直接播放\r\n\t\t\tif (videoContext.value) {\r\n\t\t\t\tvideoContext.value.play()\r\n\t\t\t\tisPlaying.value = true\r\n\t\t\t\tshowPlayButton.value = false\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 检查视频付费状态\r\n\t\ttry {\r\n\t\t\t// 调用付费检查API\r\n\t\t\tconst paymentCheck = await apiCheckVideoPayment({\r\n\t\t\t\tvideoId: videoData.value.id,\r\n\t\t\t\taccount: getAccount()\r\n\t\t\t});\r\n\r\n\t\t\tif (paymentCheck.data) {\r\n\t\t\t\t// 用户已付费，播放视频\r\n\t\t\t\tif (videoContext.value) {\r\n\t\t\t\t\tvideoContext.value.play()\r\n\t\t\t\t\tisPlaying.value = true\r\n\t\t\t\t\tshowPlayButton.value = false\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// 用户未付费，显示付费提示\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '付费视频',\r\n\t\t\t\t\tcontent: `观看此视频需要支付${videoData.value.price}金币`,\r\n\t\t\t\t\tconfirmText: '立即支付',\r\n\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t// 这里调用支付接口\r\n\t\t\t\t\t\t\tawait payForVideo();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: error.message || '查询失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst payForVideo = async () => {\r\n\t\t// 准备支付数据\r\n\t\tconst paymentData = {\r\n\t\t\tinfo: `视频: ${videoData.value.title}`,\r\n\t\t\tamount: videoData.value.price,\r\n\t\t\ttype: 3, // 视频付费类型\r\n\t\t\taccount: getAccount(),\r\n\t\t\tpayType: 0, // 默认微信支付\r\n\t\t\tchannel: 0, // 微信小程序\r\n\t\t\tvideoId: videoData.value.id // 添加视频ID参数\r\n\t\t};\r\n\r\n\t\t// 跳转到支付页面\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/video/payment?${objectToQueryString(paymentData)}`\r\n\t\t});\r\n\t};\r\n\r\n\t// 将对象转换为查询字符串\r\n\tconst objectToQueryString = (obj) => {\r\n\t\treturn Object.keys(obj).map(key => {\r\n\t\t\treturn `${encodeURIComponent(key)}=${encodeURIComponent(obj[key])}`;\r\n\t\t}).join('&');\r\n\t};\r\n\r\n\t// 视频开始播放事件\r\n\tconst onVideoPlay = () => {\r\n\t\tisPlaying.value = true\r\n\t\tshowPlayButton.value = false\r\n\t}\r\n\r\n\t// 视频暂停事件\r\n\tconst onVideoPause = () => {\r\n\t\tisPlaying.value = false\r\n\t\tshowPlayButton.value = true\r\n\t}\r\n\r\n\t// 处理购买按钮点击\r\n\tconst handleBuyClick = async () => {\r\n\t\tif (!videoData.value.flag || videoData.value.price === 0) {\r\n\t\t\t// 免费视频直接播放\r\n\t\t\tif (videoContext.value) {\r\n\t\t\t\tvideoContext.value.play()\r\n\t\t\t\tisPlaying.value = true\r\n\t\t\t\tshowPlayButton.value = false\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// 付费视频，跳转到支付\r\n\t\t\tawait payForVideo()\r\n\t\t}\r\n\t}\r\n\r\n\t// 跳转到打赏页面\r\n\tconst goToRewardPage = () => {\r\n\t\t// 检查登录状态\r\n\t\tconst token = getToken();\r\n\t\tif (!token) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请先登录',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t});\r\n\t\t\t}, 1500);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 跳转到打赏页面，传递视频信息\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/video/reward?videoId=${videoData.value.id}&author=${encodeURIComponent(videoData.value.account)}&title=${encodeURIComponent(videoData.value.title)}&authorAvatar=${encodeURIComponent(userInfo.value.himg)}&authorName=${encodeURIComponent(userInfo.value.uname)}`\r\n\t\t});\r\n\t};\r\n\r\n\t// 点赞功能\r\n\tconst toggleLike = async () => {\r\n\t\ttry {\r\n\t\t\t// 保存原始状态，以便在请求失败时恢复\r\n\t\t\tconst originalIsLiked = videoData.value.isLiked;\r\n\t\t\tconst originalLikeCount = videoData.value.likeCount;\r\n\r\n\t\t\t// 立即更新UI，提供更好的用户体验\r\n\t\t\tvideoData.value.isLiked = !videoData.value.isLiked;\r\n\t\t\tvideoData.value.likeCount = videoData.value.isLiked ?\r\n\t\t\t\tvideoData.value.likeCount + 1 :\r\n\t\t\t\tvideoData.value.likeCount - 1;\r\n\r\n\t\t\t// 调用点赞API\r\n\t\t\tconst response = await apiGetIsLike({\r\n\t\t\t\tid: videoData.value.id,\r\n\t\t\t\taccount: getAccount(),\r\n\t\t\t\tisLiked: videoData.value.isLiked\r\n\t\t\t});\r\n\r\n\t\t\tconsole.log('点赞操作成功');\r\n\r\n\t\t\t// 获取点赞列表（可选）\r\n\t\t\tconst likeList = await apiGetLikelist(getAccount());\r\n\t\t\tconsole.log(likeList);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('点赞操作失败:', error);\r\n\r\n\t\t\t// 恢复原始状态\r\n\t\t\tvideoData.value.isLiked = originalIsLiked;\r\n\t\t\tvideoData.value.likeCount = originalLikeCount;\r\n\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '操作失败，请重试',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.wrapper {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\r\n\t.navbar {\r\n\t\theight: 44px;\r\n\t\tbackground-color: #1677ff;\r\n\t\tcolor: white;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 0 16px;\r\n\t\tmargin-bottom: 3rpx;\r\n\t\tposition: relative;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.navbar-left {\r\n\t\twidth: 44px;\r\n\t\theight: 44px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-start;\r\n\t\tz-index: 11;\r\n\t}\r\n\r\n\t.navbar-left .uni-icons {\r\n\t\tcolor: #fff !important;\r\n\t\tfont-size: 22px !important;\r\n\t}\r\n\r\n\t.navbar-title {\r\n\t\tfont-size: 18px;\r\n\t\tfont-weight: 500;\r\n\t\ttext-align: center;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t.container {\r\n\t\tpadding: 20rpx;\r\n\t\tpadding-bottom: 120rpx;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\r\n\t/* 视频容器样式 */\r\n\t.video-container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 600rpx;\r\n\t\tborder-radius: 0;\r\n\t\toverflow: hidden;\r\n\t\tbackground-color: #000;\r\n\t}\r\n\r\n\t.video-player {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/* 播放按钮遮罩层 */\r\n\t.play-overlay {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.3);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.play-button {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\ttransition: transform 0.3s ease;\r\n\t}\r\n\r\n\t.play-button:active {\r\n\t\ttransform: scale(0.9);\r\n\t}\r\n\r\n\t/* 购买按钮遮罩 */\r\n\t.buy-overlay {\r\n\t\tposition: absolute;\r\n\t\tbottom: 30rpx;\r\n\t\tright: 30rpx;\r\n\t\tz-index: 11;\r\n\t}\r\n\r\n\t.buy-button {\r\n\t\tbackground-color: #FF9500;\r\n\t\tpadding: 12rpx 24rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t}\r\n\r\n\t.buy-text {\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 26rpx;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t/* 打赏和点赞交互栏 */\r\n\t.interaction-bar {\r\n\t\tdisplay: flex;\r\n\t\tpadding: 20rpx 0;\r\n\t\tbackground-color: #fff;\r\n\t\tgap: 40rpx;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.reward-interaction,\r\n\t.like-interaction {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.interaction-text {\r\n\t\tcolor: #FF9500;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.like-interaction.liked .interaction-text {\r\n\t\tcolor: #ff4757;\r\n\t}\r\n\r\n\t/* 视频信息卡片 */\r\n\t.video-info-card {\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\r\n\t.info-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.author-avatar {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.author-info {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.author-name {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #333;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.video-count {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.header-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\r\n\t.teacher-btn,\r\n\t.follow-btn {\r\n\t\tpadding: 8rpx 16rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t}\r\n\r\n\t.teacher-btn {\r\n\t\tbackground-color: transparent;\r\n\t\tborder: 1rpx solid #FF9500;\r\n\t\tcolor: #FF9500;\r\n\t}\r\n\r\n\t.follow-btn {\r\n\t\tbackground-color: #FF9500;\r\n\t\tcolor: #fff;\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t/* 视频标题区域 */\r\n\t.video-title-section {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\r\n\t.price-tag {\r\n\t\tbackground-color: #ff4757;\r\n\t\tpadding: 6rpx 12rpx;\r\n\t\tborder-radius: 4rpx;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.video-title-text {\r\n\t\tflex: 1;\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #333;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\r\n\t/* 底部购买栏 */\r\n\t.bottom-bar {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tdisplay: flex;\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 20rpx;\r\n\t\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.bottom-left {\r\n\t\tdisplay: flex;\r\n\t\tgap: 40rpx;\r\n\t}\r\n\r\n\t.icon-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 4rpx;\r\n\t}\r\n\r\n\t.icon-label {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.bottom-buy-btn {\r\n\t\tflex: 1;\r\n\t\tbackground-color: #FF9500;\r\n\t\tcolor: #fff;\r\n\t\tborder: none;\r\n\t\tborder-radius: 50rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tmargin-left: 40rpx;\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/Administrator/Desktop/my-painting-rules-project/pages/video/play.vue'\nwx.createPage(MiniProgramPage)"],"names":["useVideoStore","ref","computed","onLoad","onMounted","uni","getToken","apiUserimg","apiCheckVideoPayment","getAccount","originalIsLiked","originalLikeCount","apiGetIsLike","apiGetLikelist"],"mappings":"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"}