{"version":3,"file":"drawLine.js","sources":["pages/juWang/drawLine/drawLine.vue","D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvanVXYW5nL2RyYXdMaW5lL2RyYXdMaW5lLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->\r\n\t\t<custom-juwang-nav-bar title=\"drawLine\" :onSubmit=\"handleSubmit\" @child-event=\"handleChildEvent\"\r\n\t\t\t@share-event=\"handleShareEvent\"></custom-juwang-nav-bar>\r\n\t\t<!-- <draw-select ref=\"child\" @message-from-child=\"handleMessage\"></draw-select> -->\r\n\t\t<!-- ‰øÆÊîπÁ∫øÊù°È¢úËâ≤,Á≤óÁªÜÁöÑ -->\r\n\t\t<select-color @select-color=\"handleColorMessage\" @select-line-width=\"handleLineMessage\"></select-color>\r\n\t\t<view class=\"modal-overlay\" v-if=\"showNumberSelector\" @click=\"closeNumberSelector\">\r\n\t\t\t<view class=\"modal-content\" @click.stop>\r\n\t\t\t\t<NumberSelector class='boxNumber' ref=\"numberSelector\" @close=\"closeNumberSelector\"\r\n\t\t\t\t\t@confirm=\"handleConfirmSelection\" :groupIndex=\"selectedGroupIndex\" :numIndex=\"selectedNumIndex\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- ----------------------------------------------------------------------------------------------------------------- -->\r\n\t\t<!-- Ë°®Ê†ºÊ†∑ÂºèÊï∞Â≠óÂÆπÂô® -->\r\n\t\t<view class=\"numbers-table-container\">\r\n\t\t\t<table class=\"numbers-table\">\r\n\t\t\t\t<!-- ÂàóÂÆΩÂÆö‰πâ -->\r\n\t\t\t\t<colgroup>\r\n\t\t\t\t\t<col class=\"col-def-1\"> <!-- Á¨¨‰∏ÄÂàó -->\r\n\t\t\t\t\t<col class=\"col-def-2\"> <!-- Á¨¨‰∫åÂàóÔºàÂèòÁ™ÑÔºâ -->\r\n\t\t\t\t\t<col class=\"col-def-3\"> <!-- Á¨¨‰∏âÂàó -->\r\n\t\t\t\t\t<col class=\"col-def-4\"> <!-- Á¨¨ÂõõÂàó -->\r\n\t\t\t\t\t<col class=\"col-def-5\"> <!-- Á¨¨‰∫îÂàó -->\r\n\t\t\t\t\t<col class=\"col-def-6\"> <!-- Á¨¨ÂÖ≠Âàó -->\r\n\t\t\t\t\t<col class=\"col-def-7\"> <!-- Á¨¨‰∏ÉÂàóÔºàÂèòÁ™ÑÔºâ -->\r\n\t\t\t\t</colgroup>\r\n\r\n\t\t\t\t<!-- Ë°®Ê†ºÂÜÖÂÆπ -->\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr v-for=\"(group, groupIndex) in twocounterStore.List\" :key=\"group.qishu\" class=\"table-row\"\r\n\t\t\t\t\t\t:data-qishu=\"group.qishu\" :data-group-index=\"groupIndex\"\r\n\t\t\t\t\t\t:class=\"{ 'target-row': isTargetRow(groupIndex) }\">\r\n\t\t\t\t\t\t<!-- ÊúüÊï∞Âàó (Á¨¨‰∏ÄÂàó) - ‰∏çÂèØÁªòÂà∂Âå∫Âüü -->\r\n\t\t\t\t\t\t<td class=\"table-cell col-1 non-drawable-area\">\r\n\t\t\t\t\t\t\t<view class=\"cell-content\">\r\n\t\t\t\t\t\t\t\t{{ group.qishu }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td v-for=\"(num, numIndex) in group.numbers\" :key=\"numIndex\" class=\"table-cell\"\r\n\t\t\t\t\t\t\t:class=\"'col-' + (2 + numIndex) + (isTargetRow(groupIndex) ? ' clickable' : '')\"\r\n\t\t\t\t\t\t\t@click=\"handleCellClick(groupIndex, numIndex)\">\r\n\t\t\t\t\t\t\t<view class=\"number-item\" :class=\"{ highlighted: isHighlighted(groupIndex, numIndex) }\"\r\n\t\t\t\t\t\t\t\t:data-group-index=\"groupIndex\" :data-num-index=\"numIndex\" ref=\"numberRefs\">\r\n\t\t\t\t\t\t\t\t{{ num }}\r\n\t\t\t\t\t\t\t\t<!-- Ê∑ªÂä†ÂÜÖÂÆπÂÆπÂô® -->\r\n\t\t\t\t\t\t\t\t<div class=\"grid-content\"></div>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\r\n\t\t\t<!-- ÁªòÂõæCanvas -->\r\n\t\t\t<canvas type=\"2d\" canvas-id=\"drawCanvas\" class=\"draw-canvas\" @touchstart.stop=\"onCanvasStart\"\r\n\t\t\t\t@touchmove.stop=\"onCanvasMove\" @touchend.stop=\"onCanvasEnd\" @mousedown=\"onCanvasStart\"\r\n\t\t\t\t@mousemove=\"onCanvasMove\" @mouseup=\"onCanvasEnd\"\r\n\t\t\t\t:style=\"{ pointerEvents: canvasPointerEvents }\"></canvas>\r\n\r\n\t\t\t<!-- ‰∏¥Êó∂ÁªòÂà∂Â±Ç -->\r\n\t\t\t<canvas type=\"2d\" canvas-id=\"tempCanvas\" class=\"temp-canvas\"></canvas>\r\n\r\n\t\t\t<!-- ÊñáÂ≠óÊ†áÊ≥®ÂÆπÂô® -->\r\n\t\t\t<view class=\"text-container\">\r\n\t\t\t\t<view v-for=\"(label, idx) in textLabels\" :key=\"label.id\" class=\"text-label\"\r\n\t\t\t\t\t:style=\"getLabelStyle(label)\" @touchstart.stop=\"handleLabelTouchStart(idx, $event)\"\r\n\t\t\t\t\t@touchmove.stop=\"handleLabelTouchMove(idx, $event)\"\r\n\t\t\t\t\t@touchend.stop=\"handleLabelTouchEnd(idx, $event)\" @click.stop=\"handleLabelClick(idx)\"\r\n\t\t\t\t\t@dblclick.stop=\"handleLabelDblClick(idx)\" :data-index=\"idx\">\r\n\t\t\t\t\t<span :contenteditable=\"label.editing\" @blur=\"finishEditLabel(idx)\"\r\n\t\t\t\t\t\t@input=\"updateLabelText(idx, $event)\" class=\"text-content\" :spellcheck=\"false\">\r\n\t\t\t\t\t\t{{ label.text }}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t\t<image src=\"/static/clock.png\" class=\"switch-mode-css\" @click=\"switchDrawMode('none')\"\r\n\t\t\tv-show=\"canvasPointerValue\"></image>\r\n\t\t<image src=\"/static/scroll.png\" class=\"switch-mode-css\" @click=\"switchDrawMode('auto')\"\r\n\t\t\tv-show=\"!canvasPointerValue\"></image>\r\n\t\t<!-- FabÊåâÈíÆÁªÑ -->\r\n\t\t<view class=\"fab-wrapper\">\r\n\t\t\t<!-- ‰∏ªÊåâÈíÆ -->\r\n\t\t\t<view class=\"fab-main\" @click.stop=\"toggleFab\">\r\n\t\t\t\t<i class=\"fab-main-icon\">{{ isFabOpen ? '‚úï' : '+' }}</i>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- Â≠êÊåâÈíÆÂÆπÂô® -->\r\n\t\t\t<view class=\"fab-items-o\" :class=\"{ 'fab-items fab-open': isFabOpen }\">\r\n\t\t\t\t<!-- Â≠êÊåâÈíÆ - Ê®°ÂºèÂàáÊç¢ -->\r\n\t\t\t\t<view class=\"fab-item\" @click.stop=\"switchMode('freeDraw')\">\r\n\t\t\t\t\t<div class=\"fab-item-inner\">\r\n\t\t\t\t\t\t<i class=\"fab-item-icon\">‚úèÔ∏è</i>\r\n\t\t\t\t\t\t<text class=\"fab-item-text\">Êõ≤Á∫ø</text>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"fab-item\" @click.stop=\"switchMode('straightLine')\">\r\n\t\t\t\t\t<div class=\"fab-item-inner\">\r\n\t\t\t\t\t\t<i class=\"fab-item-icon\">‚ÄîÔ∏è</i>\r\n\t\t\t\t\t\t<text class=\"fab-item-text\">Áõ¥Á∫ø</text>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"fab-item\" @click.stop=\"switchMode('rectangle')\">\r\n\t\t\t\t\t<div class=\"fab-item-inner\">\r\n\t\t\t\t\t\t<i class=\"fab-item-icon\">‚ñ°</i>\r\n\t\t\t\t\t\t<text class=\"fab-item-text\">Áü©ÂΩ¢</text>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"fab-item\" @click.stop=\"switchMode('circle')\">\r\n\t\t\t\t\t<div class=\"fab-item-inner\">\r\n\t\t\t\t\t\t<i class=\"fab-item-icon\">‚óã</i>\r\n\t\t\t\t\t\t<text class=\"fab-item-text\">ÂúÜÂΩ¢</text>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"fab-item\" @click.stop=\"switchMode('smart')\">\r\n\t\t\t\t\t<div class=\"fab-item-inner\">\r\n\t\t\t\t\t\t<i class=\"fab-item-icon\">üß†</i>\r\n\t\t\t\t\t\t<text class=\"fab-item-text\">Êô∫ËÉΩÊ®°Âºè</text>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"fab-item\" @click.stop=\"switchMode('eraser')\">\r\n\t\t\t\t\t<div class=\"fab-item-inner\">\r\n\t\t\t\t\t\t<i class=\"fab-item-icon\">üßΩ</i>\r\n\t\t\t\t\t\t<text class=\"fab-item-text\">Ê©°ÁöÆÊì¶</text>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- Â≠êÊåâÈíÆ - Êìç‰ΩúÊåâÈíÆ -->\r\n\t\t\t\t<view class=\"fab-item fab-item-accent\" @click.stop=\"addTextLabel\">\r\n\t\t\t\t\t<div class=\"fab-item-inner\">\r\n\t\t\t\t\t\t<i class=\"fab-item-icon\">‚ûï</i>\r\n\t\t\t\t\t\t<text class=\"fab-item-text\">Ê∑ªÂä†ÊñáÂ≠ó</text>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- Â≠êÊåâÈíÆ - Êìç‰ΩúÊåâÈíÆ -->\r\n\t\t\t\t<view class=\"fab-item fab-item-accent\" @click.stop=\"clickBlank\">\r\n\t\t\t\t\t<div class=\"fab-item-inner\">\r\n\t\t\t\t\t\t<i class=\"fas fa-square\">Á©∫</i>\r\n\t\t\t\t\t\t<text class=\"fab-item-text\">Á©∫ÁôΩÁÇπÂáª</text>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonUnload,\r\n\t\tonReachBottom\r\n\t} from \"@dcloudio/uni-app\"\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted,\r\n\t\tgetCurrentInstance,\r\n\t\tnextTick,\r\n\t\twatch,\r\n\t\treactive\r\n\t} from 'vue';\r\n\timport html2canvas from 'html2canvas';\r\n\timport useDrawing from './useFunc/useDrawing';\r\n\timport useTableData from './useFunc/useTableData';\r\n\timport useTextLabels from './useFunc/useTextLabels';\r\n\timport useFabActions from './useFunc/useFabActions';\r\n\timport useScreenshot from './useFunc/useScreenshot';\r\n\timport {\r\n\t\tusetwoCounterStore\r\n\t} from \"@/stores/twocounter.js\";\r\n\timport {\r\n\t\tuseCounterStore\r\n\t} from \"@/stores/counter.js\";\r\n\timport NumberSelector from '../../../components/NumberSelector/NumberSelector.vue';\r\n\t// ÂàõÂª∫Êú¨Âú∞ÁöÑ onCanvasEnd Â§ÑÁêÜÂáΩÊï∞\r\n\tconst onCanvasEnd = (event) => {\r\n\t\t// È¶ñÂÖàË∞ÉÁî®‰ªé useDrawing ÂØºÂÖ•ÁöÑÂáΩÊï∞\r\n\t\tdrawingOnCanvasEnd(event);\r\n\t\t// ÁÑ∂ÂêéÊ∑ªÂä†ÊÇ®ÁöÑËá™ÂÆö‰πâÈÄªËæë\r\n\t\tconst endPoint = currentShape.value.end;\r\n\t\tconst numberPos = checkPointOnNumber(endPoint);\r\n\t};\r\n\r\n\r\n\t//‰∏ãÈù¢ÊòØÂÖ≥‰∫éÁªÑ‰ª∂Êï∞Â≠óÈÄâÊã©Âô®ÁöÑÂ§ÑÁêÜ\r\n\t// Ê∑ªÂä†Áä∂ÊÄÅÊéßÂà∂\r\n\tconst showNumberSelector = ref(false);\r\n\t//Â≠òÂÇ®Ê†ºÂ≠ê‰ø°ÊÅØÔºåÂ∞Ü‰ø°ÊÅØ‰º†ÁªôÊï∞Â≠óÈÄâÊã©Âô®ÔºåÊñπ‰æø‰øÆÊîπÊù°‰ª∂ÈÄâÊã©\r\n\tconst selectedGroupIndex = ref(null);\r\n\tconst selectedNumIndex = ref(null);\r\n\r\n\tconst counterStore = useCounterStore();\r\n\tconsole.log(counterStore)\r\n\tconst classifyList = ref([]);\r\n\t//Â≠òÂÇ®È¢ÑËßàÊ†∑Âºè‰ø°ÊÅØÁöÑ\r\n\tconst gridStyles = ref({});\r\n\t// ÊâìÂºÄÊï∞Â≠óÈÄâÊã©Âô®\r\n\tconst openNumberSelector = (groupIndex, numIndex) => {\r\n\t\tselectedGroupIndex.value = groupIndex;\r\n\t\tselectedNumIndex.value = numIndex;\r\n\t\tshowNumberSelector.value = true;\r\n\t};\r\n\r\n\r\n\t// ÂÖ≥Èó≠Êï∞Â≠óÈÄâÊã©Âô®\r\n\tconst closeNumberSelector = () => {\r\n\t\tshowNumberSelector.value = false;\r\n\t};\r\n\r\n\t// Â§ÑÁêÜÁ°ÆËÆ§ÈÄâÊã©\r\n\tconst handleConfirmSelection = (data) => {\r\n\t\tconsole.log('Á°ÆËÆ§ÈÄâÊã©:', data);\r\n\t\tconsole.log('Ê†ºÂ≠ê‰ΩçÁΩÆ:', selectedGroupIndex.value, selectedNumIndex.value);\r\n\t\tconst key = `${data.groupIndex}-${data.numIndex}`;\r\n\t\tgridStyles.value[key] = {\r\n\t\t\tpreviewType: data.previewType,\r\n\t\t\tcontent: {\r\n\t\t\t\tselectedCondition: data.selectedCondition,\r\n\t\t\t\tselectedNumbers: data.selectedNumbers,\r\n\t\t\t\tselecteddoubNumber: data.selecteddoubNumber\r\n\t\t\t}\r\n\t\t};\r\n\t\tconsole.log(gridStyles.value) //20-2  + ÂÜÖÂÆπ\r\n\t\tcloseNumberSelector();\r\n\t\t// Â∫îÁî®Ê†∑ÂºèÂà∞ÂØπÂ∫îÊ†ºÂ≠ê\r\n\t\tapplyStyleToGrid(data.groupIndex, data.numIndex);\r\n\t\t// ËøôÈáåÂèØ‰ª•Â§ÑÁêÜÈÄâÊã©ÁöÑÊï∞ÊçÆ\r\n\t};\r\n\t// Â∫îÁî®Ê†∑ÂºèÂà∞Ê†ºÂ≠ê\r\n\tconst applyStyleToGrid = (groupIndex, numIndex) => {\r\n\t\tconst key = `${groupIndex}-${numIndex}`;\r\n\t\tconst styleData = gridStyles.value[key];\r\n\t\tif (!styleData) return;\r\n\t\t// ÊâæÂà∞ÂØπÂ∫îÁöÑÊ†ºÂ≠êÂÖÉÁ¥†\r\n\t\tconst gridElement = document.querySelector(\r\n\t\t\t`[data-group-index=\"${groupIndex}\"][data-num-index=\"${numIndex}\"]`\r\n\t\t);\r\n\t\tif (!gridElement) return;\r\n\t\t// Ê∏ÖÈô§‰πãÂâçÁöÑÊ†∑Âºè\r\n\t\tgridElement.classList.remove('solid', 'hollow');\r\n\r\n\t\t// Â∫îÁî®Êñ∞Ê†∑Âºè\r\n\t\tif (styleData.previewType === 'solid') {\r\n\t\t\tgridElement.classList.add('solid');\r\n\t\t} else {\r\n\t\t\tgridElement.classList.add('hollow');\r\n\t\t}\r\n\t\t// Êõ¥Êñ∞ÂÜÖÂÆπ\r\n\t\tconst contentElement = gridElement.querySelector('.grid-content');\r\n\t\tconsole.log(styleData.content.selectedCondition);\r\n\t\tif (contentElement) {\r\n\t\t\tcontentElement.innerHTML = '';\r\n\r\n\t\t\tif (styleData.content.selectedCondition) {\r\n\t\t\t\tconst conditionElement = document.createElement('div');\r\n\t\t\t\tconditionElement.textContent = styleData.content.selectedCondition;\r\n\t\t\t\tcontentElement.appendChild(conditionElement);\r\n\t\t\t}\r\n\r\n\t\t\tif (styleData.content.selectedNumbers && styleData.content.selectedNumbers.length > 0) {\r\n\t\t\t\tconst numbersElement = document.createElement('div');\r\n\t\t\t\tnumbersElement.textContent = styleData.content.selectedNumbers.join(' ');\r\n\t\t\t\tcontentElement.appendChild(numbersElement);\r\n\t\t\t}\r\n\r\n\t\t\tif (styleData.content.selecteddoubNumber) {\r\n\t\t\t\tconst doubNumberElement = document.createElement('div');\r\n\t\t\t\tdoubNumberElement.textContent = styleData.content.selecteddoubNumber;\r\n\t\t\t\tcontentElement.appendChild(doubNumberElement);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t//------------------------------------------------------\r\n\r\n\t// Âä†ËΩΩÁä∂ÊÄÅÁÆ°ÁêÜ\r\n\tconst isLoading = ref(false);\r\n\tconst hasMore = ref(true);\r\n\tconst loadError = ref(null);\r\n\t// Ëé∑ÂèñÂºÇÊ≠•ËØ∑Ê±ÇÁöÑÁîªÂ∏ÉÁúüÂÆûÊï∞ÊçÆ\r\n\t//ÂÖàÊãøÂà∞storeÂÆû‰æãÂØπË±°\r\n\tconst twocounterStore = usetwoCounterStore()\r\n\t// console.log(twocounterStore.List)\r\n\t// onReachBottom(async () => {\r\n\r\n\t// \t// Èò≤Ê≠¢ÈáçÂ§çÂä†ËΩΩ\r\n\t// \tif (isLoading.value || !hasMore.value) {\r\n\t// \t\tconsole.log(\"Ê≠£Âú®Âä†ËΩΩÊàñÊ≤°ÊúâÊõ¥Â§öÊï∞ÊçÆÔºåË∑≥Ëøá\");\r\n\t// \t\treturn;\r\n\t// \t}\r\n\r\n\t// \ttry {\r\n\t// \t\t// ËÆæÁΩÆÂä†ËΩΩÁä∂ÊÄÅ\r\n\t// \t\tisLoading.value = true;\r\n\t// \t\tloadError.value = null;\r\n\r\n\t// \t\t// ÊòæÁ§∫Âä†ËΩΩÊèêÁ§∫\r\n\t// \t\tuni.showLoading({\r\n\t// \t\t\ttitle: 'Âä†ËΩΩÊõ¥Â§öÊï∞ÊçÆ...',\r\n\t// \t\t\tmask: false\r\n\t// \t\t});\r\n\r\n\t// \t\t// Ë∞ÉÁî® store ÁöÑÂä†ËΩΩÊõ¥Â§öÊñπÊ≥ï\r\n\t// \t\tawait twocounterStore.loadMoreData();\r\n\r\n\t// \t\t// Êõ¥Êñ∞Áä∂ÊÄÅ\r\n\t// \t\thasMore.value = twocounterStore.hasMore;\r\n\r\n\t// \t\tconsole.log(\"Âä†ËΩΩÊõ¥Â§öÂÆåÊàêÔºåÂΩìÂâçÊï∞ÊçÆÈáè:\", twocounterStore.List.length);\r\n\r\n\t// \t\t// ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫ÔºàÂèØÈÄâÔºâ\r\n\t// \t\tif (hasMore.value) {\r\n\t// \t\t\tuni.showToast({\r\n\t// \t\t\t\ttitle: `Â∑≤Âä†ËΩΩ ${twocounterStore.List.length} Êù°Êï∞ÊçÆ`,\r\n\t// \t\t\t\ticon: 'none',\r\n\t// \t\t\t\tduration: 1500\r\n\t// \t\t\t});\r\n\t// \t\t}\r\n\r\n\t// \t} catch (error) {\r\n\t// \t\tconsole.error('Âä†ËΩΩÊõ¥Â§öÂ§±Ë¥•:', error);\r\n\t// \t\tloadError.value = error;\r\n\t// \t\tuni.showToast({\r\n\t// \t\t\ttitle: 'Âä†ËΩΩÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n\t// \t\t\ticon: 'none'\r\n\t// \t\t});\r\n\t// \t} finally {\r\n\t// \t\tisLoading.value = false;\r\n\t// \t\tuni.hideLoading();\r\n\t// \t}\r\n\t// });\r\n\t// // Ê∑ªÂä†ÈáçËØïÊñπÊ≥ï\r\n\t// const retryLoadMore = () => {\r\n\t// \tif (loadError.value) {\r\n\t// \t\tloadError.value = null;\r\n\t// \t\tonReachBottom(); // ÈáçÊñ∞Ëß¶ÂèëÂä†ËΩΩ\r\n\t// \t}\r\n\t// };\r\n\r\n\t// // ÁõëÂê¨ store Áä∂ÊÄÅÂèòÂåñ\r\n\t// watch(() => twocounterStore.isLoading, (loading) => {\r\n\t// \tisLoading.value = loading;\r\n\t// });\r\n\r\n\t// watch(() => twocounterStore.hasMore, (more) => {\r\n\t// \thasMore.value = more;\r\n\t// });\r\n\r\n\t// watch(() => twocounterStore.error, (error) => {\r\n\t// \tif (error) {\r\n\t// \t\tloadError.value = error;\r\n\t// \t}\r\n\t// });\r\n\r\n\r\n\r\n\t//-------------------------------------------------------\r\n\tconst canvasPointerValue = ref(true)\r\n\tconst switchDrawMode = (value) => {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: `ÂΩìÂâç‰∏∫${value==='none'?'ÊªöÂä®':'ÁîªËßÑ'}Ê®°Âºè`,\r\n\t\t\ticon: 'none', // ÂèØÈÄâÂÄºÔºösuccess, loading, none\r\n\t\t\tduration: 2000, // ÊèêÁ§∫ÊåÅÁª≠Êó∂Èó¥ÔºàÊØ´ÁßíÔºâ\r\n\t\t\tposition: 'bottom' // ÂèØÈÄâÂÄºÔºötop, center, bottom\r\n\t\t});\r\n\t\tcanvasPointerValue.value = !canvasPointerValue.value\r\n\t\tcanvasPointerEvents.value = value\r\n\t}\r\n\t// Áà∂ÁªÑ‰ª∂ÁöÑÊñπÊ≥ï\r\n\tconst handleSubmit = (data) => {\r\n\t  // ÊòæÁ§∫Á°ÆËÆ§ÂØπËØùÊ°Ü\r\n\t  uni.showModal({\r\n\t    title: 'Á°ÆËÆ§Ê∏ÖÈô§',\r\n\t    content: 'Á°ÆÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÁªòÂà∂ÂÜÖÂÆπÂíåÊ†∑ÂºèÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ',\r\n\t    success: (res) => {\r\n\t      if (res.confirm) {\r\n\t        console.log('Áî®Êà∑Á°ÆËÆ§Ê∏ÖÈô§Êìç‰Ωú');\r\n\t        clearCanvas(); // Ê∏ÖÈô§ÁîªÂ∏É\r\n\t        clearAllGridContents(); // Ê∏ÖÈô§grid-contentÂÜÖÂÆπ\r\n\t      } else if (res.cancel) {\r\n\t        console.log('Áî®Êà∑ÂèñÊ∂àÊ∏ÖÈô§Êìç‰Ωú');\r\n\t      }\r\n\t    }\r\n\t  });\r\n\t};\r\n\tconst clearAllGridContents = () => {\r\n\t   // Ê∏ÖÈô§Â≠òÂÇ®ÁöÑÊâÄÊúâÊ†∑Âºè\r\n\t     gridStyles.value = {};\r\n\t     \r\n\t     // Ê∏ÖÈô§ÊâÄÊúâÊ†ºÂ≠êÁöÑÊ†∑ÂºèÂíåÂÜÖÂÆπ\r\n\t     const gridElements = document.querySelectorAll('[data-group-index][data-num-index]');\r\n\t     gridElements.forEach(element => {\r\n\t       element.classList.remove('solid', 'hollow');\r\n\t       \r\n\t       const contentElement = element.querySelector('.grid-content');\r\n\t       if (contentElement) {\r\n\t         contentElement.innerHTML = '';\r\n\t       }\r\n\t     });\r\n\t};\r\n\r\n\tconst handleChildEvent = (params) => {\r\n\t\tconsole.log('Êî∂Âà∞Â≠êÁªÑ‰ª∂‰∫ã‰ª∂ÔºåÂèÇÊï∞', params)\r\n\t\tswitch (params.action) {\r\n\t\t\tcase 'submit':\r\n\t\t\t\tsaveCanvasImage()\r\n\t\t\t\tbreak\r\n\t\t\tcase 'undo':\r\n\t\t\t\tundoDraw()\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t}\r\n\tconst handleShareEvent = () => {\r\n\t\tconsole.log('Â≠êÁªÑ‰ª∂Ë∞ÉÁî®‰∫ÜÁà∂ÁªÑ‰ª∂ÁöÑÂàÜ‰∫´ÊñπÊ≥ï')\r\n\r\n\t}\r\n\r\n\r\n\r\n\tlet eventHandler;\r\n\tonLoad((e) => {\r\n\t\tconst instance = getCurrentInstance().proxy\r\n\t\tconst eventChannel = instance.getOpenerEventChannel();\r\n\t\teventChannel.emit('acceptDataFromOpenedPage', {\r\n\t\t\tdata: 'data from test page'\r\n\t\t});\r\n\t\teventChannel.emit('someEvent', {\r\n\t\t\tdata: 'data from test page for someEvent'\r\n\t\t});\r\n\t\t// ÁõëÂê¨acceptDataFromOpenerPage‰∫ã‰ª∂ÔºåËé∑Âèñ‰∏ä‰∏ÄÈ°µÈù¢ÈÄöËøáeventChannel‰º†ÈÄÅÂà∞ÂΩìÂâçÈ°µÈù¢ÁöÑÊï∞ÊçÆ\r\n\t\teventChannel.on('acceptDataFromOpenerPage', function(data) {\r\n\t\t\tconsole.log(\"acceptDataFromOpenerPage\", data)\r\n\t\t})\r\n\r\n\r\n\r\n\t})\r\n\t//----------------------------------------------------\r\n\r\n\r\n\t//‰ªéuseTableData.js‰∏≠‰º†ËøáÊù•ÁöÑÁΩëÁªúËØ∑Ê±ÇÊï∞ÊçÆÊó†Ê≥ïÂèäÊó∂Êõ¥Êñ∞\t---------------\r\n\r\n\t// Â≠êÁªÑ‰ª∂ÂºïÁî®\r\n\tconst child = ref(null);\r\n\t// classifyList.value = [...newDataSort,...classifyList.value];\r\n\t// ÂÆö‰πâ formattedClassifyListÔºåÁî®‰∫éÂ≠òÂÇ®‰ªé drawLineRead.vue ‰º†ÈÄíËøáÊù•ÁöÑÊï∞ÊçÆ\r\n\t// const formattedClassifyList = ref(null);\r\n\t// const externalData=ref([]);\r\n\r\n\t// console.log(externalData,'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa');\r\n\t//------------------------------------------------------------------------\r\n\tfunction logDataComparison(a, externalData) {\r\n\t\tconsole.group('Êï∞ÊçÆÊØîËæÉ');\r\n\t\tconsole.log('a:', a);\r\n\t\tconsole.log('externalData:', externalData);\r\n\t\tconsole.log('a === externalData:', a === externalData);\r\n\t\tconsole.log('JSON.stringify(a) === JSON.stringify(externalData):',\r\n\t\t\tJSON.stringify(a) === JSON.stringify(externalData));\r\n\r\n\t\tif (isRef(externalData)) {\r\n\t\t\tconsole.log('externalData ÊòØ ref');\r\n\t\t\tconsole.log('externalData.value:', externalData.value);\r\n\t\t\tconsole.log('a === externalData.value:', a === externalData.value);\r\n\t\t}\r\n\t\tconsole.groupEnd();\r\n\t}\r\n\r\n\r\n\t// ÂØºÂÖ•ÂêÑ‰∏™ÂäüËÉΩÊ®°Âùó\r\n\tconst {\r\n\t\tnumberGroups,\r\n\t\thighlighted,\r\n\t\tnumberRefs,\r\n\t\tgetTargetRowIndex,\r\n\t\tisTargetRow,\r\n\t\thandleCellClick,\r\n\t\tisHighlighted,\r\n\t\ttoggleHighlight,\r\n\t\thandleMessage\r\n\t} = useTableData(child, null, openNumberSelector);\r\n\tconst handleColorMessage = (val) => {\r\n\t\tstrokeColor.value = val\r\n\t}\r\n\tconst handleLineMessage = (val) => {\r\n\t\tlineWidth.value = val\r\n\t}\r\n\tconst {\r\n\t\tcurrentMode,\r\n\t\tisDrawing,\r\n\t\tisErasing,\r\n\t\tcanvasPointerEvents,\r\n\t\tstrokeColor,\r\n\t\tlineWidth,\r\n\t\tcanvasCtx,\r\n\t\ttempCanvasCtx,\r\n\t\tcanvasSize,\r\n\t\tdpr,\r\n\t\tcurrentShape,\r\n\t\tshapes,\r\n\t\teraserSize,\r\n\t\tonCanvasStart,\r\n\t\tonCanvasMove,\r\n\t\tonCanvasEnd: drawingOnCanvasEnd, // ÈáçÂëΩÂêç‰ª•ÈÅøÂÖçÂÜ≤Á™Å\r\n\t\tredraw,\r\n\t\tinitCanvas,\r\n\t\tselectedColor,\r\n\t\tcheckPointOnNumber\r\n\t} = useDrawing(numberGroups, highlighted, numberRefs, openNumberSelector);\r\n\r\n\tnextTick()\r\n\tconst {\r\n\t\ttextLabels,\r\n\t\tmovingLabel,\r\n\t\ttouchStartTime,\r\n\t\ttouchStartPos,\r\n\t\ttouchEndTime,\r\n\t\ttouchCount,\r\n\t\ttouchTimer,\r\n\t\tlabelOffset,\r\n\t\tlongPressDetected,\r\n\t\thandleLabelTouchStart,\r\n\t\thandleLabelTouchMove,\r\n\t\thandleLabelTouchEnd,\r\n\t\thandleLabelClick,\r\n\t\thandleLabelDblClick,\r\n\t\taddTextLabel,\r\n\t\teditLabel,\r\n\t\tupdateLabelText,\r\n\t\tfinishEditLabel,\r\n\t\tgetLabelStyle\r\n\t} = useTextLabels(canvasSize);\r\n\r\n\tconst {\r\n\t\tisFabOpen,\r\n\t\ttoggleFab,\r\n\t\tswitchMode,\r\n\t\tclearCanvas,\r\n\t\tclickBlank\r\n\t} = useFabActions(currentMode, canvasPointerEvents, shapes, textLabels, highlighted, redraw);\r\n\r\n\tconst {\r\n\t\tsaveCanvasImage,\r\n\t\tdomToImage\r\n\t} = useScreenshot(html2canvas);\r\n\tconst undoDraw = () => {\r\n\t\tconsole.log('undoDraw')\r\n\t\tif (shapes.value.length > 0) {\r\n\t\t\tshapes.value.pop();\r\n\t\t\tredraw(false);\r\n\t\t}\r\n\t};\r\n\t// ÂàùÂßãÂåñ\r\n\tonMounted(async () => {\r\n\t\tawait twocounterStore.getCounterInfo();\r\n\t\t// await nextTick();\r\n\t\tconsole.log('Êï∞Â≠óÂÖÉÁ¥†Êï∞Èáè:', numberRefs.value.length);\r\n\t\tawait initCanvas();\r\n\t\t// await nextTick();\r\n\r\n\t\tconsole.log('ÂàùÂßãÂåñÂêéÊï∞Â≠óÂÖÉÁ¥†Êï∞Èáè:', numberRefs.value.length);\r\n\t\t// console.log('ÁõÆÊ†áË°åÁ¥¢Âºï:', getTargetRowIndex());\r\n\t\t// Ê∑ªÂä†ÊªöÂä®Âà∞Â∫ïÈÉ®ÁöÑ‰ª£Á†Å\r\n\t\tsetTimeout(() => {\r\n\t\t\tscrollToBottom();\r\n\t\t}, 0); // Âª∂Ëøü300msÁ°Æ‰øùÂÜÖÂÆπÂÆåÂÖ®Ê∏≤Êüì\r\n\t});\r\n\r\n\t// ÁõëÂê¨ÂΩ¢Áä∂ÂèòÂåñ\r\n\twatch(shapes, () => redraw(false), {\r\n\t\tdeep: true\r\n\t});\r\n\t// ÊªöÂä®Âà∞Â∫ïÈÉ®ÁöÑÊñπÊ≥ï\r\n\tconst scrollToBottom = () => {\r\n\t\t// Ëé∑ÂèñÈ°µÈù¢È´òÂ∫¶\r\n\t\tconst query = uni.createSelectorQuery();\r\n\t\tquery.select('.container').boundingClientRect();\r\n\t\tquery.selectViewport().scrollOffset();\r\n\t\tquery.exec((res) => {\r\n\t\t\tif (res[0]) {\r\n\t\t\t\t// ËÆ°ÁÆóÈúÄË¶ÅÊªöÂä®ÁöÑÈ´òÂ∫¶\r\n\t\t\t\tconst pageHeight = res[0].height;\r\n\t\t\t\t// ÊªöÂä®Âà∞Â∫ïÈÉ®\r\n\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\tscrollTop: pageHeight,\r\n\t\t\t\t\tduration: 0\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\t.modal-overlay {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tz-index: 1000;\r\n\t}\r\n\r\n\t.modal-content {\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 16px;\r\n\t\twidth: 95%;\r\n\t\tmax-width: 600rpx;\r\n\t\tmax-height: 85vh;\r\n\t\toverflow-y: auto;\r\n\t\tbox-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t/* ‰ºòÂåñ NumberSelector ÂÆπÂô®Ê†∑Âºè */\r\n\t.boxNumber {\r\n\t\twidth: 100%;\r\n\t\tmin-height: auto;\r\n\t\tpadding: 0;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\toverflow: visible;\r\n\t}\r\n\r\n\t.container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\tmin-height: 100vh;\r\n\t\tpadding: 0;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.numbers-table-container {\r\n\t\twidth: 100%;\r\n\t\tpadding: 10rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tposition: relative;\r\n\t\tz-index: 10; //Ë°®Ê†ºÈ´ò‰∫éÁîªÂ∏Éz-index\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.switch-mode-css {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tposition: fixed;\r\n\t\tright: 200rpx;\r\n\t\tbottom: 40rpx;\r\n\t\tz-index: 100;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.numbers-table {\r\n\t\twidth: 100%;\r\n\t\tborder-collapse: collapse;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 15rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\t\tz-index: 51;\r\n\t}\r\n\r\n\t/* ÂàóÂÆΩÂÆö‰πâ */\r\n\t.col-def-1 {\r\n\t\twidth: 120rpx;\r\n\t}\r\n\r\n\t.col-def-2 {\r\n\t\twidth: 60rpx;\r\n\t}\r\n\r\n\t.col-def-3 {\r\n\t\twidth: 90rpx;\r\n\t}\r\n\r\n\t.col-def-4 {\r\n\t\twidth: 90rpx;\r\n\t}\r\n\r\n\t.col-def-5 {\r\n\t\twidth: 90rpx;\r\n\t}\r\n\r\n\t.col-def-6 {\r\n\t\twidth: 90rpx;\r\n\t}\r\n\r\n\t.col-def-7 {\r\n\t\twidth: 60rpx;\r\n\t}\r\n\r\n\t.table-row {\r\n\t\ttransition: background-color 0.2s;\r\n\t}\r\n\r\n\t.table-row:nth-child(even) {\r\n\t\tbackground-color: rgba(0, 0, 0, 0.02);\r\n\t}\r\n\r\n\t.table-row:hover {\r\n\t\tbackground-color: rgba(0, 0, 0, 0.03);\r\n\t}\r\n\r\n\t.table-row:nth-child(4n) .table-cell {\r\n\t\tborder-bottom: 4px solid #8BAF95;\r\n\t}\r\n\r\n\t/* ÁõÆÊ†áË°åÊ†∑Âºè */\r\n\t.target-row {\r\n\t\tbackground-color: rgba(255, 248, 225, 0.5);\r\n\t}\r\n\r\n\t.table-cell {\r\n\t\tpadding: 0;\r\n\t\ttext-align: center;\r\n\t\tborder: 1px solid #dbe7d6;\r\n\t\theight: 90rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\twhite-space: nowrap;\r\n\t\toverflow: hidden;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t/* ÂèØÁÇπÂáªÂçïÂÖÉÊ†ºÊ†∑Âºè */\r\n\t.clickable {\r\n\t\tcursor: pointer;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.clickable::after {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(255, 215, 0, 0.1);\r\n\t\topacity: 0;\r\n\t\ttransition: opacity 0.2s;\r\n\t}\r\n\r\n\t.clickable:active::after {\r\n\t\topacity: 1;\r\n\t}\r\n\r\n\t.cell-content {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\tpadding: 0 5rpx;\r\n\t}\r\n\r\n\t/* ÂàóËÉåÊôØËâ≤ËÆæÁΩÆ */\r\n\t.col-1 {\r\n\t\tbackground-color: #90C380;\r\n\t\tcolor: #DDEBB8;\r\n\t\twidth: 30rpx;\r\n\t}\r\n\r\n\t.col-2 {\r\n\t\tborder-right: 4px solid #89B197;\r\n\t\tborder-left: 4px solid #89B197;\r\n\t\tbackground-color: #DFEDBC;\r\n\r\n\t\t.cell-content {\r\n\t\t\tfont-size: 40rpx !important;\r\n\t\t}\r\n\t}\r\n\r\n\t.col-2 .number-item {\r\n\t\tfont-size: 63rpx;\r\n\t}\r\n\r\n\t.col-3,\r\n\t.col-4,\r\n\t.col-5,\r\n\t.col-6 {\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\r\n\t.col-3 .number-item,\r\n\t.col-4 .number-item,\r\n\t.col-5 .number-item,\r\n\t.col-6 .number-item {\r\n\t\tfont-size: 73rpx;\r\n\t\t/* ‰∏≠Èó¥ÂõõÂàóÁöÑÊï∞Â≠óÂ≠ó‰ΩìÂ§ßÂ∞è */\r\n\t}\r\n\r\n\t.col-7 {\r\n\t\tborder-left: 4px solid #8CB699;\r\n\t\tbackground-color: #DFEDBC;\r\n\r\n\t\t.number-item {\r\n\t\t\tfont-size: 70rpx !important;\r\n\t\t}\r\n\t}\r\n\r\n\t.number-item {\r\n\t\tposition: relative;\r\n\t\twidth: 70rpx;\r\n\t\theight: 70rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 38rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #93C381;\r\n\t\ttransition: all 0.2s;\r\n\t\tcursor: pointer;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 0;\r\n\t\tmargin: 0 auto;\r\n\t\tpointer-events: none;\r\n\t\tz-index: 88;\r\n\t}\r\n\r\n\t.number-item.highlighted {\r\n\t\tbackground-color: #1a1ad9;\r\n\t\tcolor: white;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t/* CanvasÊ†∑Âºè */\r\n\t.draw-canvas,\r\n\t.temp-canvas {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tbackground-color: transparent;\r\n\t\tz-index: 1;\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t.draw-canvas {\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.temp-canvas {\r\n\t\tz-index: 1;\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t/* ÊñáÂ≠óÊ†áÊ≥®Ê†∑Âºè */\r\n\t.text-container {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tpointer-events: none;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.text-label {\r\n\t\tposition: absolute;\r\n\t\tpadding: 15rpx;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.95);\r\n\t\tborder: 2rpx solid #ccc;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-size: 80rpx;\r\n\t\tcolor: red;\r\n\t\twidth: 20rpx;\r\n\t\tbackground-color: pink;\r\n\t\tpointer-events: auto;\r\n\t\tmin-width: 120rpx;\r\n\t\tmax-width: 400rpx;\r\n\t\tbox-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.1);\r\n\t\tuser-select: none;\r\n\t\ttouch-action: manipulation;\r\n\t}\r\n\r\n\t.text-content {\r\n\t\tbackground-color: pink;\r\n\t}\r\n\r\n\t/* FabÊåâÈíÆÊ†∑Âºè */\r\n\t.fab-wrapper {\r\n\t\tposition: fixed;\r\n\t\tright: 40rpx;\r\n\t\tbottom: 50rpx;\r\n\t\tz-index: 100;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.fab-main {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: linear-gradient(135deg, #007aff, #0051a8);\r\n\t\tcolor: white;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbox-shadow: 0 6rpx 15rpx rgba(0, 122, 255, 0.3);\r\n\t\tfont-size: 40rpx;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n\t\tborder: 4rpx solid rgba(255, 255, 255, 0.2);\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.fab-items-o {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t.fab-items {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tposition: absolute;\r\n\t\tbottom: 90rpx;\r\n\t}\r\n\r\n\t.fab-item {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\topacity: 0;\r\n\t\ttransform: translateY(50rpx) scale(0.9);\r\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.fab-item-inner {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 10rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\r\n\t\tbackground-color: white;\r\n\t\tcolor: #333;\r\n\t\tborder: 1rpx solid rgba(0, 0, 0, 0.05);\r\n\t}\r\n\r\n\t.fab-open .fab-item {\r\n\t\topacity: 1;\r\n\t\ttransform: translateY(0) scale(1);\r\n\t}\r\n\r\n\t/* drawLine.vue ‰∏≠ÁöÑÊ†∑Âºè */\r\n\t.number-item.solid {\r\n\t\twidth: 100%;\r\n\t\tborder-radius: 0px;\r\n\t\tbackground-color: #0000ff;\r\n\t\tcolor: white;\r\n\t}\r\n\r\n\t.number-item.hollow {\r\n\t\tborder: 2px solid #0000ff;\r\n\t\tbackground-color: transparent;\r\n\t}\r\n\r\n\t.grid-content {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\tfont-size: 12px;\r\n\t\ttext-align: center;\r\n\t\tz-index: 20;\r\n\t\twidth: 100%;\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/Administrator/Desktop/my-painting-rules-project/pages/juWang/drawLine/drawLine.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","useCounterStore","uni","usetwoCounterStore","onLoad","getCurrentInstance","useTableData","useDrawing","nextTick","useTextLabels","useFabActions","useScreenshot","html2canvas","onMounted","watch"],"mappings":"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"}