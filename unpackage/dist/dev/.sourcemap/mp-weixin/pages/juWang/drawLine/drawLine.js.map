{"version":3,"file":"drawLine.js","sources":["pages/juWang/drawLine/drawLine.vue","D:/uniapp/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvanVXYW5nL2RyYXdMaW5lL2RyYXdMaW5lLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"draw-line\">\n    <Popup ref=\"popup\" @sbumit=\"popupSbumit\"></Popup>\n    <view class=\"tools\">\n      <view class=\"\">\n        <uni-icons type=\"left\" size=\"20\" color=\"#fff\"></uni-icons>\n      </view>\n      <view class=\"\" @click=\"revoke\">\n        <uni-icons type=\"undo\" size=\"20\" color=\"#fff\"></uni-icons>\n        <view class=\"\">撤销</view>\n      </view>\n      <view class=\"\" @click=\"trash\">\n        <uni-icons type=\"trash\" size=\"20\" color=\"#fff\"></uni-icons>\n        <view class=\"\">清除</view>\n      </view>\n      <view class=\"\">\n        <uni-icons type=\"redo\" size=\"20\" color=\"#fff\"></uni-icons>\n        <view class=\"\">分享</view>\n      </view>\n      <view class=\"\">\n        <uni-icons type=\"download\" size=\"20\" color=\"#fff\"></uni-icons>\n        <view class=\"\">保存</view>\n      </view>\n      <view class=\"\">\n        <uni-icons type=\"settings\" size=\"20\" color=\"#fff\"></uni-icons>\n        <view class=\"\">设置</view>\n      </view>\n    </view>\n\n    <scroll-view class=\"container\" id=\"container\" @scroll=\"scroll\" :scroll-y=\"isScroll\">\n      <view v-if=\"data\" class=\"data\">\n        <!-- 绘制图形 -->\n        <canvas\n          class=\"line-canvas\"\n          canvas-id=\"lineCanvas\"\n          id=\"lineCanvas\"\n          @touchstart=\"canvasTouchStart\"\n          @touchmove=\"canvasTouchMove\"\n          @touchend=\"canvasTouchEnd\"\n        ></canvas>\n        <!-- 数字区域 -->\n        <view\n          class=\"row\"\n          v-for=\"item in data\"\n          :key=\"item.id\"\n          @touchmove=\"touchmove\"\n          @touchend=\"touchend\"\n        >\n          <view class=\"column-1\">\n            <view class=\"issueno\">{{ item.issueno }}</view>\n            <view class=\"date\">{{ dateFromat(item.opendate) }}</view>\n          </view>\n\n          <view class=\"column-2\">\n            <view\n              class=\"item\"\n              :class=\"{ active: pointActives[item.id + 0] }\"\n              :style=\"{ backgroundColor: pointActives[item.id + 0]?.color || '' }\"\n              :id=\"item.id + 0\"\n              @touchstart=\"touchstart($event, item.id + 0)\"\n              >{{ item.number.reduce((a, b) => Number(a) + Number(b), 0) }}</view\n            >\n          </view>\n\n          <view class=\"column-3\">\n            <view v-for=\"(number, index) in item.number\" :key=\"index\">\n              <view\n                class=\"item\"\n                :class=\"{ active: pointActives[item.id + (index + 1)] }\"\n                :style=\"{ backgroundColor: pointActives[item.id + (index + 1)]?.color || '' }\"\n                :id=\"item.id + (index + 1)\"\n                @touchstart=\"touchstart($event, item.id + (index + 1))\"\n                >{{ number }}</view\n              >\n            </view>\n          </view>\n        </view>\n        <!-- 空白区域 -->\n        <view\n          class=\"row\"\n          v-for=\"row in 6\"\n          :key=\"row\"\n          @touchmove=\"touchmove\"\n          @touchend=\"spaceTouchend\"\n        >\n          <view class=\"column-1\"></view>\n\n          <view class=\"column-2\">\n            <view\n              class=\"marker\"\n              v-if=\"marks[`${row}-0`]\"\n              :style=\"{ backgroundColor: marks[`${row}-0`].style.color || '' }\"\n            >\n              <view class=\"condition\">{{ marks[`${row}-0`].marker.condition }}</view>\n              <view class=\"number\">{{ marks[`${row}-0`].marker.numbers.join('') }}</view>\n            </view>\n            <view\n              class=\"item\"\n              v-else\n              :class=\"{ active: pointActives[`${row}0`] }\"\n              :id=\"`${row}0`\"\n              @touchstart=\"touchstart($event, `${row}0`)\"\n            ></view>\n          </view>\n\n          <view class=\"column-3\">\n            <view v-for=\"(val, index) in 5\" :key=\"val\">\n              <view\n                v-if=\"marks[`${row}-${index + 1}`]\"\n                :class=\"{ marker: index !== 4, 'marker-5': index === 4 }\"\n                :style=\"getColorStyle(`${row}-${index + 1}`)\"\n              >\n                <view class=\"condition\">{{ marks[`${row}-${index + 1}`].marker.condition }}</view>\n                <view class=\"number\">{{\n                  marks[`${row}-${index + 1}`].marker.numbers.join('')\n                }}</view>\n              </view>\n              <view\n                class=\"item\"\n                v-else\n                :class=\"{ active: pointActives[`${row}${index + 1}`] }\"\n                :style=\"{ backgroundColor: pointActives[`${row}${index + 1}`]?.color || '' }\"\n                :id=\"`${row}${index + 1}`\"\n                @touchstart=\"touchstart($event, `${row}${index + 1}`)\"\n              ></view>\n            </view>\n          </view>\n        </view>\n        <!-- 悬浮文字 -->\n        <view\n          class=\"text\"\n          v-for=\"(item, index) in textList\"\n          :key=\"index\"\n          :style=\"{\n            top: item.text.position.y - 100 * ratio + 'px',\n            left: item.text.position.x + 'px',\n            fontSize: item.style.fontSize + 'px',\n            lineHeight: item.style.fontSize + 'px',\n            borderColor: item.style.color\n          }\"\n        >\n          <view\n            class=\"text-container\"\n            :style=\"textStyle(index)\"\n            @touchstart=\"textPositionStart($event, index)\"\n            @touchmove=\"textPositionMove($event, index)\"\n            @touchend=\"textPositionEnd($event, index)\"\n          >\n            <view\n              class=\"text-item\"\n              :style=\"{\n                width: item.style.width === 'auto' ? 'auto' : item.style.width + 'px',\n                height: item.style.height === 'auto' ? 'auto' : item.style.height + 'px'\n              }\"\n            >\n              <view class=\"text-content\" :id=\"`text${index}`\">{{ item.text.content }}</view>\n            </view>\n          </view>\n          <view\n            class=\"text-btn-left\"\n            :style=\"{ backgroundColor: item.style.color }\"\n            @click=\"changeTextSolid(item.index)\"\n            >透</view\n          >\n          <view\n            class=\"text-btn-right\"\n            :style=\"{ backgroundColor: item.style.color }\"\n            @touchstart=\"textTouchstart($event, index)\"\n            @touchmove=\"textTouchmove($event, index)\"\n            @touchend=\"textTouchend($event, index)\"\n            >拉</view\n          >\n        </view>\n        <!-- 悬浮文字输入框 -->\n        <textarea\n          class=\"text-input\"\n          focus\n          auto-height\n          v-if=\"isTextInputShow\"\n          v-model=\"textareaValue\"\n          :cursor=\"cursor\"\n        />\n      </view>\n    </scroll-view>\n\n    <uni-icons\n      type=\"closeempty\"\n      size=\"20\"\n      class=\"curve-handle\"\n      color=\"red\"\n      @touchstart=\"curveTouchstart\"\n      @touchmove=\"curveTouchmove\"\n      v-show=\"iscurveHandleShow\"\n    ></uni-icons>\n\n    <ColorSelect\n      class=\"color-select\"\n      v-model:color=\"color\"\n      v-model:size=\"size\"\n      v-show=\"isColorSelectShow\"\n      @click=\"changeColor\"\n    ></ColorSelect>\n    <ModeSelect\n      class=\"mode-select\"\n      v-model=\"mode\"\n      v-show=\"isModeSelectShow\"\n      @click=\"changeMode\"\n    ></ModeSelect>\n    <view class=\"lock\" @click=\"lock\" v-show=\"isLockShow\">\n      <uni-icons type=\"locked-filled\" size=\"30\" color=\"#fff\"></uni-icons>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, nextTick, computed, watch } from 'vue'\nimport { onReady } from '@dcloudio/uni-app'\nimport { getCurrentInstance } from 'vue'\n// import mock from './mock.json'\nimport Popup from '@/components/juWang/Popup.vue'\nimport ColorSelect from '@/components/juWang/ColorSelect.vue'\nimport ModeSelect from '@/components/juWang/ModeSelect.vue'\nimport { DrawShape } from './drawMethod'\nimport dayjs from 'dayjs'\n\n//解析日期\nconst weekMap = {\n  0: '日',\n  1: '一',\n  2: '二',\n  3: '三',\n  4: '四',\n  5: '五',\n  6: '六'\n}\nconst dateFromat = (dateStr) => {\n  const dateArr = dateStr.split('-')\n  const date = dayjs(dateStr).format('M/D')\n  const dateArr2 = date.split('/')\n  const dateStr2 = `${dateArr2[0]}/${dateArr2[1]} ${weekMap[dayjs(dateStr).format('d')]}`\n  return dateStr2\n}\n\nconst instance = getCurrentInstance()\nlet ratio\nlet lineCtx\n// let graphicsCtx\nconst popup = ref(null)\n\n// const uni.getSystemInfo\nconst systemInfo = ref(uni.getSystemInfoSync())\n// console.log(systemInfo.value)\n\n// 页面数据\nconst data = ref([])\nlet positionList\nconst getData = async () => {\n  const res = await uni.request({\n    url: 'http://caimi.s7.tunnelfrp.com/web/ticket/query?tname=排列五&page=1&limit=10'\n  })\n  data.value = res.data.data.records.reverse()\n  data.value.forEach((item) => {\n    item.number = item.number.split(' ').slice(0, 5)\n  })\n  // data.value = mock.data.records\n  // data.value.forEach((item) => {\n  //   item.number = item.number.split(' ').slice(0, 5)\n  // })\n\n  await nextTick()\n  const query = uni.createSelectorQuery().in(instance.proxy)\n  query\n    .selectAll('.item')\n    .boundingClientRect((data) => {\n      // console.log(\"节点离页面顶部的距离为\" ,data);\n      positionList = data\n    })\n    .exec()\n}\ngetData()\n\n// 绘制连接线\nconst curveLineX = ref(0) // 曲线中间坐标\nconst curveLineY = ref(0)\n\nconst iscurveHandleShow = ref(false)\n\nconst color = ref('#f2232b')\nconst size = ref(3)\n\nlet drawnStraightLine,\n  drawnCurveLine,\n  drawnTrack,\n  drawSolidRect,\n  drawHollowRect,\n  drawSolidCircle,\n  drawHollowCircle\n\n// 绘制曲线\nconst curveLine = (startX, startY, endX, endY) => {\n  drawnStraightLine(startX, startY, endX, endY)\n  curveLineX.value = (startX + endX) / 2\n  curveLineY.value = (startY + endY) / 2 - scrolltop\n}\n// 绘制所有线\nconst drawnLineAll = () => {\n  record.value.forEach((item) => {\n    if (!item?.line) return\n    const type = item.line.type\n    const color = item.style.color\n    const size = item.style.size\n\n    if (type === 'straight') {\n      const { startX, startY, endX, endY } = item.line.position\n      drawnStraightLine(startX, startY, endX, endY, color, size)\n    }\n    if (type === 'curve') {\n      const { startX, startY, centerX, centerY, endX, endY } = item.line.position\n      const center = startY / 2 + endY / 2\n      const y = (centerY - center) * 2 + center\n      drawnCurveLine(startX, startY, centerX, y, endX, endY, color, size)\n    }\n    if (type === 'track') {\n      const track = item.line.position\n      drawnTrack(track, color, size)\n    }\n    if (type === 'solidRect') {\n      const { x, y, width, height } = item.line.position\n      drawSolidRect(x, y, width, height, color)\n    }\n    if (type === 'hollowRect') {\n      const { x, y, width, height } = item.line.position\n      drawHollowRect(x, y, width, height, color, size)\n    }\n    if (type === 'solidCircle') {\n      const { startX, startY, endX, endY } = item.line.position\n      drawSolidCircle(startX, startY, endX, endY, color, size)\n    }\n    if (type === 'hollowCircle') {\n      const { startX, startY, endX, endY } = item.line.position\n      drawHollowCircle(startX, startY, endX, endY, color, size)\n    }\n  })\n}\n// 监听触摸事件\nconst record = ref([]) // [{point:[12,34] , line:{type:straight/curve,position:{}} , marker:{} , style:{color,size}} , text:'']\nlet startX, startY, endX, endY\n\nconst getPosition = (x, y) => {\n  const result = positionList.find((item) => {\n    return x < item.right && y < item.bottom\n  })\n  return result\n}\n\nconst touchstart = (event, id) => {\n  event.preventDefault()\n  isScroll.value = false\n\n  iscurveHandleShow.value = false\n  const { clientX, clientY } = event.touches[0]\n  const position = getPosition(clientX, clientY + scrolltop)\n  startX = position.left + position.width / 2\n  startY = position.top + position.height / 2\n  record.value.push({ point: [position.id] })\n}\n\nconst touchmove = (event) => {\n  event.preventDefault()\n  const { clientX, clientY } = event.touches[0]\n  drawnLineAll()\n  drawnStraightLine(startX, startY, clientX, clientY + scrolltop)\n  lineCtx.draw()\n}\n\nconst touchend = (event) => {\n  isScroll.value = true\n\n  const { clientX, clientY } = event.changedTouches[0]\n  const position = getPosition(clientX, clientY + scrolltop)\n  endX = position.left + position.width / 2\n  endY = position.top + position.height / 2\n\n  drawnLineAll()\n\n  const lastRecord = record.value[record.value.length - 1]\n  lastRecord.style = { color: color.value, size: size.value }\n  if (lastRecord.point[0] !== position.id) {\n    lastRecord.point.push(position.id)\n    lastRecord.line = { type: 'straight', position: { startX, startY, endX, endY } }\n    iscurveHandleShow.value = true\n    curveLine(startX, startY, endX, endY)\n  } else {\n    iscurveHandleShow.value = false\n  }\n  lineCtx.draw()\n}\n\nconst curveTouchstart = () => {\n  const item = record.value[record.value.length - 1]\n  item.line.type = 'curve'\n  const { startX, startY, endX, endY } = item.line.position\n  item.line.position.centerX = startX / 2 + endX / 2\n  item.line.position.centerY = startY / 2 + endY / 2\n}\nconst curveTouchmove = (event) => {\n  event.preventDefault()\n  const { pageX, pageY } = event.touches[0]\n  curveLineX.value = pageX\n  curveLineY.value = pageY\n  const item = record.value[record.value.length - 1]\n  item.line.position.centerX = pageX\n  item.line.position.centerY = pageY + scrolltop\n  drawnLineAll()\n  lineCtx.draw()\n}\n\n// 激活列表\nconst pointActives = computed(() => {\n  const result = {}\n  record.value.forEach((item) => {\n    if (!item?.point) return\n    item.point.forEach((id) => {\n      result[id] = { color: item.style?.color, isSolid: item.marker?.isSolid }\n    })\n  })\n  return result\n})\n// 撤销\nconst revoke = () => {\n  iscurveHandleShow.value = false\n  record.value.pop()\n  drawnLineAll()\n  lineCtx.draw()\n}\n// 清除\nconst trash = () => {\n  iscurveHandleShow.value = false\n  record.value = []\n  drawnLineAll()\n  lineCtx.draw()\n}\n// 获取元素位置信息\nconst getRect = (id) => {\n  return new Promise((resolve) => {\n    const query = uni.createSelectorQuery().in(instance.proxy)\n    query\n      .select(id)\n      .boundingClientRect((data) => {\n        resolve(data)\n      })\n      .exec()\n  })\n}\nonReady(async () => {\n  lineCtx = uni.createCanvasContext('lineCanvas')\n  ratio = (await getRect('.container')).width / 750\n  ;({\n    drawnStraightLine,\n    drawnCurveLine,\n    drawnTrack,\n    drawSolidRect,\n    drawHollowRect,\n    drawSolidCircle,\n    drawHollowCircle\n  } = new DrawShape(color, size, lineCtx))\n})\n\n// 标记列表\nconst marks = computed(() => {\n  const result = {}\n  record.value.forEach((item) => {\n    const row = item.marker?.row\n    const indexs = item.marker?.indexs\n    if (row && indexs) {\n      indexs.forEach((index) => {\n        result[`${row}-${index}`] = { marker: item.marker, style: item.style }\n      })\n    }\n  })\n  return result\n})\nconst popupSbumit = (val) => {\n  const item = record.value[record.value.length - 1]\n  item.marker = val\n  item.marker.row = +item.point[item.point.length - 1][0]\n}\n\n// 滚动高度\nlet scrolltop = 0\nconst isScroll = ref(true)\nconst scroll = (event) => {\n  scrolltop = event.detail.scrollTop\n  curveLineY.value += event.detail.deltaY\n}\n\nconst spaceTouchend = (event) => {\n  touchend(event)\n  const item = record.value[record.value.length - 1]\n  if (item.point[item.point.length - 1].endsWith('0')) {\n    popup.value.openRefernumber()\n  } else if (item.point[item.point.length - 1].endsWith('5')) {\n    popup.value.openSimple()\n  } else {\n    popup.value.open(item.point[item.point.length - 1][1] - 1)\n  }\n}\n\n// 样式控制\nconst getColorStyle = (id) => {\n  const meta = marks.value[id]\n\n  if (id.endsWith('5')) {\n    return {\n      backgroundColor: meta.style.color\n    }\n  }\n\n  return {\n    backgroundColor: meta.marker.isSolid ? meta.style.color : '#fff',\n    border: meta.marker.isSolid ? undefined : `5rpx solid ${meta.style.color}`,\n    color: meta.marker.isSolid ? '#fefdf8' : meta.style.color\n  }\n}\n\n// 绘制图形\nconst mode = ref('智能曲线')\nconst pointerEvents = ref('auto') // none | auto\n\nwatch(mode, (val) => {\n  if (val === '智能曲线') {\n    pointerEvents.value = 'auto'\n  } else {\n    pointerEvents.value = 'none'\n  }\n})\n\n// 临时记录\nlet track = [] // 轨迹\nlet straightLine = {} // 直线\nlet rect = {} // 方框\nlet circle = {} // 圆\n\nconst isTextInputShow = ref(false)\nconst textareaPosition = ref({}) // textarea坐标\nlet textPosition = {}\nconst textareaValue = ref('')\n\nconst textList = computed(() => {\n  const result = []\n  for (let i = 0; i < record.value.length; i++) {\n    const item = record.value[i]\n    if (item.text) {\n      result.push({ text: item.text, style: item.style, isSolid: item.isSolid, index: i })\n    }\n  }\n  return result\n})\n\nconst textStyle = (index) => {\n  const meta = textList.value[index]\n\n  return {\n    backgroundColor: meta.isSolid ? meta.style.color : 'transparent',\n    color: meta.isSolid ? '#fff' : meta.style.color\n  }\n}\n\nconst canvasTouchStart = (event) => {\n  // console.log('canvasTouchStart', isTextInputShow.value)\n\n  let { x, y } = event.touches[0]\n  // 控制页面滚动\n  if (x < 250 * ratio) {\n    isScroll.value = true\n    return\n  } else {\n    isScroll.value = false\n  }\n\n  switch (mode.value) {\n    case '自由线':\n      track = []\n      track.push({ x, y })\n      break\n    case '直线':\n      straightLine = {\n        startX: x,\n        startY: y\n      }\n      break\n    case '添加文字':\n      if (!isTextInputShow.value) {\n        textPosition = { x, y }\n\n        if (x > (750 - 300) * ratio) x = (750 - 300) * ratio\n        if (y < 200 * ratio) y = 200 * ratio\n        if (y > 1000 * ratio) y = 1000 * ratio\n        textareaPosition.value = { x, y }\n        isTextInputShow.value = true\n      } else {\n        isTextInputShow.value = false\n        // 修改文字\n        if (textChangeIndex !== null) {\n          const meta = textList.value[textChangeIndex]\n          meta.text.content = textareaValue.value\n          // 重新计算文字框大小\n          meta.style.width = 'auto'\n          meta.style.height = 'auto'\n          nextTick(async () => {\n            const { width, height } = await getRect(`#text${textChangeIndex}`)\n            meta.style.width = width\n            meta.style.height = height\n            textChangeIndex = null\n            textareaValue.value = ''\n          })\n\n          return\n        }\n\n        if (!textareaValue.value) return\n        record.value.push({\n          text: {\n            content: textareaValue.value,\n            position: textPosition\n          },\n          style: {\n            color: color.value,\n            // width: 0,\n            // height: 0,\n            fontSize: 20\n          },\n          isSolid: true\n        })\n        textareaValue.value = ''\n        nextTick(async () => {\n          const query = uni.createSelectorQuery().in(instance.proxy)\n          const { width, height } = await getRect(`#text${record.value.length - 1}`)\n          const item = record.value[record.value.length - 1]\n          item.style.width = width\n          item.style.height = height\n        })\n      }\n\n      break\n    case '实心方框':\n    case '空心方框':\n      rect = {}\n      rect = {\n        x,\n        y\n      }\n      break\n    case '实心圆框':\n    case '空心圆框':\n      circle = {\n        startX: x,\n        startY: y\n      }\n      break\n  }\n}\n\nconst canvasTouchMove = (event) => {\n  if (isScroll.value) return\n  const { x, y } = event.touches[0]\n  drawnLineAll()\n  switch (mode.value) {\n    case '自由线':\n      track.push({ x, y })\n      drawnTrack(track)\n      break\n    case '直线':\n      drawnStraightLine(straightLine.startX, straightLine.startY, x, y)\n      straightLine.endX = x\n      straightLine.endY = y\n      break\n    case '添加文字':\n      break\n    case '实心方框':\n    case '空心方框':\n      rect.width = x - rect.x\n      rect.height = y - rect.y\n      if (mode.value === '实心方框') {\n        drawSolidRect(rect.x, rect.y, rect.width, rect.height)\n      } else {\n        drawHollowRect(rect.x, rect.y, rect.width, rect.height)\n      }\n      break\n    case '实心圆框':\n    case '空心圆框':\n      circle.endX = x\n      circle.endY = y\n      if (mode.value === '实心圆框') {\n        drawSolidCircle(circle.startX, circle.startY, circle.endX, circle.endY)\n      } else {\n        drawHollowCircle(circle.startX, circle.startY, circle.endX, circle.endY)\n      }\n      break\n  }\n  lineCtx.draw()\n}\n\nconst canvasTouchEnd = (event) => {\n  if (isScroll.value) return\n  switch (mode.value) {\n    case '自由线':\n      record.value.push({\n        line: {\n          type: 'track',\n          position: track\n        },\n        style: { color: color.value, size: size.value }\n      })\n      track = []\n      break\n    case '直线':\n      record.value.push({\n        line: {\n          type: 'straight',\n          position: straightLine\n        },\n        style: { color: color.value, size: size.value }\n      })\n\n      straightLine = {}\n      break\n    case '添加文字':\n      // if (isTextInputShow.value) {\n      //   record.value.push({\n      //     text: { content: textareaValue.value, position: textPosition },\n      //     style: { color: color.value }\n      //   })\n      //   console.log(record.value)\n      // }\n      break\n    case '实心方框':\n      record.value.push({\n        line: {\n          type: 'solidRect',\n          position: rect\n        },\n        style: { color: color.value }\n      })\n      rect = {}\n      break\n    case '空心方框':\n      record.value.push({\n        line: {\n          type: 'hollowRect',\n          position: rect\n        },\n        style: { color: color.value, size: size.value }\n      })\n      break\n    case '实心圆框':\n      record.value.push({\n        line: {\n          type: 'solidCircle',\n          position: circle\n        },\n        style: { color: color.value, size: size.value }\n      })\n      break\n    case '空心圆框':\n      record.value.push({\n        line: {\n          type: 'hollowCircle',\n          position: circle\n        },\n        style: { color: color.value, size: size.value }\n      })\n      break\n  }\n}\n\n// 悬浮文字框\nlet textStartX, textStartY\nlet tmpTextWidth, tmpTextHeight\n\nconst changeTextFontSize = (index) => {\n  const item = textList.value[index]\n  const style = item.style\n  const contentLength = item.text.content.length\n\n  let row = 1\n  while (true) {\n    const fs = style.height / row\n    const cloumn = Math.floor(style.width / (fs * 0.6))\n    if (row * cloumn >= contentLength) {\n      if (fs > 80) {\n        style.fontSize = 80\n        return\n      } else {\n        style.fontSize = fs\n        return\n      }\n    }\n    row++\n    if (row > 10) return\n  }\n}\n\nconst textTouchstart = (e) => {\n  isScroll.value = false\n  const { pageX, pageY } = e.touches[0]\n\n  textStartX = pageX\n  textStartY = pageY\n  const { width, height } = textList.value[textList.value.length - 1].style\n\n  tmpTextWidth = width\n  tmpTextHeight = height\n}\n\nconst textTouchmove = (e, index) => {\n  const { pageX, pageY } = e.touches[0]\n\n  const changeWidth = pageX - textStartX\n  const changeHeight = pageY - textStartY\n\n  const item = textList.value[index]\n\n  if (item.style.fontSize < 20 && (changeWidth < 0 || changeHeight < 0)) return\n  item.style.width = changeWidth + tmpTextWidth\n  item.style.height = changeHeight + tmpTextHeight\n\n  changeTextFontSize(index)\n}\nconst textTouchend = async (e, index) => {\n  const { width, height } = await getRect(`#text${index}`)\n  const item = textList.value[index]\n  item.style.width = width\n  item.style.height = height\n\n  isScroll.value = true\n  isTextClick = true\n}\n\nconst changeTextSolid = (index) => {\n  record.value[index].isSolid = !record.value[index].isSolid\n}\n\n// 更新文字位置\nlet tmpTextX, tmpTextY\nlet isTextClick = true\nconst textPositionStart = (e, index) => {\n  isScroll.value = false\n  const { pageX, pageY } = e.touches[0]\n  textStartX = pageX\n  textStartY = pageY\n\n  const { x, y } = record.value[index].text.position\n  tmpTextX = x\n  tmpTextY = y\n}\nconst textPositionMove = (e, index) => {\n  isTextClick = false\n\n  const { pageX, pageY } = e.touches[0]\n\n  const item = record.value[index]\n  item.text.position.x = pageX - textStartX + tmpTextX\n  item.text.position.y = pageY - textStartY + tmpTextY\n}\n\nlet textChangeIndex = null\nconst cursor = ref(0)\nconst textPositionEnd = (e, index) => {\n  if (isTextClick) {\n    isTextInputShow.value = true\n    textChangeIndex = index\n    textareaValue.value = record.value[index].text.content\n    const { pageX: x, pageY: y } = e.changedTouches[0]\n    textareaPosition.value = { x, y }\n    cursor.value = record.value[index].text.content.length\n    return\n  }\n  isTextClick = true\n  isScroll.value = true\n}\n\n// 锁定页面\nconst isModeSelectShow = ref(true)\nconst isColorSelectShow = ref(true)\nconst isLockShow = ref(true)\nconst containerPointerEvents = ref('auto')\n\nconst lock = () => {\n  isModeSelectShow.value = !isModeSelectShow.value\n  isColorSelectShow.value = !isColorSelectShow.value\n  containerPointerEvents.value = isLockShow.value ? 'none' : 'auto'\n}\nconst changeColor = () => {\n  isModeSelectShow.value = !isModeSelectShow.value\n  isLockShow.value = !isLockShow.value\n}\nconst changeMode = () => {\n  isColorSelectShow.value = !isColorSelectShow.value\n  isLockShow.value = !isLockShow.value\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@use 'sass:math';\n.draw-line {\n  height: 100vh;\n  position: relative;\n  margin-top: v-bind('systemInfo.safeArea.top');\n  .color-select {\n    position: absolute;\n    bottom: 30rpx;\n    left: 30rpx;\n    z-index: 999;\n  }\n  .mode-select {\n    position: absolute;\n    bottom: 30rpx;\n    right: 0;\n    z-index: 999;\n  }\n  .lock {\n    position: absolute;\n    bottom: 30rpx;\n    z-index: 999;\n    left: 50%;\n    transform: translateX(-50%);\n    padding: 10rpx;\n    background-color: rgba($color: #000000, $alpha: 0.6);\n    border-radius: 50%;\n  }\n}\n$tools-height: 100rpx;\n.container {\n  position: relative;\n  max-height: calc(100vh - 100rpx);\n  view {\n    pointer-events: v-bind('containerPointerEvents');\n  }\n  .data {\n    position: relative;\n    .line-canvas {\n      position: absolute;\n      top: -$tools-height;\n      width: 100vw;\n      height: calc(100% + $tools-height);\n      z-index: 2;\n    }\n    & > .row:nth-child(1) {\n      border-top: 2px solid #8baf9b;\n    }\n    & > .row:nth-child(4n) {\n      border-bottom: 4px solid #8baf9b;\n    }\n    & > .row:last-child {\n      border-bottom: 0;\n    }\n    .text {\n      padding: 9rpx;\n      position: absolute;\n      border: 2px solid;\n      border-radius: 5rpx;\n      z-index: 5;\n      .text-container {\n        padding: 5rpx 15rpx;\n        border-radius: 10rpx;\n        .text-item {\n          .text-content {\n            display: inline-block;\n            word-break: break-all;\n            vertical-align: top;\n          }\n        }\n      }\n      $text-font-size: 25rpx;\n      .text-btn-left,\n      .text-btn-right {\n        position: absolute;\n        width: 35rpx;\n        height: 35rpx;\n        // bottom: -$text-font-size / 2 - 2rpx - 5rpx;\n        bottom: math.div(-$text-font-size, 2) - 2rpx - 5rpx;\n        font-size: $text-font-size;\n        line-height: 35rpx;\n        border-radius: 50%;\n        background-color: v-bind(color);\n        color: #fff;\n        text-align: center;\n      }\n      .text-btn-left {\n        // left: -$text-font-size / 2 - 2rpx - 5rpx;\n        left: math.div(-$text-font-size, 2) - 2rpx - 5rpx;\n      }\n      .text-btn-right {\n        // right: -$text-font-size / 2 - 2rpx - 5rpx;\n        right: math.div(-$text-font-size, 2) - 2rpx - 5rpx;\n      }\n    }\n    .text-input {\n      border: 5rpx solid #f89121;\n      width: 300rpx;\n      position: absolute;\n      z-index: 5;\n      left: v-bind('textareaPosition.x + \"px\"');\n      top: calc(v-bind('textareaPosition.y + \"px\"') - 100rpx);\n      background-color: rgba($color: #fff, $alpha: 0.8);\n      transform: translate(-10%, -10%);\n    }\n  }\n}\n\n.row {\n  display: flex;\n  border-bottom: 2px solid #8baf9b;\n  height: 120rpx;\n  text-align: center;\n  font-weight: 700;\n  color: #91c182;\n}\n.column-1 {\n  width: 160rpx;\n  border-right: 4px solid #8baf9b;\n  background-color: #90c380;\n  color: #e0f0bb;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  padding: 26rpx 0;\n  .issueno {\n    height: 28rpx;\n    font-size: 28rpx;\n    line-height: 28rpx;\n  }\n  .date {\n    height: 24rpx;\n    font-size: 24rpx;\n    line-height: 24rpx;\n  }\n}\n.column-2 {\n  width: 90rpx;\n  border-right: 4px solid #8baf9b;\n  background-color: #e0ecbc;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .item {\n    width: 35rpx;\n    height: 35rpx;\n    border-radius: 50%;\n    line-height: 35rpx;\n  }\n  .marker {\n    width: 35rpx;\n    height: 35rpx;\n    border-radius: 50%;\n    color: #fefdf8;\n    border: 5rpx solid #fefdf8;\n    position: relative;\n    z-index: 2;\n    font-size: 25rpx;\n    line-height: 35rpx;\n    background-color: #f7212d;\n  }\n}\n.column-3 {\n  width: 530rpx;\n  display: flex;\n  border-right: 2px solid #8baf9b;\n  font-size: 60rpx;\n  & > view {\n    border-right: 2px solid #8baf9b;\n    width: 106rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    .item {\n      width: 72rpx;\n      height: 72rpx;\n      border-radius: 50%;\n      line-height: 72rpx;\n    }\n  }\n  & :nth-child(4) {\n    border-right: 0;\n  }\n  & :nth-child(5) {\n    background-color: #e0ecbc;\n    border-left: 4px solid #8baf9b;\n    border-right: 0;\n  }\n  .marker {\n    width: 90rpx;\n    height: 110rpx;\n    color: #f7212d;\n    font-size: 25rpx;\n    line-height: 25rpx;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    position: relative;\n    z-index: 2;\n    .number {\n      width: 50rpx;\n      overflow-wrap: break-word;\n    }\n  }\n  .marker-5 {\n    width: 70rpx;\n    height: 70rpx;\n    font-size: 30rpx;\n    // background-color: #f7212d;\n    border-radius: 50%;\n    color: #fff;\n    text-align: center;\n    line-height: 70rpx;\n    border: 5rpx solid #f0eee7;\n    position: relative;\n    z-index: 2;\n  }\n}\n\n.active {\n  background-color: v-bind(color);\n  color: #fff;\n  border: 6rpx solid #f0eee7;\n}\n.item {\n  position: relative;\n  z-index: 3;\n  pointer-events: v-bind(pointerEvents);\n}\n\n.tools {\n  position: sticky;\n  top: 0;\n  z-index: 6;\n  height: $tools-height;\n  background-color: #90c380;\n  width: 100vw;\n  display: flex;\n  justify-content: space-around;\n  font-size: 20rpx;\n  color: #fff;\n  > view {\n    width: 150rpx;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n  }\n}\n.curve-handle {\n  position: absolute;\n  width: 50px;\n  z-index: 4;\n  top: v-bind('curveLineY + \"px\"');\n  left: v-bind('curveLineX + \"px\"');\n  text-align: center;\n  transform: translate(-50%, -50%);\n}\n</style>\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/caimixcx/pages/juWang/drawLine/drawLine.vue'\nwx.createPage(MiniProgramPage)"],"names":["dayjs","getCurrentInstance","ref","uni","nextTick","data","startX","startY","endX","endY","color","size","track","computed","onReady","DrawShape","watch"],"mappings":"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"}